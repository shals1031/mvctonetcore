function LoadMetarialUsagePopup(n){var t=n.parents("tr").attr("id")}function LoadMergeWOs(n,t){var i=null,r=n,u=$("#merger-left ul");$("#merger-left ul").perfectScrollbar("destroy");$.get("workorder/GetMergeReferencesForMerged",{val:r,id:t},function(r){var e,f;for(u.html(r),$("#merger-left ul").perfectScrollbar(),e=$("#merger-left ul li"),f=0;f<e.length;f++)if($(e[f]).data("code").toLowerCase()==n.toLowerCase()){i=$(e[f]);break}LoadMergedGridWithMerged(i,t)})}function LoadMergedGridWithMerged(n,t){var i,r;$("#merger-left ul li:not(.empty)").removeClass("active");i=n.data("code");n.addClass("active");r=$("#merger-right .workorder-holder");$("#merger-right .center").perfectScrollbar("destroy");$.get("workorder/MergeCandiditatesWithMerged",{code:i,id:t},function(n){r.html(n);$("#merger-right .total.tot").data("total",0).find("span").text("$0.00");$("#merger-right .center").perfectScrollbar();CalculateTotal()})}function LoadMergedGrid(n){var t,i;$("#merger-left ul li:not(.empty)").removeClass("active");t=n.data("code");n.addClass("active");i=$("#merger-right .workorder-holder");$("#merger-right .center").perfectScrollbar("destroy");$.get("workorder/MergeCandiditates",{code:t},function(n){i.html(n);$("#merger-right .total.tot").data("total",0).find("span").text("$0.00");$("#merger-right .center").perfectScrollbar();CalculateTotal()})}function CalculateTotal(){var t=$("#merger-right .total.tot"),n,i,r;t.removeClass("pulse");n=0;$(".workorder > tbody  > tr").each(function(){var t=$(this);t.find(".check-box").is(".active")&&(n+=parseFloat(t.find("td:last-child").data("total")))});t.find("span").text(n.formatMoney(2,"$"));t.data("total",n).addClass("pulse");i=$("#merger-right .workorder-holder td");r=i.find(".check-box.active");i.find(".check-box").length===r.length?$("#merger-right .workorder-holder th .check-box").addClass("active"):$("#merger-right .workorder-holder th .check-box").removeClass("active");r.length>1?$("#merger-right .merger-btn").show(200):$("#merger-right .merger-btn").hide(200)}function deleteMergeRow(n){loading(!0);$.post("workorder/DeleteMerge",{id:n.parents("tr").attr("id")},function(n){removeLoader(!0,300,function(){var t,i,r;n.Additional>0?($(".tel-confirm-dialog").dialog("close"),t=dTable2.page(),dTable2.page(t).draw(!1)):($(".tel-confirm-dialog").dialog("close"),i="<p>This record cannot be <b class='default-col'>Deleted<\/b> because it is still <b>Linked<\/b> to other records in the Database.<\/p>",r="<i class='fe-comment'><\/i>Cannot Delete",displayDialogMsg(i,r))})})}function LoadInvWOs(n,t){var i=null,r=n,u=$("#inv-left ul");$("#inv-left ul").perfectScrollbar("destroy");$.get("invoice/GetMergeReferencesForMerged",{val:r,id:t},function(r){var e,f;for(u.html(r),$("#inv-left ul").perfectScrollbar(),e=$("#inv-left ul li"),f=0;f<e.length;f++)if($(e[f]).data("code").toLowerCase()==n.toLowerCase()){i=$(e[f]);break}LoadInvGridWithInv(i,t)})}function LoadInvGridWithInv(n,t){var i=$("#inv-right .workorder-holder");$("#inv-right .center").perfectScrollbar("destroy");$.get("invoice/InvoiceCandiditatesWithInvoiced",{model:n,id:t},function(n){i.html(n);$("#inv-right .total.tot").data("total",0).find("span").text("$0.00");$("#inv-right .center").perfectScrollbar();CalculateWOTotal()})}function LoadInvGrid(n){var t,i;$("#inv-left ul li:not(.empty)").removeClass("active");t=n.data("code");n.addClass("active");i=$("#inv-right .workorder-holder");$("#inv-right .center").perfectScrollbar("destroy");$.get("invoice/MergeCandiditates",{code:t},function(n){i.html(n);$("#inv-right .total.tot").data("total",0).find("span").text("$0.00");$("#inv-right .center").perfectScrollbar();CalculateWOTotal()})}function CalculateWOTotal(){var t=$("#inv-right .total.tot"),n,i,r;t.removeClass("pulse");n=0;$(".workorder > tbody  > tr").each(function(){var t=$(this);t.find(".check-box").is(".active")&&(n+=parseFloat(t.find("td:last-child").data("total")))});t.find("span").text(n.formatMoney(2,"$"));t.data("total",n).addClass("pulse");i=$("#inv-right .workorder-holder td");r=i.find(".check-box.active");i.find(".check-box").length===r.length?$("#inv-right .workorder-holder th .check-box").addClass("active"):$("#inv-right .workorder-holder th .check-box").removeClass("active");r.length>1?$("#inv-right .inv-btn").show(200):$("#inv-right .inv-btn").hide(200)}function deleteinvow(n){loading(!0);$.post("invoice/DeleteMerge",{id:n.parents("tr").attr("id")},function(n){removeLoader(!0,300,function(){var t,i,r;n.Additional>0?($(".tel-confirm-dialog").dialog("close"),t=dTable2.page(),dTable2.page(t).draw(!1)):($(".tel-confirm-dialog").dialog("close"),i="<p>This record cannot be <b class='default-col'>Deleted<\/b> because it is still <b>Linked<\/b> to other records in the Database.<\/p>",r="<i class='fe-comment'><\/i>Cannot Delete",displayDialogMsg(i,r))})})}function setValidationMsgsForForm(n){n.find(".field-validation-error").each(function(){var n=$(this),t=n.find("span").text();n.parents("td").length>0?n.parents("td").find("input, select").attr("title",t).tooltip({placement:"top"}):n.parent().find("input, select").attr("title",t).tooltip({placement:"top"})})}function setValidationMsgsForElm(n){var t=n.parents("td").length==0?n.parent():n.parents("td"),i=t.find(".field-validation-error").find("span").text();n.attr("title",i).tooltip({placement:"top"})}function deleteSWORow(n){var t=deleteUrl==null?n.parents("table").data("url")+"/deleteSWO":deleteUrl;loading(!0);$.post(t,{id:n.parents("tr").attr("id")},function(n){removeLoader(!0,300,function(){var t,i,r;n.Additional>0?($(".tel-confirm-dialog").dialog("close"),t=dTable.page(),dTable.page(t).draw(!1)):($(".tel-confirm-dialog").dialog("close"),i="<p>This record cannot be <b class='default-col'>Deleted<\/b> because it is <b>not in<\/b> New status.<\/p>",r="<i class='fe-comment'><\/i>Cannot Delete",displayDialogMsg(i,r))})})}function displayDialogMsg(n,t){var i='<div class="tel-dialog" title="'+t+'">'+n+"<\/div>";$("body").append(i);$(".tel-dialog").dialog(dialogOptions)}function displayConfirmationMsg(n,t,i){var r=$.extend(!0,{},dialogOptions),u;r.dialogClass="animated wobble";r.buttons=i;u='<div class="tel-confirm-dialog" title="<i class=fe-flash><\/i>'+t+'">'+n+"<\/div>";$("body").append(u);$(".tel-confirm-dialog").dialog(r)}function applyDateTemplate(n,t){return'<li data-date="'+n+'" '+(t!=null?' class="'+t+'">':">")+"<span>"+Date.parse(n).toString("MMMM dd, yyyy")+'<\/span><div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><a href="#"  class="edit-action" title="Edit"><i class="fe-pencil-2"><\/i><\/a><\/div><\/li>'}function applyLocationTemplate(n,t,i){return'<li class="clearfix '+(t!=null?t:"")+'"><span>'+n+'<\/span><span style="display:none;">'+i+'<\/span><div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><a href="#" class="edit-action" title="Edit"><i class="fe-pencil-2"><\/i><\/a><\/div><\/li>'}function applyActivityTemplate(n){var i='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',t;for(x=0;x<n.length;x++)t=n[x],i+='<option value="'+t.activityID+'">'+t.description+"<\/option>";return i+'<\/select><input type="text" class="act-amt" /><\/div><div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><\/div><\/li>'}function applyActivityMatTemplate(n){var t='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',i,r;for(x=0;x<n.length;x++)i=n[x],t+='<option value="'+i.activityID+'">'+i.description+"<\/option>";return t+='<\/select><input type="text" class="act-amt"/><\/div>',r=$("#matsReqHidden").val(),t+(r=="true"?"":'<div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><\/div><\/li>')}function applyQuotActivityTemplate(n){var i='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',t;for(x=0;x<n.length;x++)t=n[x],i+='<option value="'+t.activityID+'">'+t.description+"<\/option>";return i+'<\/select><input type="text" class="act-rat" style="width: 70px;"/><input type="text" class="act-amt" /><\/div><div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><\/div><\/li>'}function applySInvActivityTemplate(n){var i='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',t;for(x=0;x<n.length;x++)t=n[x],i+='<option value="'+t.activityID+'">'+t.description+"<\/option>";return i+'<\/select><input type="text" class="act-rat" style="width: 70px;"/><input type="text" class="act-amt" /><\/div><div class="wo-actions"><a href="#" class="del-action" title="Delete"><i class="fe-trash"><\/i><\/a><\/div><\/li>'}function applyActivityTemplateWithValues(n,t,i){var u='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',r;for(x=0;x<n.length;x++)r=n[x],u+='<option value="'+r.activityID+'" '+(r.activityID==t?'selected="selected"':"")+">"+r.description+"<\/option>";return u+('<\/select><input type="text" class="act-amt" value="'+i+'" /><\/div><div class="wo-actions"><a href="#" class="del-action"><i class="fe-trash" title="Delete"><\/i><\/a><\/div><\/li>')}function discardDataCheck(n){if(wochanged)return!0;switch(n){case"full":return $("#constructor .const-holder ul li[class*='new-']").length>0;case"acts":return $("#constructor .const-locs ul li.new-loc, #constructor .const-acts ul li.new-act").length>0;case"locs":return $("#constructor .const-acts ul li.new-act").length>0}}function generateLocations(){var n,t,i;$("#constructor .const-holder.const-dates ul li").removeClass("active");$(".const-main .const-acts .placeholder").show(200).find("button").removeClass("activated");$(".const-main .const-acts ul").remove();n=temp;n.addClass("active");t=$(".const-main .const-holder.const-locs");n.hasClass("new-date")?(i={wid:$("#constructor").data("id"),invID:$("#constructor").data("inv"),date:n.data("date"),type:$("#constructor").hasClass("view-wo")?"view":""},t.find("ul").remove(),$(".const-main .const-locs .placeholder").show(100,function(){$(".const-main .const-locs .placeholder button").addClass("activated animated flash")}),!AddLocationsFromArry(i)):(i={wid:$("#constructor").data("id"),invID:$("#constructor").data("inv"),date:n.data("date"),type:$("#constructor").hasClass("view-wo")?"view":""},$.post("/workorder/getconstructorlocations",i,function(n){var r=t.find(".placeholder"),u=r.is(":visible")?300:10;r.find("button").removeClass("activated animated flash");r.hide(200);setTimeout(function(){t.find("ul").remove();t.append(n);AddLocationsFromArry(i);$(".const-main .const-locs ul").perfectScrollbar()},u)}))}function generateActivities(){var i,n,t;$("#constructor .const-holder.const-locs ul li").removeClass("active");i=temp;i.addClass("active");n=$(".const-main .const-holder.const-acts");i.hasClass("new-loc")?(t={wid:$("#constructor").data("id"),invID:$("#constructor").data("inv"),date:$("#constructor .const-holder.const-dates ul li.active").data("date"),location:$(i.find("span")[0]).text(),type:$("#constructor").hasClass("view-wo")?"view":""},n.find("ul").remove(),$(".const-main .const-acts .placeholder").show(100,function(){$(".const-main .const-acts .placeholder button").addClass("activated animated flash")}),!AddActivitiesFromArry(t)):(t={wid:$("#constructor").data("id"),invID:$("#constructor").data("inv"),date:$("#constructor .const-holder.const-dates ul li.active").data("date"),location:i.find("span.loc-details").text(),type:$("#constructor").hasClass("view-wo")?"view":""},t.location==""&&(t.location=$(i.find("span")[0]).text()),$.post("/workorder/getconstructoractivities",t,function(i){var r=n.find(".placeholder"),u=r.is(":visible")?300:10;r.find("button").removeClass("activated animated flash");r.hide(200);setTimeout(function(){n.find("ul").remove();n.append(i);AddActivitiesFromArry(t);setDisableActivityOptions();n.find("select").select2({width:"resolve"});n.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$(".const-main .const-acts ul").perfectScrollbar()},u)}))}function AddActivitiesFromArry(n){var u=!1,i=$("#constructor > .const-main .const-acts"),r,f,t;for(CheckIsActExist(n.location,n.date)&&(i.find("ul").length==0&&i.append("<ul><\/ul>"),r=$("#constructor .const-acts .placeholder"),f=r.is(":visible")?300:10,r.hide(200)),t=0;t<tempActs.length;t++)if(tempActs[t].location==n.location&&tempActs[t].actDate==n.date&&!CheckIsInPlaceHolder(tempActs[t].actID)){i.find("ul").append(applyActivityTemplateWithValues(actsTempStorage,tempActs[t].actID,tempActs[t].actQty));$(".const-main .const-acts ul").perfectScrollbar("update");setDisableActivityOptions();i.find("select").select2({width:"resolve",placeholder:"Select an Activity"});i.find("input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});u=!0}return u}function AddLocationsFromArry(n){var u=!1,i=$("#constructor > .const-main .const-locs"),r,f,t;for(CheckIsLocExist(n.location,n.date)&&(i.find("ul").length==0&&i.append("<ul><\/ul>"),r=$("#constructor .const-locs .placeholder"),f=r.is(":visible")?300:10,r.hide(200)),t=0;t<tempLocs.length;t++)tempLocs[t].actDate!=n.date||CheckIsLocInPlaceHolder(tempLocs[t].location)||(i.find("ul").append(applyLocationTemplate(tempLocs[t].location,"new-loc",tempLocs[t].comment)),$(".const-main .const-locs ul").perfectScrollbar("update"),u=!0);return u}function CheckIsActExist(n,t){for(var r=!1,i=0;i<tempActs.length;i++)if(tempActs[i].location==n&&tempActs[i].actDate==t){r=!0;break}return r}function CheckIsLocExist(n){for(var i=!1,t=0;t<tempLocs.length;t++)if(tempLocs[t].actDate==n){i=!0;break}return i}function CheckIsInPlaceHolder(n){var t=!1;return $(".const-main .const-holder.const-acts ul li").each(function(){var i=$(this),r=i.find("select").val();n==r&&(t=!0)}),t}function CheckIsLocInPlaceHolder(n){var t=!1;return $(".const-main .const-holder.const-locs ul li").each(function(){var i=$(this),r=$(i.find("span")[0]).text();n==r&&(t=!0)}),t}function setupLocationDialogBox(n,t){var i=$("#constructor > .const-main .const-locs"),r=$.extend(!0,{},dialogOptions);r.dialogClass="animated rubberBand";r.buttons=[{text:"Save",click:function(){var u=$(this).find("textarea.text-loc"),t=u.val(),e=$(this).find("textarea.text-comment"),l=e.val(),f,o;if(t.isEmpty()&&u.css("border-color","red"),l.isEmpty())e.css("border-color","red");else{f=$("#constructor .const-locs .placeholder");o=f.is(":visible")?300:10;f.hide(200);var t=$(this).find("textarea.text-loc").val(),r=$(this).find("textarea.text-comment").val(),s=$("#constructor").data("id"),h=$("#constructor .const-dates li.active").data("date"),a=temp.find("span").text(),c=t;setTimeout(function(){u.hasClass("editing")?$.post("/workorder/UpdateWorkOrderLocation",{wid:s,date:h,newLocation:c,oldLocation:n,aditinalDetail:r},function(){temp.replaceWith(applyLocationTemplate(t,temp.attr("class"),r))}):(i.find("ul").length==0&&i.append("<ul><\/ul>"),$.post("/workorder/UpdateWorkOrderLocation",{wid:s,date:h,newLocation:c,oldLocation:"newrec",aditinalDetail:r},function(){}),i.find("ul").append(applyLocationTemplate(t,"new-loc",r)));$(".const-main .const-locs ul").perfectScrollbar("update")},o);$(this).dialog("close")}}}];$("body").append('<div class="const-loc-modal" title="<i class=fe-location-2><\/i> Add Location"><lable style="float: left;padding-bottom: 5px;padding-left: 10px;">Location<\/lable><br /><textarea class="text-loc'+(n!=""?' editing"':'"')+">"+n+'<\/textarea><lable style="float: left;padding-bottom: 5px;padding-left: 10px;">Comment<\/lable><br /><textarea class="text-comment'+(t!=""?' editing"':'"')+">"+t+"<\/textarea><\/div>");$(".const-loc-modal").dialog(r)}function setupActivityCalendar(n){var t=[],u=$("#constructor > .const-main .const-dates"),r,i,f;for(u.find("ul li").each(function(){var n=$(this).data("date");t.push(Date.parse(n).toString("M/dd/yyyy"))}),r=$.extend(!0,{},dialogOptions),r.dialogClass="animated rubberBand",r.buttons=[{text:"Save",click:function(){var t=$(".const-date-modal .cal"),i=t.datepicker("getDate"),e=i.toString().indexOf(" ("),o=i.toString().substr(0,e),n=Date.parse(o).toString("M/dd/yyyy HH:mm"),r=$("#constructor .const-dates .placeholder"),s=r.is(":visible")?300:10,f;r.hide(200);f=$("#constructor").data("id");n=n;setTimeout(function(){if(t.hasClass("editing")){var i=temp.data("date");$.post("/workorder/UpdateWorkOrderDate",{wid:f,newDate:n,oldDate:i},function(){temp.replaceWith(applyDateTemplate(n,temp.attr("class")))})}else u.find("ul").length==0&&u.append("<ul><\/ul>"),u.find("ul").append(applyDateTemplate(n,"new-date"));$(".const-main .const-dates ul").perfectScrollbar("update")},s);$(this).dialog("close")}}],r.width=318,$("body").append('<div class="const-date-modal" title="<i class=fe-calendar><\/i> Add Date"><div class="cal'+(n!=null?' editing"':'"')+"><\/div><\/div>"),i=Date.today().toString("M/dd/yyyy"),f=$.inArray(i,t);f>-1;)i=Date.parse(i).addDays(1).toString("M/dd/yyyy"),f=$.inArray(i,t);n==null?n=i:(delete t[$.inArray(Date.parse(n).toString("M/dd/yyyy"),t)],n=Date.parse(n).toString("M-d-yyyy"));$(".const-date-modal .cal").datepicker({todayHighlight:!0,format:"D M dd, yyyy",beforeShowDay:function(n){var i=Date.parse(n.toDateString()).toString("M/dd/yyyy");return $.inArray(i,t)==-1}}).datepicker("setDate",n);$(".const-date-modal").dialog(r)}function setDisableActivityOptions(){var n,t,i;for(actsSelectedValue=[],n=$("#constructor .const-acts .act-holder select.act-ddl"),n.find("option.elsewhere").removeAttr("disabled"),n.each(function(){var n=$(this).val();actsSelectedValue.push(n)}),t=0;t<actsSelectedValue.length;t++)i=actsSelectedValue[t],n.each(function(){var n=$(this),t=n.find("option[value='"+i+"']");n.val()!=i?t.addClass("elsewhere").attr("disabled","disabled"):t.removeClass("elsewhere")})}function deleteAction(n){var t=n=="Date"?temp.data("date"):n=="Location"?temp.find("span.loc-details").text():temp.data("id"),i=$("#constructor").data("inv"),r=$("#constructor").data("id");$.post("/workorder/deletefromworkorder",{val:t,type:n,wid:r,invid:i},function(t){var r,i,u,f,e;t.Code=="100"?(temp.remove(),n=="Activity"?(i=$(".const-main .const-holder.const-acts"),i.find("li").length<1&&($(".const-main .const-holder.const-locs li.active").addClass("new-loc"),i.find("ul").remove(),i.find(".placeholder").show(100,function(){$(this).find("button").addClass("activated animated flash")}))):n=="Location"?(r=$(".const-main .const-holder.const-locs"),i=$(".const-main .const-holder.const-acts"),i.find("ul").remove(),i.find(".placeholder").show(100),r.find("li").length<1&&($(".const-main .const-holder.const-dates li.active").addClass("new-date"),r.find("ul").remove(),r.show(100,function(){r.find("button").addClass("activated animated flash")}))):(u=$(".const-main .const-holder.const-locs, .const-main .const-holder.const-acts"),u.find("ul").remove(),u.find(".placeholder").show(100))):(f="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",e="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(f,e));$(".const-main .const-holder ul").perfectScrollbar("update")})}function updateAction(){var n=$(".const-main .const-holder.const-dates ul li.active").data("date"),i=$($(".const-main .const-holder.const-locs ul li.active").find("span")[0]).text(),e=$($(".const-main .const-holder.const-locs ul li.active").find("span")[1]).text(),r=$("#constructor").data("id"),u=$("#constructor").data("inv"),f=[],t;$(".const-main .const-holder.const-acts ul li").each(function(){for(var r=$(this),e=r.find("select").val(),o=r.find(".act-amt").val(),s=r.find(".mats-req")!=undefined?r.find(".mats-req").val():!1,u=[],t=0;t<actMaterialQtyArry.length;t++)if(new Date(actMaterialQtyArry[t].date).toLocaleDateString()==new Date(n).toLocaleDateString()&&actMaterialQtyArry[t].loc==i&&actMaterialQtyArry[t].actID==e){var h=actMaterialQtyArry[t].RID,c=actMaterialQtyArry[t].matID,l=actMaterialQtyArry[t].matQty;u.push({RID:h,MetarialId:c,Amount:l})}s=="true"&&u.length<=0||f.push({RecID:r.data("id"),RID:e,Amount:o,HasMetarials:u.length>0?!0:!1,Metarials:u})});t=[];t.push({WID:r,InvId:u,Date:n,Location:i,AdtnlDetails:e,Activities:f});$(".const-main .const-holder.const-locs ul li").each(function(){var o=$($(this).find("span")[0]).text(),l=$($(this).find("span")[1]).text(),s,f,e;if(o!=i){for(s=[],f=0;f<tempActs.length;f++)if(tempActs[f].location==o&&tempActs[f].actDate==n){var a=tempActs[f].id,c=tempActs[f].actID,v=tempActs[f].actQty,y=tempActs[f].matsReq,h=[];for(e=0;e<actMaterialQtyArry.length;e++)if(actMaterialQtyArry[e].date==n&&actMaterialQtyArry[e].loc==o&&actMaterialQtyArry[e].actID==c){var p=actMaterialQtyArry[e].RID,w=actMaterialQtyArry[e].matID,b=actMaterialQtyArry[e].matQty;h.push({RID:p,MetarialId:w,Amount:b})}if(y=="true"&&h.length<=0)return;s.push({RecID:a,RID:c,Amount:v,HasMetarials:h.length>0?!0:!1,Metarials:h})}s.length>0&&t.push({WID:r,InvId:u,Date:n,Location:o,AdtnlDetails:l,Activities:s})}});$.post("/workorder/updateactivities",$.toDictionary(t),function(n){var t,i;n.Code=="100"?($("#constructor").find("li").removeClass("new-date new-loc"),temp=$("#constructor .const-holder.const-locs ul li.active"),generateActivities(),t="<p>Activities were <b>Updated<\/b> Successfully!.<\/p>",i="<i class='fe-comment'><\/i> Success",actMaterialQtyArry=[],tempActs=[],displayDialogMsg(t,i)):(t="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",i="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(t,i))})}function setupMsgBar(n,t){var i=$(".tel-form .msg-bar");switch(n){case 1:i.find("i").removeClass("fe-cancel fe-ok").addClass("fe-info-1");i.removeClass("success error").find("span").text(t);i.addClass("animated pulse");break;case 2:i.find("i").removeClass("fe-cancel fe-info-1").addClass("fe-ok");i.removeClass("error").addClass("success").find("span").text(t);i.addClass("animated pulse");break;default:i.find("i").removeClass("fe-ok fe-info-1").addClass("fe-cancel");i.removeClass("success").addClass("error").find("span").text(t);i.addClass("animated wobble")}}function imageExists(n){var t=new XMLHttpRequest;return t.open("HEAD",n,!1),t.send(),t.status!=404}function closeConstructor(){$("#constructor").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var n;$(this).remove();$(".full-overlay").fadeOut(200,function(){$(this).remove()});!$("#con-wo").is(":visible")||$(".tech-tbl").length>0?(n=dTable.page(),dTable.page(n).draw(!1)):(n=aDtable.page(),aDtable.page(n).draw(!1),$.get("contractor/refreshConStats",{id:$("#sub-head").data("id")},function(n){$("#sub-head").replaceWith(n)}))})}function loading(n){$(".for-loader").is(":visible")||($("body").append('<div class="full-overlay for-loader'+(n?" above":"")+'"><\/div>'),$(".for-loader").fadeIn(100),$("body").append('<div class="loading-holder spin"><\/div><span class="loading-t">T<\/span>'))}function removeLoader(n,t,i){first=t<=1e3?1e3:t-1e3;next=t<=1e3?t*2:t;setTimeout(function(){$(".loading-holder, .loading-t").fadeOut(200,function(){$(this).remove()});$(".for-loader"+(n?".above":"")).fadeOut(200,function(){$(this).remove()})},first);setTimeout(function(){i&&typeof i=="function"&&i()},next)}function setupTechPrintOuts(n){techTable=$("table.tech-tbl").DataTable(n);$(".sub-top.tech-prt").append('<div id="tech-range" class="input-daterange input-group clearfix" id="datepicker"><input type="text" class="input-sm form-control" name="start" readonly /><span class="input-group-addon">to<\/span><input type="text" class="input-sm form-control" name="end" readonly /><button class="refresh"><i class="fe-cw-outline"><\/i><\/button><button class="cancel"><i class="fe-cancel"><\/i><\/button><\/div>');$(".dataTables_wrapper select").select2({minimumResultsForSearch:-1,width:"resolve"});$(".sub-top.tech-prt .input-daterange").datepicker({format:"DD M dd, yyyy"})}function setupTeamActions(n){$(".team-setup").find(".number").onlyNumbers({neagtive:!1,decimal:!0});var t=n?$(".team-setup tr .con-ddl"):$(".team-setup tr").last().find(".con-ddl");t.select2({placeholder:"select a contractor",width:260,ajax:{url:"/workorder/getcontractors",dataType:"json",delay:100,data:function(n){var t=[];return $(".team-setup .con-ddl").each(function(){t.push($(this).val())}),$.toDictionary({ids:t,query:n.term})},processResults:function(n){return{results:n.suggestions}}},escapeMarkup:function(n){return n},templateResult:function(n){return"<div class='select2-user-result'>"+n.term+"<\/div>"},templateSelection:function(n){return n.term},formatNoMatches:function(){return"<b>No Matches Found<\/b>"},initSelection:function(n,t){var i=$(n).attr("data-init-text");t({term:i})}})}function deleteRow(n){var t=deleteUrl==null?n.parents("table").data("url")+"/delete":deleteUrl;loading(!0);$.post(t,{id:n.parents("tr").attr("id")},function(n){removeLoader(!0,300,function(){var t,i,r;n.Additional>0?($(".tel-confirm-dialog").dialog("close"),t=dTable.page(),dTable.page(t).draw(!1)):($(".tel-confirm-dialog").dialog("close"),i="<p>This record cannot be <b class='default-col'>Deleted<\/b> because it is still <b>Linked<\/b> to other records in the Database.<\/p>",r="<i class='fe-comment'><\/i>Cannot Delete",displayDialogMsg(i,r))})})}function discardMetarialDataCheck(n){if(wochanged)return!0;switch(n){case"full":return $("#matConstructor .const-holder ul li[class*='new-']").length>0;case"acts":return $("#matConstructor .const-locs ul li.new-loc, #matConstructor .const-mats ul li.new-act").length>0;case"locs":return $("#matConstructor .const-mats ul li.new-act").length>0}}function setDisableMetarialOptions(){var n,t,i;for(actsSelectedValue=[],n=$("#matConstructor .const-mats .act-holder select.act-ddl"),n.find("option.elsewhere").removeAttr("disabled"),n.each(function(){var n=$(this).val();actsSelectedValue.push(n)}),t=0;t<actsSelectedValue.length;t++)i=actsSelectedValue[t],n.each(function(){var n=$(this),t=n.find("option[value='"+i+"']");n.val()!=i?t.addClass("elsewhere").attr("disabled","disabled"):t.removeClass("elsewhere")})}function deleteMetarial(n){var i=temp.data("id"),u=$("#matConstructor").data("inv"),f=$("#matConstructor").data("id"),r,t;if(i!=undefined&&i!=0&&i!=-1)$.post("/workorder/deletemetarialfromworkorder",{val:i,type:n,wid:f,invid:u},function(t){var i,r,u;t.Code=="100"?(temp.remove(),n=="Activity"&&(i=$(".mat-const-main .const-holder.const-mats"),i.find("li").length<1&&(i.find("ul").remove(),i.find(".placeholder").show(100,function(){$(this).find("button").addClass("activated animated flash")})))):(r="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",u="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(r,u));$(".mat-const-main .const-holder ul").perfectScrollbar("update")});else{for(r=-1,t=0;t<actMaterialQtyArry.length;t++)if(actMaterialQtyArry[t].actID==actID&&actMaterialQtyArry[t].loc==loc&&actMaterialQtyArry[t].date==date&&actMaterialQtyArry[t].matID==matID){r=t;break}r!=-1&&fruits.splice(r,1)}}function updateMetarial(){$(".mat-const-main .const-holder.const-mats ul li").each(function(){var t=$(this),f=$("#matConstructor #actIdHidden").val(),e=$("#matConstructor #locHidden").val(),o=$("#matConstructor #dateHidden").val(),i=t.find("select").val(),r=t.find(".act-amt").val(),u,n;if(!i.isEmpty()&&!r.isEmpty()){for(u=!1,n=0;n<actMaterialQtyArry.length;n++)actMaterialQtyArry[n].actID==f&&actMaterialQtyArry[n].loc==e&&actMaterialQtyArry[n].date==o&&actMaterialQtyArry[n].matID==i&&(actMaterialQtyArry[n].matQty=r,u=!0);u||actMaterialQtyArry.push({RID:t.data("id"),actID:f,loc:e,date:o,matID:i,matQty:r})}});isMatAddedToist=!0;closeMatConstructor()}function ReLoadMetarias(n){$.ajax({url:"/workorder/GenerateMetarialConstructor",data:{wid:n},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#matConstructor [title]").tooltip({placement:"top"});$("#matConstructor").addClass("animated bounceInRight").show();$(".mat-const-main .const-holder ul").perfectScrollbar();$("#matConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#matConstructor .title span").dotdotdot();t=$(".mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$(".mat-const-main .const-mats .placeholder").show(100,function(){$(".mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableMetarialOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$(".mat-const-main .const-mats ul").perfectScrollbar()},r))})}})}function closeMatConstructor(){$("#matConstructor").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove();$(".full-overlay").fadeOut(200,function(){$(this).remove()});!$("#con-wo").is(":visible")||$(".tech-tbl").length>0||$.get("contractor/refreshConStats",{id:$("#sub-head").data("id")},function(n){$("#sub-head").replaceWith(n)})})}function discardQuotationDataCheck(n){if(wochanged)return!0;switch(n){case"full":return $("#qConstructor .const-holder ul li[class*='new-']").length>0;case"acts":return $("#qConstructor .const-locs ul li.new-loc, #qConstructor .const-mats ul li.new-act").length>0;case"locs":return $("#qConstructor .const-mats ul li.new-act").length>0}}function setDisableQuotationActivityOptions(){var n,t,i;for(actsSelectedValue=[],n=$("#qConstructor .const-mats .act-holder select.act-ddl"),n.find("option.elsewhere").removeAttr("disabled"),n.each(function(){var n=$(this).val();actsSelectedValue.push(n)}),t=0;t<actsSelectedValue.length;t++)i=actsSelectedValue[t],n.each(function(){var n=$(this),t=n.find("option[value='"+i+"']");n.val()!=i?t.addClass("elsewhere").attr("disabled","disabled"):t.removeClass("elsewhere")})}function deleteQuotationActivity(n){var t=temp.data("id");$.post("/quotation/deleteactivityfromquotation",{val:t},function(t){var i,r,u;t.Code=="100"?(temp.remove(),n=="Activity"&&(i=$("#qConstructor .mat-const-main .const-holder.const-mats"),i.find("li").length<1&&(i.find("ul").remove(),i.find(".placeholder").show(100,function(){$(this).find("button").addClass("activated animated flash")})))):(r="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",u="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(r,u));$("#qConstructor .mat-const-main .const-holder ul").perfectScrollbar("update")})}function updateQuotationActivity(){var i=$("#qConstructor").data("id"),t=[],n;$("#qConstructor .mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),i=n.find("select").val(),r=n.find(".act-amt").val(),u=n.find(".act-rat").val();t.push({RecID:n.data("id"),ActDescr:i,Qty:r,Rate:u})});n=[];n.push({QID:i,Activities:t});$.post("/quotation/updateActivities",$.toDictionary(n),function(n){var t,i;n.Code=="100"?(closeQuotConstructor(),t="<p>Activities were <b>Updated<\/b> Successfully!.<\/p>",i="<i class='fe-comment'><\/i> Success"):(t="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",i="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(t,i))})}function ReLoadQuotationActivities(n){$.ajax({url:"/quotation/GenerateConstructor",data:{qid:n},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#qConstructor [title]").tooltip({placement:"top"});$("#qConstructor").addClass("animated bounceInRight").show();$("#qConstructor .mat-const-main .const-holder ul").perfectScrollbar();$("#qConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#qConstructor .title span").dotdotdot();t=$(".mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$("#qConstructor .mat-const-main .const-mats .placeholder").show(100,function(){$("#qConstructor .mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableQuotationActivityOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$("#qConstructor .mat-const-main .const-mats ul").perfectScrollbar()},r))})}})}function closeQuotConstructor(){$("#qConstructor").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var n;$(this).remove();$(".full-overlay").fadeOut(200,function(){$(this).remove()});!$("#con-wo").is(":visible")||$(".tech-tbl").length>0?(n=dTable.page(),dTable.page(n).draw(!1)):(n=aDtable.page(),aDtable.page(n).draw(!1),$.get("contractor/refreshConStats",{id:$("#sub-head").data("id")},function(n){$("#sub-head").replaceWith(n)}))})}function discardSInvoiceDataCheck(n){if(wochanged)return!0;switch(n){case"full":return $("#sIConstructor .const-holder ul li[class*='new-']").length>0;case"acts":return $("#sIConstructor .const-locs ul li.new-loc, #sIConstructor .const-mats ul li.new-act").length>0;case"locs":return $("#sIConstructor .const-mats ul li.new-act").length>0}}function setDisableSInvoiceActivityOptions(){var n,t,i;for(actsSelectedValue=[],n=$("#sIConstructor .const-mats .act-holder select.act-ddl"),n.find("option.elsewhere").removeAttr("disabled"),n.each(function(){var n=$(this).val();actsSelectedValue.push(n)}),t=0;t<actsSelectedValue.length;t++)i=actsSelectedValue[t],n.each(function(){var n=$(this),t=n.find("option[value='"+i+"']");n.val()!=i?t.addClass("elsewhere").attr("disabled","disabled"):t.removeClass("elsewhere")})}function deleteSInvoiceActivity(n){var t=temp.data("id");$.post("/StandbyInvoice/DeleteActivityFromStandbyInvoice",{val:t},function(t){var i,r,u;t.Code=="100"?(temp.remove(),n=="Activity"&&(i=$("#sIConstructor .mat-const-main .const-holder.const-mats"),i.find("li").length<1&&(i.find("ul").remove(),i.find(".placeholder").show(100,function(){$(this).find("button").addClass("activated animated flash")})))):(r="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",u="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(r,u));$("#sIConstructor .mat-const-main .const-holder ul").perfectScrollbar("update")})}function updateSInvoiceActivity(){var i=$("#sIConstructor").data("id"),t=[],n;$("#sIConstructor .mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),i=n.find("select").val(),r=n.find(".act-amt").val(),u=n.find(".act-rat").val();t.push({RecID:n.data("id"),ActId:i,Qty:r,Rate:u})});n=[];n.push({SIID:i,Activities:t});$.post("/StandbyInvoice/updateActivities",$.toDictionary(n),function(n){var t,i;n.Code=="100"?(closeSInvoiceConstructor(),t="<p>Activities were <b>Updated<\/b> Successfully!.<\/p>",i="<i class='fe-comment'><\/i> Success"):(t="<p>Something went wrong while trying to complete your request. Please try again or contact your System Administrator.<\/p>",i="<i class='fe-comment'><\/i> Something went wrong",displayDialogMsg(t,i))})}function ReLoadSInvoiceActivities(n){$.ajax({url:"/StandbyInvoice/GenerateConstructor",data:{sIid:n},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#sIConstructor [title]").tooltip({placement:"top"});$("#sIConstructor").addClass("animated bounceInRight").show();$("#sIConstructor .mat-const-main .const-holder ul").perfectScrollbar();$("#sIConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#sIConstructor .title span").dotdotdot();t=$(".mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$("#sIConstructor .mat-const-main .const-mats .placeholder").show(100,function(){$("#sIConstructor .mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableSInvoiceActivityOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$("#sIConstructor .mat-const-main .const-mats ul").perfectScrollbar()},r))})}})}function closeSInvoiceConstructor(){$("#sIConstructor").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var n;$(this).remove();$(".full-overlay").fadeOut(200,function(){$(this).remove()});!$("#con-wo").is(":visible")||$(".tech-tbl").length>0?(n=dTable.page(),dTable.page(n).draw(!1)):(n=aDtable.page(),aDtable.page(n).draw(!1),$.get("contractor/refreshConStats",{id:$("#sub-head").data("id")},function(n){$("#sub-head").replaceWith(n)}))})}(function(n){n.idleTimer=function t(i){var r=!1,e=!0,u=3e4,f=function(){r=!r;t.olddate=+new Date;n(document).trigger(n.data(document,"idleTimer",r?"idle":"active")+".idleTimer")},o=function(){e=!1;clearTimeout(n.idleTimer.tId);n(document).unbind(".idleTimer")},s=function(){clearTimeout(n.idleTimer.tId);e&&(r&&f(),n.idleTimer.tId=setTimeout(f,u))};if(t.olddate=t.olddate||+new Date,typeof i=="number")u=i;else{if(i==="destroy")return o(),this;if(i==="getElapsedTime")return+new Date-t.olddate}n(document).bind(n.trim("mousemove keydown DOMMouseScroll mousewheel mousedown ".split(" ").join(".idleTimer ")),s);n.idleTimer.tId=setTimeout(f,u);n.data(document,"idleTimer","active")}})(jQuery),function(n,t){var i={init:function(i,r,u){var f=this,e;this.warning=e=n(i);this.resume=n(r);this.options=u;this.countdownOpen=!1;this.failedRequests=u.failedRequests;this._startTimer();this.title=document.title;n.data(e[0],"idletimeout",this);n.idleTimer(u.idleAfter*1e3);n(document).bind("idle.idleTimer",function(){n.data(document,"idleTimer")!=="idle"||f.countdownOpen||(f._stopTimer(),f.countdownOpen=!0,f._idle())});this.resume.bind("click",function(n){n.preventDefault();t.clearInterval(f.countdown);f.countdownOpen=!1;f._startTimer();f._keepAlive(!1);u.onResume.call(f.warning)})},_idle:function(){var u=this,n=this.options,i=this.warning[0],r=n.warningLength;n.onIdle.call(i);n.onCountdown.call(i,r);this.countdown=t.setInterval(function(){--r==0?(window.clearInterval(u.countdown),n.onTimeout.call(i)):(n.onCountdown.call(i,r),document.title=n.titleMessage.replace("%s",r)+u.title)},1e3)},_startTimer:function(){var n=this;this.timer=t.setTimeout(function(){n._keepAlive()},this.options.pollingInterval*1e3)},_stopTimer:function(){this.failedRequests=this.options.failedRequests;t.clearTimeout(this.timer)},_keepAlive:function(t){var i=this,r=this.options;if(document.title=i.title,typeof t=="undefined"&&(t=!0),!this.failedRequests){this._stopTimer();r.onAbort.call(this.warning[0]);return}n.ajax({timeout:r.AJAXTimeout,url:r.keepAliveURL,error:function(){i.failedRequests--},success:function(t){n.trim(t)!==r.serverResponseEquals&&i.failedRequests--},complete:function(){t&&i._startTimer()}})}};n.idleTimeout=function(t,r,u){return i.init(t,r,n.extend(n.idleTimeout.options,u)),this};n.idleTimeout.options={warningLength:30,keepAliveURL:"",serverResponseEquals:"OK",idleAfter:600,pollingInterval:60,failedRequests:5,AJAXTimeout:250,titleMessage:"Warning: %s seconds until log out | ",onTimeout:n.noop,onIdle:n.noop,onCountdown:n.noop,onResume:n.noop,onAbort:n.noop}}(jQuery,window),function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function c(n){return function(){return this[n].apply(this,arguments)}}function y(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function p(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var s=n(window),l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this.dates=new l;this.viewDate=e();this.focusDate=null;this._process_options(r);this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},h,a,o,v,r,i;f.prototype={constructor:f,_process_options:function(t){var u,e,h,f,s;this._o=n.extend({},this._o,t);u=this.o=n.extend({},this._o);e=u.language;r[e]||(e=e.split("-")[0],r[e]||(e=o.language));u.language=e;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}if(u.startView=Math.max(u.startView,u.minViewMode),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate=u.multidate!==!1?Math.max(0,u.multidate):1),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,h=i.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,h,u.language):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,h,u.language):Infinity),u.daysOfWeekDisabled=u.daysOfWeekDisabled||[],n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/)),u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)}),f=String(u.orientation).toLowerCase().split(/\s+/g),s=u.orientation.toLowerCase(),f=n.grep(f,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},s&&s!=="auto")if(f.length===1)switch(f[0]){case"top":case"bottom":u.orientation.y=f[0];break;case"left":case"right":u.orientation.x=f[0]}else s=n.grep(f,function(n){return/^left|right$/.test(n)}),u.orientation.x=s[0]||"auto",s=n.grep(f,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=s[0]||"auto"},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body");this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},_utc_to_local:function(n){return n&&new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,n.map(t,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change()},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){var i,v,o;if(!this.isInline){var u=this.picker.outerWidth(),f=this.picker.outerHeight(),h=10,c=s.width(),y=s.height(),l=s.scrollTop(),p=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!=="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),a=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),w=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),r=t.left,e=t.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(r-=u-w)):(this.picker.addClass("datepicker-orient-left"),t.left<0?r-=t.left-h:t.left+u>c&&(r=c-u-h));i=this.o.orientation.y;i==="auto"&&(v=-l+t.top-f,o=l+y-(t.top+a+f),i=Math.max(v,o)===o?"top":"bottom");this.picker.addClass("datepicker-orient-"+i);i==="top"?e+=a:e-=f+parseInt(this.picker.css("padding-top"));this.picker.css({top:e,left:r,zIndex:p})}},_allow_update:!0,update:function(){if(this._allow_update){var r=this.dates.copy(),t=[],u=!1;arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date);t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this));t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0);this.dates.replace(t);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate));u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&r.length&&this._trigger("clearDate");this.fill()}},fillDow:function(){var i=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));i<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[i++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var d=new Date(this.viewDate),f=d.getUTCFullYear(),g=d.getUTCMonth(),y=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ut=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,p=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ft=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",w,e,b,c,s,h,o,a,it,rt,l,v;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(et).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(ot).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),e=u(f,g-1,28),b=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(b),e.setUTCDate(b-(e.getUTCDay()-this.o.weekStart+7)%7),c=new Date(e),c.setUTCDate(c.getUTCDate()+42),c=c.valueOf(),s=[];e.valueOf()<c;){if(e.getUTCDay()===this.o.weekStart&&(s.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),k=new Date(Number(k=u(tt.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),st=(tt-k)/6048e5+1;s.push('<td class="cw">'+st+"<\/td>")}h=this.getClassNames(e);h.push("day");this.o.beforeShowDay!==n.noop&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:typeof o=="boolean"?o={enabled:o}:typeof o=="string"&&(o={classes:o}),o.enabled===!1&&h.push("disabled"),o.classes&&(h=h.concat(o.classes.split(/\s+/))),o.tooltip&&(w=o.tooltip));h=n.unique(h);s.push('<td class="'+h.join(" ")+'"'+(w?' title="'+w+'"':"")+">"+e.getUTCDate()+"<\/td>");e.getUTCDay()===this.o.weekEnd&&s.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(s.join("")),a=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&a.eq(t.getUTCMonth()).addClass("active")}),(f<y||f>p)&&a.addClass("disabled"),f===y&&a.slice(0,ut).addClass("disabled"),f===p&&a.slice(ft+1).addClass("disabled"),s="",f=parseInt(f/10,10)*10,it=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td"),f-=1,rt=n.map(this.dates,function(n){return n.getUTCFullYear()}),v=-1;v<11;v++)l=["year"],v===-1?l.push("old"):v===10&&l.push("new"),n.inArray(f,rt)!==-1&&l.push("active"),(f<y||f>p)&&l.push("disabled"),s+='<span class="'+l.join(" ")+'">'+f+"<\/span>",f+=1;it.html(s)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){var r,e,f,o,c,s,l,h;if(t.preventDefault(),r=n(t.target).closest("span, td, th"),r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":c=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,c);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,c);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn==="linked"?null:"view";this._setDate(s,l);break;case"clear":this.isInput?h=this.element:this.component&&(h=this.element.find("input"));h&&h.val("").change();this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(u(e,f,o))):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(u(e,f,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.is(".old")?f===0?(f=11,e-=1):f-=1:r.is(".new")&&(f===11?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n?t!==-1&&this.o.allowDeselection?this.dates.remove(t):this.dates.push(n):this.dates.clear(),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));t&&t!=="view"||(this.viewDate=n&&new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(n,i){var e;if(!n)return t;if(!i)return n;var r=new Date(n.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),h=Math.abs(i),u,f;if(i=i>0?1:-1,h===1)f=i===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+i,r.setUTCMonth(u),(u<0||u>11)&&(u=(u+12)%12);else{for(e=0;e<h;e++)r=this.moveMonth(r,i);u=r.getUTCMonth();r.setUTCDate(o);f=function(){return u!==r.getUTCMonth()}}while(f())r.setUTCDate(--o),r.setUTCMonth(u);return r},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var o,t,i,u,r,f;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode===37?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t),u=new Date(r),u.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode===38?-1:1;n.ctrlKey?(i=this.moveYear(this.dates.get(-1)||e(),t),u=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveMonth(this.dates.get(-1)||e(),t),u=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||e()),i.setUTCDate(i.getUTCDate()+t*7),u=new Date(r),u.setUTCDate(r.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=u,this.setValue(),this.fill(),n.preventDefault());break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(r);o=!0;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};h=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;n.fn.datepicker=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var s=n(this),e=s.data("datepicker"),l=typeof i=="object"&&i,v;if(!e){var a=y(this,"date"),w=n.extend({},o,a,l),b=p(w.language),c=n.extend({},o,b,a,l);s.is(".input-daterange")||c.inputs?(v={inputs:c.inputs||s.find("input").toArray()},s.data("datepicker",e=new h(this,n.extend(c,v)))):s.data("datepicker",e=new f(this,c))}if(typeof i=="string"&&typeof e[i]=="function"&&(r=e[i].apply(e,u),r!==t))return!1}),r!==t?r:this};o=n.fn.datepicker.defaults={allowDeselection:!1,autoclose:!0,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function tt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n===t}var nt,c,v,y,h,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if(typeof o=="string"&&(o=i.parseFormat(o)),nt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++){v=nt.exec(c[h]);y=parseInt(v[1]);switch(v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+y*7);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var b={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return n.inArray(i,g)!==-1}).toArray()),c.length===a.length){for(h=0,it=a.length;h<it;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":k=n(r[s].months).filter(tt);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(tt);p=n.inArray(k[0],r[s].monthsShort)+1}b[v]=p}for(h=0;h<g.length;h++)w=g[h],w in b&&!isNaN(b[w])&&(d=new Date(e),l[w](d,b[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";for(typeof u=="string"&&(u=i.parseFormat(u)),e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">&raquo;<\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),i.datepicker("show"))});n(function(){n('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);mutate_event_stack=[{name:"width",handler:function(t){return(n={el:t},$(n.el).data("mutate-width")||$(n.el).data("mutate-width",$(n.el).width()),$(n.el).data("mutate-width")&&$(n.el).width()!=$(n.el).data("mutate-width"))?($(n.el).data("mutate-width",$(n.el).width()),!0):!1}},{name:"height",handler:function(n){return element=n,$(element).data("mutate-height")||$(element).data("mutate-height",$(element).height()),$(element).data("mutate-height")&&$(element).height()!=$(element).data("mutate-height")?($(element).data("mutate-height",$(element).height()),!0):void 0}},{name:"top",handler:function(n){return $(n).data("mutate-top")||$(n).data("mutate-top",$(n).css("top")),$(n).data("mutate-top")&&$(n).css("top")!=$(n).data("mutate-top")?($(n).data("mutate-top",$(n).css("top")),!0):void 0}},{name:"bottom",handler:function(n){return $(n).data("mutate-bottom")||$(n).data("mutate-bottom",$(n).css("bottom")),$(n).data("mutate-bottom")&&$(n).css("bottom")!=$(n).data("mutate-bottom")?($(n).data("mutate-bottom",$(n).css("bottom")),!0):void 0}},{name:"right",handler:function(n){return $(n).data("mutate-right")||$(n).data("mutate-right",$(n).css("right")),$(n).data("mutate-right")&&$(n).css("right")!=$(n).data("mutate-right")?($(n).data("mutate-right",$(n).css("right")),!0):void 0}},{name:"left",handler:function(n){return $(n).data("mutate-left")||$(n).data("mutate-left",$(n).css("left")),$(n).data("mutate-left")&&$(n).css("left")!=$(n).data("mutate-left")?($(n).data("mutate-left",$(n).css("left")),!0):void 0}},{name:"hide",handler:function(n){if($(n).is(":hidden"))return!0}},{name:"show",handler:function(n){if($(n).is(":visible"))return!0}},{name:"scrollHeight",handler:function(n){return $(n).data("prev-scrollHeight")||$(n).data("prev-scrollHeight",$(n)[0].scrollHeight),$(n).data("prev-scrollHeight")&&$(n)[0].scrollHeight!=$(n).data("prev-scrollHeight")?($(n).data("prev-scrollHeight",$(n)[0].scrollHeight),!0):void 0}},{name:"scrollWidth",handler:function(n){return $(n).data("prev-scrollWidth")||$(n).data("prev-scrollWidth",$(n)[0].scrollWidth),$(n).data("prev-scrollWidth")&&$(n)[0].scrollWidth!=$(n).data("prev-scrollWidth")?($(n).data("prev-scrollWidth",$(n)[0].scrollWidth),!0):void 0}},{name:"scrollTop",handler:function(n){return $(n).data("prev-scrollTop")||$(n).data("prev-scrollTop",$(n)[0].scrollTop()),$(n).data("prev-scrollTop")&&$(n)[0].scrollTop()!=$(n).data("prev-scrollTop")?($(n).data("prev-scrollTop",$(n)[0].scrollTop()),!0):void 0}},{name:"scrollLeft",handler:function(n){return $(n).data("prev-scrollLeft")||$(n).data("prev-scrollLeft",$(n)[0].scrollLeft()),$(n).data("prev-scrollLeft")&&$(n)[0].scrollLeft()!=$(n).data("prev-scrollLeft")?($(n).data("prev-scrollLeft",$(n)[0].scrollLeft()),!0):void 0}}],function(n){function t(){var i=mutate;i.event_stack!="undefined"&&i.event_stack.length&&n.each(i.event_stack,function(n,t){mutate.add_event(t)});i.event_stack=[];n.each(i.stack,function(t,r){n(r.selector).each(function(n,t){i.events[r.event_name](t)===!0?r.callback&&r.callback(t,r):r.false_callback&&r.false_callback(t,r)})});setTimeout(t,mutate.speed)}mutate={speed:1,event_stack:mutate_event_stack,stack:[],events:{},add_event:function(n){mutate.events[n.name]=n.handler},add:function(n,t,i,r){mutate.stack[mutate.stack.length]={event_name:n,selector:t,callback:i,false_callback:r}}};t();n.fn.extend({mutate:function(){var t=!1,i=arguments[1],r=this,u=arguments[2]?arguments[2]:function(){};return arguments[0].toLowerCase()=="extend"?(mutate.add_event(i),this):(n.each(n.trim(arguments[0]).split(" "),function(n,f){t=f;mutate.add(t,r,i,u)}),this)}})}(jQuery);!function(n,t){function v(n,t,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;s>u;u++){if(f=e.eq(u),n.append(f),r&&n.append(r),i(n,t)){f.remove();o=!0;break}r&&r.detach()}return o}function f(t,r,u,e,o){var s=!1,h="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",c="script, .dotdotdot-keep";return t.contents().detach().each(function(){var a=this,l=n(a);if("undefined"==typeof a||3==a.nodeType&&0==n.trim(a.data).length)return!0;if(l.is(c))t.append(l);else{if(s)return!0;t.append(l);o&&t[t.is(h)?"after":"append"](o);i(u,e)&&(s=3==a.nodeType?y(l,r,u,e,o):f(l,r,u,e,o),s||(l.detach(),s=!0));s||o&&o.detach()}}),s}function y(t,f,o,h,c){var l=t[0],nt,k,d;if(!l)return!1;var y=s(l),tt=-1!==y.indexOf(" ")?" ":"",p="letter"==h.wrap?"":tt,a=y.split(p),g=-1,w=-1,b=0,v=a.length-1;for(h.fallbackToLetter&&0==b&&0==v&&(p="",a=y.split(p),v=a.length-1);v>=b&&(0!=b||0!=v);){if(nt=Math.floor((b+v)/2),nt==w)break;w=nt;u(l,a.slice(0,w+1).join(p)+h.ellipsis);i(o,h)?(v=w,h.fallbackToLetter&&0==b&&0==v&&(p="",a=a[0].split(p),g=-1,w=-1,b=0,v=a.length-1)):(g=w,b=w)}return-1==g||1==a.length&&0==a[0].length?(k=t.parent(),t.detach(),d=c&&c.closest(k).length?c.length:0,k.contents().length>d?l=r(k.contents().eq(-1-d),f):(l=r(k,f,!0),d||k.detach()),l&&(y=e(s(l),h),u(l,y),d&&c&&n(l).parent().append(c))):(y=e(a.slice(0,g+1).join(p),h),u(l,y)),!0}function i(n,t){return n.innerHeight()>t.maxHeight}function e(t,i){for(;n.inArray(t.slice(-1),i.lastCharacter.remove)>-1;)t=t.slice(0,-1);return n.inArray(t.slice(-1),i.lastCharacter.noEllipsis)<0&&(t+=i.ellipsis),t}function o(n){return{width:n.innerWidth(),height:n.innerHeight()}}function u(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function s(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function h(n){do n=n.previousSibling;while(n&&1!==n.nodeType&&3!==n.nodeType);return n}function r(t,i,u){var f,e=t&&t[0];if(e){if(!u){if(3===e.nodeType)return e;if(n.trim(t.text()))return r(t.contents().last(),i)}for(f=h(e);!f;){if(t=t.parent(),t.is(i)||!t.length)return!1;f=h(t[0])}if(f)return r(n(f),i)}return!1}function p(t,i){return t?"string"==typeof t?(t=n(t,i),t.length?t:!1):t.jquery?t:!1:!1}function w(n){for(var t,r=n.innerHeight(),u=["paddingTop","paddingBottom"],i=0,f=u.length;f>i;i++)t=parseInt(n.css(u[i]),10),isNaN(t)&&(t=0),r-=t;return r}var c,l,a;n.fn.dotdotdot||(n.fn.dotdotdot=function(t){var r;if(0==this.length)return n.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(t)});r=this;r.data("dotdotdot")&&r.trigger("destroy.dot");r.data("dotdotdot-style",r.attr("style")||"");r.css("word-wrap","break-word");"nowrap"===r.css("white-space")&&r.css("white-space","normal");r.bind_events=function(){return r.bind("update.dot",function(t,o){t.preventDefault();t.stopPropagation();u.maxHeight="number"==typeof u.height?u.height:w(r);u.maxHeight+=u.tolerance;"undefined"!=typeof o&&(("string"==typeof o||o instanceof HTMLElement)&&(o=n("<div />").append(o).contents()),o instanceof n&&(h=o));s=r.wrapInner('<div class="dotdotdot" />').children();s.contents().detach().end().append(h.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,l=!1;return e.afterElement&&(c=e.afterElement.clone(!0),c.show(),e.afterElement.detach()),i(s,u)&&(l="children"==u.wrap?v(s,u,c):f(s,r,s,u,c)),s.replaceWith(s.contents()),s=null,n.isFunction(u.callback)&&u.callback.call(r[0],l,h),e.isTruncated=l,l}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],e.isTruncated),e.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],h),h}).bind("destroy.dot",function(n){n.preventDefault();n.stopPropagation();r.unwatch().unbind_events().contents().detach().end().append(h).attr("style",r.data("dotdotdot-style")||"").data("dotdotdot",!1)}),r};r.unbind_events=function(){return r.unbind(".dot"),r};r.watch=function(){if(r.unwatch(),"window"==u.watch){var t=n(window),i=t.width(),f=t.height();t.bind("resize.dot"+e.dotId,function(){i==t.width()&&f==t.height()&&u.windowResizeFix||(i=t.width(),f=t.height(),l&&clearInterval(l),l=setTimeout(function(){r.trigger("update.dot")},100))})}else a=o(r),l=setInterval(function(){if(r.is(":visible")){var n=o(r);(a.width!=n.width||a.height!=n.height)&&(r.trigger("update.dot"),a=n)}},500);return r};r.unwatch=function(){return n(window).unbind("resize.dot"+e.dotId),l&&clearInterval(l),r};var h=r.contents(),u=n.extend(!0,{},n.fn.dotdotdot.defaults,t),e={},a={},l=null,s=null;return u.lastCharacter.remove instanceof Array||(u.lastCharacter.remove=n.fn.dotdotdot.defaultArrays.lastCharacter.remove),u.lastCharacter.noEllipsis instanceof Array||(u.lastCharacter.noEllipsis=n.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),e.afterElement=p(u.after,r),e.isTruncated=!1,e.dotId=c++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),u.watch&&r.watch(),r},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},n.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},n.fn.dotdotdot.debug=function(){},c=1,l=n.fn.html,n.fn.html=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?this.trigger("update",[i]):l.apply(this,arguments)},a=n.fn.text,n.fn.text=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?(i=n("<div />").text(i).html(),this.trigger("update",[i])):a.apply(this,arguments)})}(jQuery);
/*! perfect-scrollbar - v0.4.11
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2014 Hyeonje Alex Jun; Licensed MIT */
(function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?n(require("jquery")):n(jQuery)})(function(n){"use strict";var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},i=function(){var n=0;return function(){var t=n;return n+=1,".perfect-scrollbar-"+t}}();n.fn.perfectScrollbar=function(r,u){return this.each(function(){var o=n.extend(!0,{},t),f=n(this);if("object"==typeof r?n.extend(!0,o,r):u=r,"update"===u)return f.data("perfect-scrollbar-update")&&f.data("perfect-scrollbar-update")(),f;if("destroy"===u)return f.data("perfect-scrollbar-destroy")&&f.data("perfect-scrollbar-destroy")(),f;if(f.data("perfect-scrollbar"))return f.data("perfect-scrollbar");f.addClass("ps-container");var d,g,h,c,y,nt,a,w,v,b,s=n("<div class='ps-scrollbar-x-rail'><\/div>").appendTo(f),l=n("<div class='ps-scrollbar-y-rail'><\/div>").appendTo(f),k=n("<div class='ps-scrollbar-x'><\/div>").appendTo(s),p=n("<div class='ps-scrollbar-y'><\/div>").appendTo(l),it=parseInt(s.css("bottom"),10),rt=it===it,ot=rt?null:parseInt(s.css("top"),10),tt=parseInt(l.css("right"),10),ut=tt===tt,ft=ut?null:parseInt(l.css("left"),10),st="rtl"===f.css("direction"),e=i(),at=parseInt(s.css("borderLeftWidth"),10)+parseInt(s.css("borderRightWidth"),10),vt=parseInt(s.css("borderTopWidth"),10)+parseInt(s.css("borderBottomWidth"),10),yt=function(n,t){var r=n+t,u=c-v,i;b=0>r?0:r>u?u:r;i=parseInt(b*(nt-c)/(c-v),10);f.scrollTop(i);rt?s.css({bottom:it-i}):s.css({top:ot+i})},pt=function(n,t){var r=n+t,u=h-a,i;w=0>r?0:r>u?u:r;i=parseInt(w*(y-h)/(h-a),10);f.scrollLeft(i);ut?l.css({right:tt-i}):l.css({left:ft+i})},ht=function(n){return o.minScrollbarLength&&(n=Math.max(n,o.minScrollbarLength)),o.maxScrollbarLength&&(n=Math.min(n,o.maxScrollbarLength)),n},ct=function(){var n={width:h,display:d?"inherit":"none"},t;n.left=st?f.scrollLeft()+h-y:f.scrollLeft();rt?n.bottom=it-f.scrollTop():n.top=ot+f.scrollTop();s.css(n);t={top:f.scrollTop(),height:c,display:g?"inherit":"none"};ut?t.right=st?y-f.scrollLeft()-tt-p.outerWidth():tt-f.scrollLeft():t.left=st?f.scrollLeft()+2*h-y-ft-p.outerWidth():ft+f.scrollLeft();l.css(t);k.css({left:w,width:a-at});p.css({top:b,height:v-vt});d?f.addClass("ps-active-x"):f.removeClass("ps-active-x");g?f.addClass("ps-active-y"):f.removeClass("ps-active-y")},et=function(){h=o.includePadding?f.innerWidth():f.width();c=o.includePadding?f.innerHeight():f.height();y=f.prop("scrollWidth");nt=f.prop("scrollHeight");!o.suppressScrollX&&y>h+o.scrollXMarginOffset?(d=!0,a=ht(parseInt(h*h/y,10)),w=parseInt(f.scrollLeft()*(h-a)/(y-h),10)):(d=!1,a=0,w=0,f.scrollLeft(0));!o.suppressScrollY&&nt>c+o.scrollYMarginOffset?(g=!0,v=ht(parseInt(c*c/nt,10)),b=parseInt(f.scrollTop()*(c-v)/(nt-c),10)):(g=!1,v=0,b=0,f.scrollTop(0));b>=c-v&&(b=c-v);w>=h-a&&(w=h-a);ct()},wt=function(){var t,i;k.bind("mousedown"+e,function(n){i=n.pageX;t=k.position().left;s.addClass("in-scrolling");n.stopPropagation();n.preventDefault()});n(document).bind("mousemove"+e,function(n){s.hasClass("in-scrolling")&&(pt(t,n.pageX-i),n.stopPropagation(),n.preventDefault())});n(document).bind("mouseup"+e,function(){s.hasClass("in-scrolling")&&s.removeClass("in-scrolling")});t=i=null},bt=function(){var t,i;p.bind("mousedown"+e,function(n){i=n.pageY;t=p.position().top;l.addClass("in-scrolling");n.stopPropagation();n.preventDefault()});n(document).bind("mousemove"+e,function(n){l.hasClass("in-scrolling")&&(yt(t,n.pageY-i),n.stopPropagation(),n.preventDefault())});n(document).bind("mouseup"+e,function(){l.hasClass("in-scrolling")&&l.removeClass("in-scrolling")});t=i=null},lt=function(n,t){var r=f.scrollTop(),i;if(0===n){if(!g)return!1;if(0===r&&t>0||r>=nt-c&&0>t)return!o.wheelPropagation}if(i=f.scrollLeft(),0===t){if(!d)return!1;if(0===i&&0>n||i>=y-h&&n>0)return!o.wheelPropagation}return!0},kt=function(){o.wheelSpeed/=10;var n=!1;f.bind("mousewheel"+e,function(t,i,r,u){var e=t.deltaX*t.deltaFactor||r,s=t.deltaY*t.deltaFactor||u;n=!1;o.useBothWheelAxes?g&&!d?(s?f.scrollTop(f.scrollTop()-s*o.wheelSpeed):f.scrollTop(f.scrollTop()+e*o.wheelSpeed),n=!0):d&&!g&&(e?f.scrollLeft(f.scrollLeft()+e*o.wheelSpeed):f.scrollLeft(f.scrollLeft()-s*o.wheelSpeed),n=!0):(f.scrollTop(f.scrollTop()-s*o.wheelSpeed),f.scrollLeft(f.scrollLeft()+e*o.wheelSpeed));et();n=n||lt(e,s);n&&(t.stopPropagation(),t.preventDefault())});f.bind("MozMousePixelScroll"+e,function(t){n&&t.preventDefault()})},dt=function(){var t=!1,i;f.bind("mouseenter"+e,function(){t=!0});f.bind("mouseleave"+e,function(){t=!1});i=!1;n(document).bind("keydown"+e,function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||!t||n(document.activeElement).is(":input,[contenteditable]"))){var e=0,u=0;switch(r.which){case 37:e=-30;break;case 38:u=30;break;case 39:e=30;break;case 40:u=-30;break;case 33:u=90;break;case 32:case 34:u=-90;break;case 35:u=-c;break;case 36:u=c;break;default:return}f.scrollTop(f.scrollTop()-u);f.scrollLeft(f.scrollLeft()+e);i=lt(e,u);i&&r.preventDefault()}})},gt=function(){var n=function(n){n.stopPropagation()};p.bind("click"+e,n);l.bind("click"+e,function(n){var i=parseInt(v/2,10),r=n.pageY-l.offset().top-i,u=c-v,t=r/u;0>t?t=0:t>1&&(t=1);f.scrollTop((nt-c)*t)});k.bind("click"+e,n);s.bind("click"+e,function(n){var i=parseInt(a/2,10),r=n.pageX-s.offset().left-i,u=h-a,t=r/u;0>t?t=0:t>1&&(t=1);f.scrollLeft((y-h)*t)})},ni=function(){var s=function(n,t){f.scrollTop(f.scrollTop()-t);f.scrollLeft(f.scrollLeft()-n);et()},i={},u=0,t={},r=null,o=!1;n(window).bind("touchstart"+e,function(){o=!0});n(window).bind("touchend"+e,function(){o=!1});f.bind("touchstart"+e,function(n){var t=n.originalEvent.targetTouches[0];i.pageX=t.pageX;i.pageY=t.pageY;u=(new Date).getTime();null!==r&&clearInterval(r);n.stopPropagation()});f.bind("touchmove"+e,function(n){var e,r,h,c,l,f;o||1!==n.originalEvent.targetTouches.length||(e=n.originalEvent.targetTouches[0],r={},r.pageX=e.pageX,r.pageY=e.pageY,h=r.pageX-i.pageX,c=r.pageY-i.pageY,s(h,c),i=r,l=(new Date).getTime(),f=l-u,f>0&&(t.x=h/f,t.y=c/f,u=l),n.preventDefault())});f.bind("touchend"+e,function(){clearInterval(r);r=setInterval(function(){return.01>Math.abs(t.x)&&.01>Math.abs(t.y)?(clearInterval(r),void 0):(s(30*t.x,30*t.y),t.x*=.8,t.y*=.8,void 0)},10)})},ti=function(){f.bind("scroll"+e,function(){et()})},ii=function(){f.unbind(e);n(window).unbind(e);n(document).unbind(e);f.data("perfect-scrollbar",null);f.data("perfect-scrollbar-update",null);f.data("perfect-scrollbar-destroy",null);k.remove();p.remove();s.remove();l.remove();s=l=k=p=d=g=h=c=y=nt=a=w=it=rt=ot=v=b=tt=ut=ft=st=e=null},ri=function(t){f.addClass("ie").addClass("ie"+t);var i=function(){var t=function(){n(this).addClass("hover")},i=function(){n(this).removeClass("hover")};f.bind("mouseenter"+e,t).bind("mouseleave"+e,i);s.bind("mouseenter"+e,t).bind("mouseleave"+e,i);l.bind("mouseenter"+e,t).bind("mouseleave"+e,i);k.bind("mouseenter"+e,t).bind("mouseleave"+e,i);p.bind("mouseenter"+e,t).bind("mouseleave"+e,i)},r=function(){ct=function(){var t={left:w+f.scrollLeft(),width:a},n;rt?t.bottom=it:t.top=ot;k.css(t);n={top:b+f.scrollTop(),height:v};ut?n.right=tt:n.left=ft;p.css(n);k.hide().show();p.hide().show()}};6===t&&(i(),r())},ui="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,fi=function(){var n=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);n&&"msie"===n[1]&&ri(parseInt(n[2],10));et();ti();wt();bt();gt();ui&&ni();f.mousewheel&&kt();o.useKeyboard&&dt();f.data("perfect-scrollbar",f);f.data("perfect-scrollbar-update",et);f.data("perfect-scrollbar-destroy",ii)};return fi(),f})}}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(n){function u(i){var r=i||window.event,y=c.call(arguments,1),s=0,e=0,u=0,l=0,a,v;if(i=n.event.fix(r),i.type="mousewheel","detail"in r&&(u=-1*r.detail),"wheelDelta"in r&&(u=r.wheelDelta),"wheelDeltaY"in r&&(u=r.wheelDeltaY),"wheelDeltaX"in r&&(e=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(e=-1*u,u=0),s=0===u?e:u,"deltaY"in r&&(u=-1*r.deltaY,s=u),"deltaX"in r&&(e=r.deltaX,0===u&&(s=-1*e)),0!==u||0!==e)return 1===r.deltaMode?(a=n.data(this,"mousewheel-line-height"),s*=a,u*=a,e*=a):2===r.deltaMode&&(v=n.data(this,"mousewheel-page-height"),s*=v,u*=v,e*=v),l=Math.max(Math.abs(u),Math.abs(e)),(!t||t>l)&&(t=l,o(r,l)&&(t/=40)),o(r,l)&&(s/=40,e/=40,u/=40),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),u=Math[u>=1?"floor":"ceil"](u/t),i.deltaX=e,i.deltaY=u,i.deltaFactor=t,i.deltaMode=0,y.unshift(i,s,e,u),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,y)}function h(){t=null}function o(n,t){return r.settings.adjustOldDeltas&&"mousewheel"===n.type&&0==t%120}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,r;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;r=n.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",r.getLineHeight(this));n.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=i.length;n;)this.removeEventListener(i[--n],u,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(n(t)["offsetParent"in n.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})});jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,i,r,u){return jQuery.easing[jQuery.easing.def](n,t,i,r,u)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return t==0?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(-Math.pow(2,-10*t/u)+1)+i},easeInOutExpo:function(n,t,i,r,u){return t==0?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f))+i)},easeOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin((t*u-o)*2*Math.PI/f)+r+i)},easeInOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u/2)==2?i+r:(f||(f=u*.3*1.5),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),t<1)?-.5*e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)+i:e*Math.pow(2,-10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)*.5+r+i},easeInBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*(t/=u)*t*((f+1)*t-f)+i},easeOutBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInOutBack:function(n,t,i,r,u,f){return(f==undefined&&(f=1.70158),(t/=u/2)<1)?r/2*t*t*(((f*=1.525)+1)*t-f)+i:r/2*((t-=2)*t*(((f*=1.525)+1)*t+f)+2)+i},easeInBounce:function(n,t,i,r,u){return r-jQuery.easing.easeOutBounce(n,u-t,0,r,u)+i},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,t,i,r,u){return t<u/2?jQuery.easing.easeInBounce(n,t*2,0,r,u)*.5+i:jQuery.easing.easeOutBounce(n,t*2-u,0,r,u)*.5+r*.5+i}});
/*!
 * jQuery toDictionary() plugin
 *
 * Version 1.2 (11 Apr 2011)
 *
 * Copyright (c) 2011 Robert Koritnik
 * Licensed under the terms of the MIT license
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(n){n.isFunction(String.prototype.formatForDictionary)===!1&&(String.prototype.formatForDictionary=function(){for(var n=this,t=arguments.length;t--;)n=n.replace(new RegExp("\\{"+t+"\\}","gim"),arguments[t]);return n});n.isFunction(Date.prototype.toISOString)===!1&&(Date.prototype.toISOString=function(){var t=function(n,t){n=n.toString();for(var i=n.length;i<t;i++)n="0"+n;return n},n=this;return"{0}-{1}-{2}T{3}:{4}:{5}.{6}Z".formatForDictionary(n.getUTCFullYear(),t(n.getUTCMonth()+1,2),t(n.getUTCDate(),2),t(n.getUTCHours(),2),t(n.getUTCMinutes(),2),t(n.getUTCSeconds(),2),t(n.getUTCMilliseconds(),3))});var t=function(i,r,u,f){var e,o;if(n.isPlainObject(i))for(e in i)(f===!0||typeof i[e]!="undefined"&&i[e]!==null)&&t(i[e],r,u.length>0?u+"."+e:e,f);else{if(n.isArray(i)){n.each(i,function(n,i){t(i,r,"{0}[{1}]".formatForDictionary(u,n))});return}if(!n.isFunction(i))if(i instanceof Date)r.push({name:u,value:i.toISOString()});else{o=typeof i;switch(o){case"boolean":case"number":o=i;break;case"object":if(f!==!0)return;default:o=i||""}r.push({name:u,value:o})}}};n.extend({toDictionary:function(i,r,u){i=n.isFunction(i)?i.call():i;arguments.length===2&&typeof r=="boolean"&&(u=r,r="");u=typeof u=="boolean"?u:!1;var f=[];return t(i,f,r||"",u),f}})})(jQuery);
/*!
 * Select2 4.0.0
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n){var t=function(){var t;n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),function(){if(!t||!t.requirejs){t?i=t:t={};
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var n,i,r;(function(t){function e(n,t){return k.call(n,t)}function l(n,t){var o,s,u,e,h,y,c,b,i,l,w,r=t&&t.split("/"),a=f.map,v=a&&a["*"]||{};if(n&&n.charAt(0)===".")if(t){for(r=r.slice(0,r.length-1),n=n.split("/"),h=n.length-1,f.nodeIdCompat&&p.test(n[h])&&(n[h]=n[h].replace(p,"")),n=r.concat(n),i=0;i<n.length;i+=1)if(w=n[i],w===".")n.splice(i,1),i-=1;else if(w==="..")if(i===1&&(n[2]===".."||n[0]===".."))break;else i>0&&(n.splice(i-1,2),i-=2);n=n.join("/")}else n.indexOf("./")===0&&(n=n.substring(2));if((r||v)&&a){for(o=n.split("/"),i=o.length;i>0;i-=1){if(s=o.slice(0,i).join("/"),r)for(l=r.length;l>0;l-=1)if(u=a[r.slice(0,l).join("/")],u&&(u=u[s],u)){e=u;y=i;break}if(e)break;!c&&v&&v[s]&&(c=v[s],b=i)}!e&&c&&(e=c,y=b);e&&(o.splice(0,y,e),n=o.join("/"))}return n}function w(n,i){return function(){return o.apply(t,d.call(arguments,0).concat([n,i]))}}function g(n){return function(t){return l(t,n)}}function nt(n){return function(t){u[n]=t}}function a(n){if(e(h,n)){var i=h[n];delete h[n];y[n]=!0;c.apply(t,i)}if(!e(u,n)&&!e(y,n))throw new Error("No "+n);return u[n]}function b(n){var i,t=n?n.indexOf("!"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function tt(n){return function(){return f&&f.config&&f.config[n]||{}}}var c,o,v,s,u={},h={},f={},y={},k=Object.prototype.hasOwnProperty,d=[].slice,p=/\.js$/;v=function(n,t){var r,u=b(n),i=u[0];return n=u[1],i&&(i=l(i,t),r=a(i)),i?n=r&&r.normalize?r.normalize(n,g(t)):l(n,t):(n=l(n,t),u=b(n),i=u[0],n=u[1],i&&(r=a(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}};s={require:function(n){return w(n)},exports:function(n){var t=u[n];return typeof t!="undefined"?t:u[n]={}},module:function(n){return{id:n,uri:"",exports:u[n],config:tt(n)}}};c=function(n,i,r,f){var p,o,k,b,c,l=[],d=typeof r,g;if(f=f||n,d==="undefined"||d==="function"){for(i=!i.length&&r.length?["require","exports","module"]:i,c=0;c<i.length;c+=1)if(b=v(i[c],f),o=b.f,o==="require")l[c]=s.require(n);else if(o==="exports")l[c]=s.exports(n),g=!0;else if(o==="module")p=l[c]=s.module(n);else if(e(u,o)||e(h,o)||e(y,o))l[c]=a(o);else if(b.p)b.p.load(b.n,w(f,!0),nt(o),{}),l[c]=u[o];else throw new Error(n+" missing "+o);k=r?r.apply(u[n],l):undefined;n&&(p&&p.exports!==t&&p.exports!==u[n]?u[n]=p.exports:k===t&&g||(u[n]=k))}else n&&(u[n]=r)};n=i=o=function(n,i,r,u,e){if(typeof n=="string")return s[n]?s[n](i):a(v(n,i).f);if(!n.splice){if(f=n,f.deps&&o(f.deps,f.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},typeof r=="function"&&(r=u,u=e),u?c(t,n,i,r):setTimeout(function(){c(t,n,i,r)},4),o};o.config=function(n){return o(n)};n._defined=u;r=function(n,t,i){t.splice||(i=t,t=[]);e(u,n)||e(h,n)||(h[n]=[n,t,i])};r.amd={jQuery:!0}})();t.requirejs=n;t.require=i;t.define=r}}();t.define("almond",function(){});t.define("jquery",[],function(){var t=n||$;return t==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t});t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[],t,u;for(t in i)(u=i[t],typeof u=="function")&&t!=="constructor"&&r.push(t);return r}var t={},i;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty;for(var i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;u>0&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function l(){this.constructor=i}var s=r(t),h=r(n),u,e,c,f,o;for(t.displayName=n.displayName,i.prototype=new l,u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(c=function(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){var n=Array.prototype.unshift;return n.call(arguments,r),u.apply(this,arguments)}},f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i=function(){this.listeners={}},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var t=Array.prototype.slice;this.listeners=this.listeners||{};n in this.listeners&&this.invoke(this.listeners[n],t.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var r,t="",i=0;i<n;i++)r=Math.floor(Math.random()*36),t+=r.toString(36);return t},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,r.length!==1){for(u=0;u<r.length;u++)t=r[u],t=t.substring(0,1).toLowerCase()+t.substring(1),t in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return f===r&&(r==="hidden"||r==="visible")?!1:f==="scroll"||r==="scroll"?!0:u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof n!="string"?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.appendMany=function(t,i){if(n.fn.jquery.substr(0,3)==="1.7"){var r=n();n.map(i,function(n){r=r.add(n)});i=r}t.append(i)},t});t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="tree"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="treeitem" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));this.$results.append(i)},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],n.results==null||n.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)},i.prototype.position=function(n,t){var i=t.find(".select2-results");i.append(n)},i.prototype.sort=function(n){var t=this.options.get("sorter");return t(n)},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var f=n.map(i,function(n){return n.id.toString()}),r=t.$results.find(".select2-results__option[aria-selected]"),u;r.each(function(){var i=n(this),t=n.data(this,"data"),r=""+t.id;t.element!=null&&t.element.selected||t.element==null&&n.inArray(r,f)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")});u=r.filter("[aria-selected=true]");u.length>0?u.first().trigger("mouseenter"):r.first().trigger("mouseenter")})},i.prototype.showLoading=function(n){this.hideLoading();var i=this.options.get("translations").get("searching"),r={disabled:!0,loading:!0,text:i(n)},t=this.option(r);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var r=document.createElement("li"),i,e,c,o,u,v,s,f,l,a,h;r.className="select2-results__option";i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true");t.id==null&&delete i["aria-selected"];t._resultId!=null&&(r.id=t._resultId);t.title&&(r.title=t.title);t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(e in i)c=i[e],r.setAttribute(e,c);if(t.children){for(o=n(r),u=document.createElement("strong"),u.className="select2-results__group",v=n(u),this.template(t,u),s=[],f=0;f<t.children.length;f++)l=t.children[f],a=this.option(l),s.push(a);h=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(s);o.append(u);o.append(h)}else this.template(t,r);return n.data(r,"data",t),r},i.prototype.bind=function(t){var i=this,r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(n){i.clear();i.append(n.data);t.isOpen()&&i.setClasses()});t.on("results:append",function(n){i.append(n.data);t.isOpen()&&i.setClasses()});t.on("query",function(n){i.showLoading(n)});t.on("select",function(){t.isOpen()&&i.setClasses()});t.on("unselect",function(){t.isOpen()&&i.setClasses()});t.on("open",function(){i.$results.attr("aria-expanded","true");i.$results.attr("aria-hidden","false");i.setClasses();i.ensureHighlightVisible()});t.on("close",function(){i.$results.attr("aria-expanded","false");i.$results.attr("aria-hidden","true");i.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var n=i.getHighlightedResults();n.length!==0&&n.trigger("mouseup")});t.on("results:select",function(){var n=i.getHighlightedResults(),t;n.length!==0&&(t=n.data("data"),n.attr("aria-selected")=="true"?i.trigger("close"):i.trigger("select",{data:t}))});t.on("results:previous",function(){var r=i.getHighlightedResults(),u=i.$results.find("[aria-selected]"),f=u.index(r),n,t;if(f!==0){n=f-1;r.length===0&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=i.$results.offset().top,o=t.offset().top,s=i.$results.scrollTop()+(o-e);n===0?i.$results.scrollTop(0):o-e<0&&i.$results.scrollTop(s)}});t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),o=t.index(e),r=o+1,n;if(!(r>=t.length)){n=t.eq(r);n.trigger("mouseenter");var u=i.$results.offset().top+i.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),s=i.$results.scrollTop()+f-u;r===0?i.$results.scrollTop(0):f>u&&i.$results.scrollTop(s)}});t.on("results:focus",function(n){n.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(n){i.displayMessage(n)});if(n.fn.mousewheel)this.$results.on("mousewheel",function(n){var t=i.$results.scrollTop(),r=i.$results.get(0).scrollHeight-i.$results.scrollTop()+n.deltaY,u=n.deltaY>0&&t-n.deltaY<=0,f=n.deltaY<0&&r<=i.$results.height();u?(i.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var r=n(this),u=r.data("data");if(r.attr("aria-selected")==="true"){i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:u}):i.trigger("close");return}i.trigger("select",{originalEvent:t,data:u})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=n(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted");i.trigger("results:focus",{data:t,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(n.length!==0){var f=this.$results.find("[aria-selected]"),e=f.index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=n.outerHeight(!1)*2;e<=2?this.$results.scrollTop(0):(u>this.$results.outerHeight()||u<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t);r==null?i.style.display="none":typeof r=="string"?i.innerHTML=f(r):n(i).append(r)},i});t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}});t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=n('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,this.$element.data("old-tabindex")!=null?this._tabindex=this.$element.data("old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(n){var t=this,u=n.id+"-container",r=n.id+"-results";this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t.trigger("blur",n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.focus();t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)});n.on("disable",function(){t.$selection.attr("tabindex","-1")})},r.prototype._attachCloseHandler=function(t){var i=this;n(document.body).on("mousedown.select2."+t.id,function(t){var i=n(t.target),r=i.closest(".select2"),u=n(".select2.select2-container--open");u.each(function(){var i=n(this),t;this!=r[0]&&(t=i.data("element"),t.select2("close"))})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){var i=t.find(".selection");i.append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var i=this,t;r.__super__.bind.apply(this,arguments);t=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",t);this.$selection.attr("aria-labelledby",t);this.$selection.on("mousedown",function(n){n.which===1&&i.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("selection:update",function(n){i.update(n.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){if(n.length===0){this.clear();return}var t=n[0],r=this.display(t),i=this.$selection.find(".select2-selection__rendered");i.empty().append(r);i.prop("title",t.title||t.text)},r});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(){var t=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(n){t.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(i){var r=n(this),u=r.parent(),f=u.data("data");t.trigger("unselect",{originalEvent:i,data:f})})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n){var t=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(t(n))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},r.prototype.update=function(n){var f,t,e;if(this.clear(),n.length!==0){for(f=[],t=0;t<n.length;t++){var r=n[t],o=this.display(r),u=this.selectionContainer();u.append(o);u.prop("title",r.title||r.text);u.data("data",r);f.push(u)}e=this.$selection.find(".select2-selection__rendered");i.appendMany(e,f)}},r});t.define("select2/selection/placeholder",["../utils"],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return typeof t=="string"&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=t.length==1&&t[0].id!=this.placeholder.id,u=t.length>1,i;if(u||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n});t.define("select2/selection/allowClear",["jquery","../keys"],function(n,t){function i(){}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},i.prototype._handleClear=function(n,t){var r,u,i,f;if(!this.options.get("disabled")&&(r=this.$selection.find(".select2-selection__clear"),r.length!==0)){for(t.stopPropagation(),u=r.data("data"),i=0;i<u.length;i++)if(f={data:u[i]},this.trigger("unselect",f),f.prevented)return;this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle")}},i.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0)&&i.length!==0){var r=n('<span class="select2-selection__clear">&times;<\/span>');r.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(r)}},i});t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var i=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/li>');return this.$searchContainer=i,this.$search=i.find("input"),t.call(this)},r.prototype.bind=function(n,t,r){var u=this;n.call(this,t,r);t.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus()});t.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("");u.$search.focus()});t.on("enable",function(){u.$search.prop("disabled",!1)});t.on("disable",function(){u.$search.prop("disabled",!0)});this.$selection.on("focusin",".select2-search--inline",function(n){u.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){u.trigger("blur",n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,t,f;n.stopPropagation();u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented();r=n.which;r===i.BACKSPACE&&u.$search.val()===""&&(t=u.$searchContainer.prev(".select2-selection__choice"),t.length>0&&(f=t.data("data"),u.searchRemoveChoice(f),n.preventDefault()))});this.$selection.on("input",".select2-search--inline",function(){u.$selection.off("keyup.search")});this.$selection.on("keyup.search input",".select2-search--inline",function(n){u.handleSearch(n)})},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){this.$search.attr("placeholder","");n.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.trigger("open");this.$search.val(t.text+" ")},r.prototype.resizeSearch=function(){var n,t;this.$search.css("width","25px");n="";this.$search.attr("placeholder")!==""?n=this.$selection.find(".select2-selection__rendered").innerWidth():(t=this.$search.val().length+1,n=t*.75+"em");this.$search.css("width",n)},r});t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],e=["opening","closing","selecting","unselecting"];t.call(this,i,r);i.on("*",function(t,i){if(n.inArray(t,f)!==-1){i=i||{};var r=n.Event("select2:"+t,{params:i});(u.$element.trigger(r),n.inArray(t,e)!==-1)&&(i.prevented=r.isDefaultPrevented())}})},t});t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i});t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}});t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+(i.id!=null?"-"+i.id.toString():"-"+n.generateChars(4))},t});t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=[],r=this;this.$element.find(":selected").each(function(){var n=i(this),u=r.item(n);t.push(u)});n(t)},r.prototype.select=function(n){var t=this,r;if(n.selected=!0,i(n.element).is("option")){n.element.selected=!0;this.$element.trigger("change");return}this.$element.prop("multiple")?this.current(function(r){var f=[],u,e;for(n=[n],n.push.apply(n,r),u=0;u<n.length;u++)e=n[u].id,i.inArray(e,f)===-1&&f.push(e);t.$element.val(f);t.$element.trigger("change")}):(r=n.id,this.$element.val(r),this.$element.trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple")){if(n.selected=!1,i(n.element).is("option")){n.element.selected=!1;this.$element.trigger("change");return}this.current(function(r){for(var u,f=[],e=0;e<r.length;e++)u=r[e].id,u!==n.id&&i.inArray(u,f)===-1&&f.push(u);t.$element.val(f);t.$element.trigger("change")})}},r.prototype.bind=function(n){var t=this;this.container=n;n.on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},r.prototype.query=function(n,t){var r=[],u=this,f=this.$element.children();f.each(function(){var t=i(this),e,f;(t.is("option")||t.is("optgroup"))&&(e=u.item(t),f=u.matches(n,e),f!==null&&r.push(f))});t({results:r})},r.prototype.addOptions=function(n){t.appendMany(this.$element,n)},r.prototype.option=function(n){var t,u,r;return n.children?(t=document.createElement("optgroup"),t.label=n.text):(t=document.createElement("option"),t.textContent!==undefined?t.textContent=n.text:t.innerText=n.text),n.id&&(t.value=n.id),n.disabled&&(t.disabled=!0),n.selected&&(t.selected=!0),n.title&&(t.title=n.title),u=i(t),r=this._normalizeItem(n),r.element=t,i.data(t,"data",r),u},r.prototype.item=function(n){var t={},u,f,r,e,o;if(t=i.data(n[0],"data"),t!=null)return t;if(n.is("option"))t={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if(n.is("optgroup")){for(t={text:n.prop("label"),children:[],title:n.prop("title")},u=n.children("option"),f=[],r=0;r<u.length;r++)e=i(u[r]),o=this.item(e),f.push(o);t.children=f}return t=this._normalizeItem(t),t.element=n[0],i.data(n[0],"data",t),t},r.prototype._normalizeItem=function(n){i.isPlainObject(n)||(n={id:n,text:n});n=i.extend({},{text:""},n);return n.id!=null&&(n.id=n.id.toString()),n.text!=null&&(n.text=n.text.toString()),n._resultId==null&&n.id&&this.container!=null&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){var i=this.options.get("matcher");return i(n,t)},r});t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){var i=t.get("data")||[];r.__super__.constructor.call(this,n,t);this.addOptions(this.convertToOptions(i))}return t.Extend(r,n),r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});t.length===0&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function v(n){return function(){return i(this).val()==n.id}}for(var r,f,c,l=this,e=this.$element.find("option"),a=e.map(function(){return l.item(i(this)).id}).get(),o=[],u=0;u<n.length;u++){if(r=this._normalizeItem(n[u]),i.inArray(r.id,a)>=0){var s=e.filter(v(r)),h=this.item(s),p=i.extend(!0,{},h,r),y=this.option(h);s.replaceWith(y);continue}f=this.option(r);r.children&&(c=this.convertToOptions(r.children),t.appendMany(f,c));o.push(f)}return o},r});t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(t,i){this.ajaxOptions=this._applyDefaults(i.get("ajax"));this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults);n.__super__.constructor.call(this,t,i)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return{q:n.term}},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var f=r.transport(r,function(r){var f=u.processResults(r,n);u.options.get("debug")&&window.console&&console.error&&(f&&f.results&&i.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(f)},function(){});u._request=f}var u=this,r;this._request!=null&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);typeof r.url=="function"&&(r.url=r.url(n));typeof r.data=="function"&&(r.data=r.data(n));this.ajaxOptions.delay&&n.term!==""?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r});t.define("select2/data/tags",["jquery"],function(n){function t(t,i,r){var f=r.get("tags"),e=r.get("createTag"),u;if(e!==undefined&&(this.createTag=e),t.call(this,i,r),n.isArray(f))for(u=0;u<f.length;u++){var o=f[u],s=this._normalizeItem(o),h=this.option(s);this.$element.append(h)}}return t.prototype.query=function(n,t,i){function u(n,f){for(var o,c,e=n.results,s=0;s<e.length;s++){var h=e[s],l=h.children!=null&&!u({results:h.children},!0),a=h.text===t.term;if(a||l){if(f)return!1;n.data=e;i(n);return}}if(f)return!0;o=r.createTag(t);o!=null&&(c=r.option(o),c.attr("data-select2-tag",!0),r.addOptions([c]),r.insertTag(e,o));n.results=e;i(n)}var r=this;if(this._removeOldTags(),t.term==null||t.page!=null){n.call(this,t,i);return}n.call(this,t,u)},t.prototype.createTag=function(t,i){var r=n.trim(i.term);return r===""?null:{id:r,text:r}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){var i=this._lastTag,t=this.$element.find("option[data-select2-tag]");t.each(function(){this.selected||n(this).remove()})},t});t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");r!==undefined&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(n,t,i){function f(n){u.select(n)}var u=this,r;t.term=t.term||"";r=this.tokenizer(t,this.options,f);r.term!==t.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),t.term=r.term);n.call(this,t,i)},t.prototype.tokenizer=function(t,i,r,u){for(var s=r.get("tokenSeparators")||[],f=i.term,e=0,h=this.createTag||function(n){return{id:n.term,text:n.term}},o;e<f.length;){if(o=f[e],n.inArray(o,s)===-1){e++;continue}var c=f.substr(0,e),l=n.extend({},i,{term:c}),a=h(l);u(a);f=f.substr(e+1)||"";e=0}return{term:f}},t});t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){if(t.term=t.term||"",t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}n.call(this,t,i)},n});t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){if(t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}n.call(this,t,i)},n});t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){var r=this;this.current(function(u){var f=u!=null?u.length:0;if(r.maximumSelectionLength>0&&f>=r.maximumSelectionLength){r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}});return}n.call(r,t,i)})},n});t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i});t.define("select2/dropdown/search",["jquery","../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus();window.setTimeout(function(){u.$search.focus()},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("")});i.on("results:all",function(n){if(n.query.term==null||n.query.term===""){var t=u.showSearch(n);t?u.$searchContainer.removeClass("select2-search--hide"):u.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t});t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return typeof t=="string"&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var u,r=t.slice(0),i=t.length-1;i>=0;i--)u=t[i],this.placeholder.id===u.id&&r.splice(i,1);return r},n});t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);i.on("query",function(n){u.lastParams=n;u.loading=!0});i.on("query:append",function(n){u.lastParams=n;u.loading=!0});this.$results.on("scroll",function(){var r=n.contains(document.documentElement,u.$loadingMore[0]),t,i;!u.loading&&r&&(t=u.$results.offset().top+u.$results.outerHeight(!1),i=u.$loadingMore.offset().top+u.$loadingMore.outerHeight(!1),t+50>=i&&u.loadMore())})},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="option load-more" role="treeitem"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(n,t,i){this.$dropdownParent=i.get("dropdownParent")||document.body;n.call(this,t,i)}return i.prototype.bind=function(n,t,i){var r=this,u=!1;n.call(this,t,i);t.on("open",function(){if(r._showDropdown(),r._attachPositioningHandler(t),!u){u=!0;t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()})}});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var r=this,u="scroll.select2."+i.id,e="resize.select2."+i.id,o="orientationchange.select2."+i.id,f=this.$container.parents().filter(t.hasScroll);f.each(function(){n(this).data("select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});f.on(u,function(){var t=n(this).data("select2-scroll-position");n(this).scrollTop(t.y)});n(window).on(u+" "+e+" "+o,function(){r._positionDropdown();r._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var r="scroll.select2."+i.id,u="resize.select2."+i.id,f="orientationchange.select2."+i.id,e=this.$container.parents().filter(t.hasScroll);e.off(r);n(window).off(r+" "+u+" "+f)},i.prototype._positionDropdown=function(){var f=n(window),u=this.$dropdown.hasClass("select2-dropdown--above"),l=this.$dropdown.hasClass("select2-dropdown--below"),t=null,a=this.$container.position(),i=this.$container.offset(),r;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var e={height:this.$dropdown.outerHeight(!1)},o={top:f.scrollTop(),bottom:f.scrollTop()+f.height()},s=o.top<i.top-e.height,h=o.bottom>i.bottom+e.height,c={left:i.left,top:r.bottom};u||l||(t="below");h||!s||u?!s&&h&&u&&(t="below"):t="above";(t=="above"||u&&t!=="below")&&(c.top=r.top-e.height);t!=null&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+t),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+t));this.$dropdownContainer.css(c)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(t){for(var u,i=0,r=0;r<t.length;r++)u=t[r],u.children?i+=n(u.children):i++;return i}function t(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity);n.call(this,t,i,r)}return t.prototype.showSearch=function(t,i){return n(i.data.results)<this.minimumResultsForSearch?!1:t.call(this,i)},t});t.define("select2/dropdown/selectOnClose",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(){r._handleSelectOnClose()})},n.prototype._handleSelectOnClose=function(){var n=this.getHighlightedResults();n.length<1||this.trigger("select",{data:n.data("data")})},n});t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close")},n});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return t!=1&&(i+="s"),i},inputTooShort:function(n){var t=n.minimum-n.input.length;return"Please enter "+t+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return n.maximum!=1&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}});t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}st.prototype.apply=function(l){var vt,yt,pt,wt,bt,kt,dt,ct,lt,st,ot,ht,gt,at;if(l=n.extend({},this.defaults,l),l.dataAdapter==null&&(l.dataAdapter=l.ajax!=null?y:l.data!=null?v:a,l.minimumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,b)),l.maximumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,k)),l.maximumSelectionLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,d)),l.tags&&(l.dataAdapter=h.Decorate(l.dataAdapter,p)),(l.tokenSeparators!=null||l.tokenizer!=null)&&(l.dataAdapter=h.Decorate(l.dataAdapter,w)),l.query!=null&&(vt=t(l.amdBase+"compat/query"),l.dataAdapter=h.Decorate(l.dataAdapter,vt)),l.initSelection!=null&&(yt=t(l.amdBase+"compat/initSelection"),l.dataAdapter=h.Decorate(l.dataAdapter,yt))),l.resultsAdapter==null&&(l.resultsAdapter=i,l.ajax!=null&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,it)),l.placeholder!=null&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,tt)),l.selectOnClose&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,ft))),l.dropdownAdapter==null&&(l.multiple?l.dropdownAdapter=g:(pt=h.Decorate(g,nt),l.dropdownAdapter=pt),l.minimumResultsForSearch!==0&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,ut)),l.closeOnSelect&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,et)),(l.dropdownCssClass!=null||l.dropdownCss!=null||l.adaptDropdownCssClass!=null)&&(wt=t(l.amdBase+"compat/dropdownCss"),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,wt)),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,rt)),l.selectionAdapter==null&&(l.selectionAdapter=l.multiple?u:r,l.placeholder!=null&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,e)),l.multiple&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,o)),(l.containerCssClass!=null||l.containerCss!=null||l.adaptContainerCssClass!=null)&&(bt=t(l.amdBase+"compat/containerCss"),l.selectionAdapter=h.Decorate(l.selectionAdapter,bt)),l.selectionAdapter=h.Decorate(l.selectionAdapter,s)),typeof l.language=="string"&&(l.language.indexOf("-")>0?(kt=l.language.split("-"),dt=kt[0],l.language=[l.language,dt]):l.language=[l.language]),n.isArray(l.language)){for(ct=new c,l.language.push("en"),lt=l.language,st=0;st<lt.length;st++){ot=lt[st];ht={};try{ht=c.loadPath(ot)}catch(ni){try{ot=this.defaults.amdLanguageBase+ot;ht=c.loadPath(ot)}catch(ti){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+ot+'" could not be automatically loaded. A fallback will be used instead.');continue}}ct.extend(ht)}l.translations=ct}else gt=c.loadPath(this.defaults.amdLanguageBase+"en"),at=new c(l.language),at.extend(gt),l.translations=at;return l};st.prototype.reset=function(){function i(n){function t(n){return l[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function t(r,u){var f,e,o,s,h,c;if(n.trim(r.term)==="")return u;if(u.children&&u.children.length>0){for(f=n.extend(!0,{},u),e=u.children.length-1;e>=0;e--)o=u.children[e],s=t(r,o),s==null&&f.children.splice(e,1);return f.children.length>0?f:t(r,f)}return(h=i(u.text).toUpperCase(),c=i(r.term).toUpperCase(),h.indexOf(c)>-1)?u:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:ot,matcher:t,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}};st.prototype.set=function(t,i){var f=n.camelCase(t),r={},u;r[f]=i;u=h._convertData(r);n.extend(this.defaults,u)};return new st});t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,t,i,r){function u(t,u){if(this.options=t,u!=null&&this.fromElement(u),this.options=i.apply(this.options),u&&u.is("input")){var f=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,f)}}return u.prototype.fromElement=function(n){var e=["select2"],f,u,i;this.options.multiple==null&&(this.options.multiple=n.prop("multiple"));this.options.disabled==null&&(this.options.disabled=n.prop("disabled"));this.options.language==null&&(n.prop("lang")?this.options.language=n.prop("lang").toLowerCase():n.closest("[lang]").prop("lang")&&(this.options.language=n.closest("[lang]").prop("lang")));this.options.dir==null&&(this.options.dir=n.prop("dir")?n.prop("dir"):n.closest("[dir]").prop("dir")?n.closest("[dir]").prop("dir"):"ltr");n.prop("disabled",this.options.disabled);n.prop("multiple",this.options.multiple);n.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.data("data",n.data("select2Tags")),n.data("tags",!0));n.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),n.attr("ajax--url",n.data("ajaxUrl")),n.data("ajax--url",n.data("ajaxUrl")));f={};f=t.fn.jquery&&t.fn.jquery.substr(0,2)=="1."&&n[0].dataset?t.extend(!0,{},n[0].dataset,n.data()):n.data();u=t.extend(!0,{},f);u=r._convertData(u);for(i in u)t.inArray(i,e)>-1||(t.isPlainObject(this.options[i])?t.extend(this.options[i],u[i]):this.options[i]=u[i]);return this},u.prototype.get=function(n){return this.options[n]},u.prototype.set=function(n,t){this.options[n]=t},u});t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,i){var f,e,r,o,s,h,c;n.data("select2")!=null&&n.data("select2").destroy();this.$element=n;this.id=this._generateId(n);i=i||{};this.options=new t(i,n);u.__super__.constructor.call(this);f=n.attr("tabindex")||0;n.data("old-tabindex",f);n.attr("tabindex","-1");e=this.options.get("dataAdapter");this.dataAdapter=new e(n,this.options);r=this.render();this._placeContainer(r);o=this.options.get("selectionAdapter");this.selection=new o(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);s=this.options.get("dropdownAdapter");this.dropdown=new s(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);h=this.options.get("resultsAdapter");this.results=new h(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);c=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){c.trigger("selection:update",{data:n})});n.addClass("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){var t="";return t=n.attr("id")!=null?n.attr("id"):n.attr("name")!=null?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4),"select2-"+t},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));t!=null&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var u,f,e,o,i,s,h,r;if(t=="resolve")return(u=this._resolveWidth(n,"style"),u!=null)?u:this._resolveWidth(n,"element");if(t=="element")return(f=n.outerWidth(!1),f<=0)?"auto":f+"px";if(t=="style"){if(e=n.attr("style"),typeof e!="string")return null;for(o=e.split(";"),i=0,s=o.length;i<s;i=i+1)if(h=o[i].replace(/\s/g,""),r=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),r!==null&&r.length>=1)return r[1];return null}return t},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this,r;this.$element.on("change.select2",function(){t.dataAdapter.current(function(n){t.trigger("selection:update",{data:n})})});this._sync=i.bind(this._syncAttributes,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!=null?(this._observer=new r(function(i){n.each(i,t._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",t._sync,!1)},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var t=this,i=["toggle"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("*",function(r,u){n.inArray(r,i)===-1&&t.trigger(r,u)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")});this.on("close",function(){n.$container.removeClass("select2-container--open")});this.on("enable",function(){n.$container.removeClass("select2-container--disabled")});this.on("disable",function(){n.$container.addClass("select2-container--disabled")});this.on("focus",function(){n.$container.addClass("select2-container--focus")});this.on("blur",function(){n.$container.removeClass("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open");this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ENTER?(n.trigger("results:select"),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle"),t.preventDefault()):i===r.UP?(n.trigger("results:previous"),t.preventDefault()):i===r.DOWN?(n.trigger("results:next"),t.preventDefault()):(i===r.ESC||i===r.TAB)&&(n.close(),t.preventDefault()):(i===r.ENTER||i===r.SPACE||(i===r.DOWN||i===r.UP)&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"},e,i;if(n in f&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented)){t.prevented=!0;return}r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},u.prototype.close=function(){this.isOpen()&&this.trigger("close")},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');(n==null||n.length===0)&&(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),t==null||t.length===0)return this.$element.val();var i=t[0];n.isArray(i)&&(i=n.map(i,function(n){return n.toString()}));this.$element.val(i).trigger("change")},u.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync);this._observer!=null?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1);this._sync=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},u});t.define("select2/compat/utils",["jquery"],function(n){function t(t,i,r){var u,f=[],e;u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){this.indexOf("select2-")===0&&f.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){this.indexOf("select2-")!==0&&(e=r(this),e!=null&&f.push(e))}));t.attr("class",f.join(" "))}return{syncCssClasses:t}});t.define("select2/compat/containerCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("containerCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptContainerCssClass"),f=f||r,u.indexOf(":all:")!==-1&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return t!=null?t+" "+n:n}),e=this.options.get("containerCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i});t.define("select2/compat/dropdownCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("dropdownCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptDropdownCssClass"),f=f||r,u.indexOf(":all:")!==-1&&(u=u.replace(":all",""),s=f,f=function(n){var t=s(n);return t!=null?t+" "+n:n}),e=this.options.get("dropdownCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i});t.define("select2/compat/initSelection",["jquery"],function(n){function t(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2");this.initSelection=i.get("initSelection");this._isInitialized=!1;n.call(this,t,i)}return t.prototype.current=function(t,i){var r=this;if(this._isInitialized){t.call(this,i);return}this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0;n.isArray(t)||(t=[t]);i(t)})},t});t.define("select2/compat/inputData",["jquery"],function(n){function t(n,t,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";t.prop("type")==="hidden"&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.");n.call(this,t,i)}return t.prototype.current=function(t,i){function f(t,i){var r=[];return t.selected||n.inArray(t.id,i)!==-1?(t.selected=!0,r.push(t)):t.selected=!1,t.children&&r.push.apply(r,f(t.children,i)),r}for(var e,r=[],u=0;u<this._currentData.length;u++)e=this._currentData[u],r.push.apply(r,f(e,this.$element.val().split(this._valueSeparator)));i(r)},t.prototype.select=function(t,i){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+i.id;this.$element.val(r);this.$element.trigger("change")}else this.current(function(t){n.map(t,function(n){n.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},t.prototype.unselect=function(n,t){var i=this;t.selected=!1;this.current(function(n){for(var u,f=[],r=0;r<n.length;r++)(u=n[r],t.id!=u.id)&&f.push(u.id);i.$element.val(f.join(i._valueSeparator));i.$element.trigger("change")})},t.prototype.query=function(n,t,i){for(var e,u,f=[],r=0;r<this._currentData.length;r++)e=this._currentData[r],u=this.matches(t,e),u!==null&&f.push(u);i({results:f})},t.prototype.addOptions=function(t,i){var r=n.map(i,function(t){return n.data(t[0],"data")});this._currentData.push.apply(this._currentData,r)},t});t.define("select2/compat/matcher",["jquery"],function(n){function t(t){function i(i,r){var u=n.extend(!0,{},r),f,e,o;if(i.term==null||n.trim(i.term)==="")return u;if(r.children){for(f=r.children.length-1;f>=0;f--)e=r.children[f],o=t(i.term,e.text,e),o||u.children.splice(f,1);if(u.children.length>0)return u}return t(i.term,r.text,r)?u:null}return i}return t});t.define("select2/compat/query",[],function(){function n(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.callback=i;var r=this.options.get("query");r.call(null,t)},n});t.define("select2/dropdown/attachContainer",[],function(){function n(n,t,i){n.call(this,t,i)}return n.prototype.position=function(n,t,i){var r=i.find(".dropdown-wrapper");r.append(t);t.addClass("select2-dropdown--below");i.addClass("select2-container--below")},n});t.define("select2/dropdown/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$dropdown.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n});t.define("select2/selection/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$selection.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n});t.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(n,t,i,r){if(t("jquery.mousewheel"),n.fn.select2==null){var u=["open","close","destroy"];n.fn.select2=function(t){var r,f,e;if(t=t||{},typeof t=="object")return this.each(function(){var r=n.extend({},t,!0),u=new i(n(this),r)}),this;if(typeof t=="string")return(r=this.data("select2"),r==null&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),f=Array.prototype.slice.call(arguments,1),e=r[t](f),n.inArray(t,u)>-1)?this:e;throw new Error("Invalid arguments for Select2: "+t);}}return n.fn.select2.defaults==null&&(n.fn.select2.defaults=r),i});
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
return function(i){typeof t.define=="function"&&t.define.amd?t.define("jquery.mousewheel",["jquery"],i):typeof exports=="object"?module.exports=i:i(n)}(function(n){function e(r){var f=r||window.event,w=h.call(arguments,1),l=0,o=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(f),r.type="mousewheel","detail"in f&&(e=f.detail*-1),"wheelDelta"in f&&(e=f.wheelDelta),"wheelDeltaY"in f&&(e=f.wheelDeltaY),"wheelDeltaX"in f&&(o=f.wheelDeltaX*-1),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(o=e*-1,e=0),l=e===0?o:e,"deltaY"in f&&(e=f.deltaY*-1,l=e),"deltaX"in f&&(o=f.deltaX,e===0&&(l=o*-1)),e!==0||o!==0)return f.deltaMode===1?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,o*=v):f.deltaMode===2&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,o*=y),a=Math.max(Math.abs(e),Math.abs(o)),(!t||a<t)&&(t=a,s(f,a)&&(t/=40)),s(f,a)&&(l/=40,o/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),o=Math[o>=1?"floor":"ceil"](o/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=o,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,o,e),u&&clearTimeout(u),u=setTimeout(c,200),(n.event.dispatch||n.event.handle).apply(this,w)}function c(){t=null}function s(n,t){return i.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,u,t,f,i;if(n.event.fixHooks)for(f=o.length;f;)n.event.fixHooks[o[--f]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],e,!1);else this.onmousewheel=e;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],e,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i});Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(n){for(var i=Date.CultureInfo.monthNames,u=Date.CultureInfo.abbreviatedMonthNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1};Date.getDayNumberFromName=function(n){for(var i=Date.CultureInfo.dayNames,u=Date.CultureInfo.abbreviatedDayNames,f=Date.CultureInfo.shortestDayNames,r=n.toLowerCase(),t=0;t<i.length;t++)if(i[t].toLowerCase()==r||u[t].toLowerCase()==r)return t;return-1};Date.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0};Date.getDaysInMonth=function(n,t){return[31,Date.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]};Date.getTimezoneOffset=function(n,t){return t||!1?Date.CultureInfo.abbreviatedTimeZoneDST[n.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[n.toUpperCase()]};Date.getTimezoneAbbreviation=function(n,t){var i=t||!1?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(var r in i)if(i[r]===n)return r;return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(n){if(isNaN(this))throw new Error(this);if(n instanceof Date&&!isNaN(n))return this>n?1:this<n?-1:0;throw new TypeError(n);};Date.prototype.equals=function(n){return this.compareTo(n)===0};Date.prototype.between=function(n,t){var i=this.getTime();return i>=n.getTime()&&i<=t.getTime()};Date.prototype.addMilliseconds=function(n){return this.setMilliseconds(this.getMilliseconds()+n),this};Date.prototype.addSeconds=function(n){return this.addMilliseconds(n*1e3)};Date.prototype.addMinutes=function(n){return this.addMilliseconds(n*6e4)};Date.prototype.addHours=function(n){return this.addMilliseconds(n*36e5)};Date.prototype.addDays=function(n){return this.addMilliseconds(n*864e5)};Date.prototype.addWeeks=function(n){return this.addMilliseconds(n*6048e5)};Date.prototype.addMonths=function(n){var t=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(t,this.getDaysInMonth())),this};Date.prototype.addYears=function(n){return this.addMonths(n*12)};Date.prototype.add=function(n){if(typeof n=="number")return this._orient=n,this;var t=n;return(t.millisecond||t.milliseconds)&&this.addMilliseconds(t.millisecond||t.milliseconds),(t.second||t.seconds)&&this.addSeconds(t.second||t.seconds),(t.minute||t.minutes)&&this.addMinutes(t.minute||t.minutes),(t.hour||t.hours)&&this.addHours(t.hour||t.hours),(t.month||t.months)&&this.addMonths(t.month||t.months),(t.year||t.years)&&this.addYears(t.year||t.years),(t.day||t.days)&&this.addDays(t.day||t.days),this};Date._validate=function(n,t,i,r){if(typeof n!="number")throw new TypeError(n+" is not a Number.");else if(n<t||n>i)throw new RangeError(n+" is not a valid value for "+r+".");return!0};Date.validateMillisecond=function(n){return Date._validate(n,0,999,"milliseconds")};Date.validateSecond=function(n){return Date._validate(n,0,59,"seconds")};Date.validateMinute=function(n){return Date._validate(n,0,59,"minutes")};Date.validateHour=function(n){return Date._validate(n,0,23,"hours")};Date.validateDay=function(n,t,i){return Date._validate(n,1,Date.getDaysInMonth(t,i),"days")};Date.validateMonth=function(n){return Date._validate(n,0,11,"months")};Date.validateYear=function(n){return Date._validate(n,1,9999,"seconds")};Date.prototype.set=function(n){var t=n;return t.millisecond||t.millisecond===0||(t.millisecond=-1),t.second||t.second===0||(t.second=-1),t.minute||t.minute===0||(t.minute=-1),t.hour||t.hour===0||(t.hour=-1),t.day||t.day===0||(t.day=-1),t.month||t.month===0||(t.month=-1),t.year||t.year===0||(t.year=-1),t.millisecond!=-1&&Date.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),t.second!=-1&&Date.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),t.minute!=-1&&Date.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),t.hour!=-1&&Date.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),t.month!==-1&&Date.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),t.year!=-1&&Date.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),t.day!=-1&&Date.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),this};Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this};Date.prototype.isLeapYear=function(){var n=this.getFullYear();return n%4==0&&n%100!=0||n%400==0};Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(n,t){var i=(n-this.getDay()+7*(t||1))%7;return this.addDays(i===0?i+=7*(t||1):i)};Date.prototype.moveToMonth=function(n,t){var i=(n-this.getMonth()+12*(t||1))%12;return this.addMonths(i===0?i+=12*(t||1):i)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)};Date.prototype.getWeekOfYear=function(n){var t=this.getFullYear(),e=this.getMonth(),o=this.getDate(),s=n||Date.CultureInfo.firstDayOfWeek,r=8-new Date(t,0,1).getDay(),f,i,u;return r==8&&(r=1),f=(Date.UTC(t,e,o,0,0,0)-Date.UTC(t,0,1,0,0,0))/864e5+1,i=Math.floor((f-r+7)/7),i===s&&(t--,u=8-new Date(t,0,1).getDay(),i=u==2||u==8?53:52),i};Date.prototype.isDST=function(){return console.log("isDST"),this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(n){var t=this.getTimezoneOffset(),i=Number(n)*-6/10;return this.addMinutes(i-t),this};Date.prototype.setTimezone=function(n){return this.setTimezoneOffset(Date.getTimezoneOffset(n))};Date.prototype.getUTCOffset=function(){var t=this.getTimezoneOffset()*-10/6,n;return t<0?(n=(t-1e4).toString(),n[0]+n.substr(2)):(n=(t+1e4).toString(),"+"+n.substr(1))};Date.prototype.getDayName=function(n){return n?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(n){return n?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(n){var t=this,i=function(n){return n.toString().length==1?"0"+n:n};return n?n.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(n){switch(n){case"hh":return i(t.getHours()<13?t.getHours():t.getHours()-12);case"h":return t.getHours()<13?t.getHours():t.getHours()-12;case"HH":return i(t.getHours());case"H":return t.getHours();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return t.getFullYear();case"yy":return t.getFullYear().toString().substring(2,4);case"dddd":return t.getDayName();case"ddd":return t.getDayName(!0);case"dd":return i(t.getDate());case"d":return t.getDate().toString();case"MMMM":return t.getMonthName();case"MMM":return t.getMonthName(!0);case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return t.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.now=function(){return new Date};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=1;Date.prototype.next=function(){return this._orient=1,this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this};Date.prototype._is=!1;Date.prototype.is=function(){return this._is=!0,this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var n={};return n[this._dateElement]=this,Date.now().add(n)};Number.prototype.ago=function(){var n={};return n[this._dateElement]=this*-1,Date.now().add(n)},function(){for(var h,i,c,l,u,n=Date.prototype,s=Number.prototype,f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),t,a=function(n){return function(){return this._is?(this._is=!1,this.getDay()==n):this.moveToDayOfWeek(n,this._orient)}},r=0;r<f.length;r++)n[f[r]]=n[f[r].substring(0,3)]=a(r);for(h=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},i=0;i<e.length;i++)n[e[i]]=n[e[i].substring(0,3)]=h(i);for(c=function(n){return function(){return n.substring(n.length-1)!="s"&&(n+="s"),this["add"+n](this._orient)}},l=function(n){return function(){return this._dateElement=n,this}},u=0;u<o.length;u++)t=o[u].toLowerCase(),n[t]=n[t+"s"]=c(o[u]),s[t]=s[t+"s"]=l(t)}();Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){var i,o,f,u;Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var t=Date.Parsing,n=t.Operators={rtoken:function(n){return function(i){var r=i.match(n);if(r)return[r[0],i.substring(r[0].length)];throw new t.Exception(i);}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(n){return function(t){for(var r=[],i=null;t.length;){try{i=n.call(this,t)}catch(u){r.push(i[0]);t=i[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var i=[],r=null;t.length;){try{r=n.call(this,t)}catch(u){return[i,t]}i.push(r[0]);t=r[1]}return[i,t]}},optional:function(n){return function(t){var i=null;try{i=n.call(this,t)}catch(r){return[null,t]}return[i[0],i[1]]}},not:function(n){return function(i){try{n.call(this,i)}catch(r){return[null,i]}throw new t.Exception(i);}},ignore:function(n){return n?function(t){var i=null;return i=n.call(this,t),[null,i[1]]}:null},product:function(){for(var i=arguments[0],u=Array.prototype.slice.call(arguments,1),r=[],t=0;t<i.length;t++)r.push(n.each(i[t],u));return r},cache:function(n){var r={},i=null;return function(u){try{i=r[u]=r[u]||n.call(this,u)}catch(f){i=r[u]=f}if(i instanceof t.Exception)throw i;else return i}},any:function(){var n=arguments;return function(i){for(var r=null,u=0;u<n.length;u++)if(n[u]!=null){try{r=n[u].call(this,i)}catch(f){r=null}if(r)return r}throw new t.Exception(i);}},each:function(){var n=arguments;return function(i){for(var f=[],u=null,r=0;r<n.length;r++)if(n[r]!=null){try{u=n[r].call(this,i)}catch(e){throw new t.Exception(i);}f.push(u[0]);i=u[1]}return[f,i]}},all:function(){var t=arguments,n=n;return n.each(n.optional(t))},sequence:function(i,r,u){return(r=r||n.rtoken(/^\s*/),u=u||null,i.length==1)?i[0]:function(n){for(var f=null,e=null,s=[],o=0;o<i.length;o++){try{f=i[o].call(this,n)}catch(h){break}s.push(f[0]);try{e=r.call(this,f[1])}catch(c){e=null;break}n=e[1]}if(!f)throw new t.Exception(n);if(e)throw new t.Exception(e[1]);if(u)try{f=u.call(this,f[1])}catch(l){throw new t.Exception(f[1]);}return[s,f?f[1]:n]}},between:function(t,i,u){u=u||t;var f=n.each(n.ignore(t),i,n.ignore(u));return function(n){var t=f.call(this,n);return[[t[0][0],r[0][2]],t[1]]}},list:function(t,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(i)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(i))),px,n.ignore(r))},set:function(i,r,u){return r=r||n.rtoken(/^\s*/),u=u||null,function(f){for(var y,a,s=null,l=null,h=null,c=null,e=[[],f],o=!1,v=0;v<i.length;v++){h=null;l=null;s=null;o=i.length==1;try{s=i[v].call(this,f)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!o)try{h=r.call(this,s[1])}catch(w){o=!0}else o=!0;if(o||h[1].length!==0||(o=!0),!o){for(y=[],a=0;a<i.length;a++)v!=a&&y.push(i[a]);l=n.set(y,r).call(this,h[1]);l[0].length>0&&(c[0]=c[0].concat(l[0]),c[1]=l[1])}if(c[1].length<e[1].length&&(e=c),e[1].length===0)break}if(e[0].length===0)return e;if(u){try{h=u.call(this,e[1])}catch(b){throw new t.Exception(e[1]);}e[1]=h[1]}return e}},forward:function(n,t){return function(i){return n[t].call(this,i)}},replace:function(n,t){return function(i){var r=n.call(this,i);return[t,r[1]]}},process:function(n,t){return function(i){var r=n.call(this,i);return[t.call(this,r[0]),r[1]]}},min:function(n,i){return function(r){var u=i.call(this,r);if(u[0].length<n)throw new t.Exception(r);return u}}},s=function(n){return function(){var t=null,u=[],i,r;if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),t)for(i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),u.push(n.apply(null,t)),t.shift(),u;else return n.apply(null,arguments)}},e="optional not ignore cache".split(/\s/);for(i=0;i<e.length;i++)n[e[i]]=s(n[e[i]]);for(o=function(n){return function(){return arguments[0]instanceof Array?n.apply(null,arguments[0]):n.apply(null,arguments)}},f="each any all".split(/\s/),u=0;u<f.length;u++)n[f[u]]=o(n[f[u]])}(),function(){var o=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof Array?i=i.concat(o(n[t])):n[t]&&i.push(n[t]);return i},u,f,e;Date.Grammar={};Date.Translator={hour:function(n){return function(){this.hour=Number(n)}},minute:function(n){return function(){this.minute=Number(n)}},second:function(n){return function(){this.second=Number(n)}},meridian:function(n){return function(){this.meridian=n.slice(0,1).toLowerCase()}},timezone:function(n){return function(){var t=n.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=n.toLowerCase()}},day:function(n){var t=n[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(n){return function(){this.month=n.length==3?Date.getMonthNumberFromName(n):Number(n)-1}},year:function(n){return function(){var t=Number(n);this.year=n.length>2?t:t+(t+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(n){return function(){switch(n){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(n){var r,t,i;for(n=n instanceof Array?n:[n],r=new Date,this.year=r.getFullYear(),this.month=r.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0,t=0;t<n.length;t++)n[t]&&n[t].call(this);if(this.hour=this.meridian=="p"&&this.hour<13?this.hour+12:this.hour,this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return i=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second),this.timezone?i.set({timezone:this.timezone}):this.timezoneOffset&&i.set({timezoneOffset:this.timezoneOffset}),i},finish:function(n){var f,r,t,u;if(n=n instanceof Array?o(n):[n],n.length===0)return null;for(f=0;f<n.length;f++)typeof n[f]=="function"&&n[f].call(this);if(this.now)return new Date;var i=Date.today(),e=!!(this.days!=null||this.orient||this.operator);return e?(u=this.orient=="past"||this.operator=="subtract"?-1:1,this.weekday&&(this.unit="day",r=Date.getDayNumberFromName(this.weekday)-i.getDay(),t=7,this.days=r?(r+u*t)%t:u*t),this.month&&(this.unit="month",r=this.month-i.getMonth(),t=12,this.months=r?(r+u*t)%t:u*t,this.month=null),this.unit||(this.unit="day"),(this[this.unit+"s"]==null||this.operator!=null)&&(this.value||(this.value=1),this.unit=="week"&&(this.unit="day",this.value=this.value*7),this[this.unit+"s"]=this.value*u),i.add(this)):(this.meridian&&this.hour&&(this.hour=this.hour<13&&this.meridian=="p"?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=i.addDays(Date.getDayNumberFromName(this.weekday)-i.getDay()).getDate()),this.month&&!this.day&&(this.day=1),i.set(this))}};var t=Date.Parsing.Operators,n=Date.Grammar,i=Date.Translator,r;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=t.stoken(":");n.whiteSpace=t.rtoken(/^\s*/);n.generalDelimiter=t.rtoken(/^(([\s\,]|at|on)+)/);u={};n.ctoken=function(n){var r=u[n],i;if(!r){var o=Date.CultureInfo.regexPatterns,f=n.split(/\s+/),e=[];for(i=0;i<f.length;i++)e.push(t.replace(t.rtoken(o[f[i]]),f[i]));r=u[n]=t.any.apply(null,e)}return r};n.ctoken2=function(n){return t.rtoken(Date.CultureInfo.regexPatterns[n])};n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),i.hour));n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.minute));n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.second));n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.second));n.hms=t.cache(t.sequence([n.H,n.mm,n.ss],n.timePartDelimiter));n.t=t.cache(t.process(n.ctoken2("shortMeridian"),i.meridian));n.tt=t.cache(t.process(n.ctoken2("longMeridian"),i.meridian));n.z=t.cache(t.process(t.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),i.timezone));n.zz=t.cache(t.process(t.rtoken(/^(\+|\-)\s*\d\d\d\d/),i.timezone));n.zzz=t.cache(t.process(n.ctoken2("timezone"),i.timezone));n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz]));n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix);n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(n){return function(){this.weekday=n}}));n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),i.month));n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),i.month));n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),i.year));n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),i.year));n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),i.year));n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),i.year));r=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))};n.day=r(n.d,n.dd);n.month=r(n.M,n.MMM);n.year=r(n.yyyy,n.yy);n.orientation=t.process(n.ctoken("past future"),function(n){return function(){this.orient=n}});n.operator=t.process(n.ctoken("add subtract"),function(n){return function(){this.operator=n}});n.rday=t.process(n.ctoken("yesterday tomorrow today now"),i.rday);n.unit=t.process(n.ctoken("minute hour day week month year"),function(n){return function(){this.unit=n}});n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(n){return function(){this.value=n.replace(/\D/g,"")}});n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);r=function(){return t.set(arguments,n.datePartDelimiter)};n.mdy=r(n.ddd,n.month,n.day,n.year);n.ymd=r(n.ddd,n.year,n.month,n.day);n.dmy=r(n.ddd,n.day,n.month,n.year);n.date=function(t){return(n[Date.CultureInfo.dateElementOrder]||n.mdy).call(this,t)};n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(n[t])return n[t];throw Date.Parsing.Exception(t);}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(n){return t.ignore(t.stoken(n))}))),function(n){return t.process(t.each.apply(null,n),i.finishExact)});f={};e=function(t){return f[t]=f[t]||n.format(t)[0]};n.formats=function(n){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)r.push(e(n[i]));return t.any.apply(null,r)}return e(n)};n._formats=n.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),i.finish);n.start=function(t){try{var i=n._formats.call({},t);if(i[1].length===0)return i}catch(r){}return n._start.call({},t)}}();Date._parse=Date.parse;Date.parse=function(n){var t=null;if(!n)return null;try{t=Date.Grammar.start.call({},n)}catch(i){return null}return t[1].length===0?t[0]:null};Date.getParseFunction=function(n){var t=Date.Grammar.formats(n);return function(n){var i=null;try{i=t.call({},n)}catch(r){return null}return i[1].length===0?i[0]:null}};Date.parseExact=function(n,t){return Date.getParseFunction(t)(n)},function(n){"use strict";function r(f){f?i=setTimeout(function(){t(n(".dot-loader .dot.first"));t(n(".dot-loader .dot.second"));t(n(".dot-loader .dot.third"));r(n(".dot-loader").data("run")!="stop")},600):u()}function t(n){var t=n.css("top").replace("px",""),i=n.css("left").replace("px","");t==0&&i==0?n.animate({top:35},500,"easeInOutBack"):t==35&&i==0?n.animate({left:35},500,"easeInOutBack"):t==35&&i==35?n.animate({top:0},500,"easeInOutBack"):n.animate({left:0},500,"easeInOutBack")}function u(){n(".dot-loader .dot").animate({top:"50%",left:"50%",marginTop:"-7.5px",marginLeft:"-7.5px"},function(){n(this).addClass("done")})}n.fn.getCursorPosition=function(){var n=this.get(0),t,i;if(n)return"selectionStart"in n?n.selectionStart:document.selection?(n.focus(),t=document.selection.createRange(),i=document.selection.createRange().text.length,t.moveStart("character",-n.value.length),t.text.length-i):void 0};n.fn.onlyNumbers=function(t){if(t=="destroy")n(this).unbind("keypress");else{var r=new RegExp(/^\d+$/),f=new RegExp(/^\d+(?:\.\d{1,2})?$/),i=n.extend({decimal:!0,negative:!0},t),u=this;u.keypress(function(t){var u=t.keyCode||t.which,f=n(this).val(),e=String.fromCharCode(u);(n.isEmptyObject(f)||n(this).getCursorPosition()===0&&f.indexOf("-")!==0)&&e==="-"&&i.negative||(i.negative&&(f+e).indexOf("-")>0?t.preventDefault():i.decimal||r.test(e)?(i.decimal&&u!=46&&u>31&&(u<48||u>57)||(f.replace("-","")+e).split(".").length-1>1)&&t.preventDefault():t.preventDefault())})}return this};var i;n.fn.leLoader=function(t){if(t=="stop")clearTimeout(i),u(),setTimeout(function(){n(".dot-loader").animate({top:"-100"},200,function(){n(this).remove();n("#dot-overlay").remove()})},1200);else{var f=n.extend({overlayClass:"overlay"},t);this.append("<div id='dot-overlay' class='"+f.overlayClass+"'><\/div>");this.append('<div class="dot-loader" data-run="started"><span class="dot first"><\/span><span class="dot second"><\/span><span class="dot third"><\/span><\/div>');n("#dot-overlay").fadeIn(200,function(){r(!0)})}return this}}(jQuery);Number.prototype.format=function(n,t){var i="\\d(?=(\\d{"+(t||3)+"})+"+(n>0?"\\.":"$")+")";return this.toFixed(Math.max(0,~~n)).replace(new RegExp(i,"g"),"$&,")};Number.prototype.formatMoney=function(n,t,i,r){n=isNaN(n=Math.abs(n))?2:n;t=t!==undefined?t:"$";i=i||",";r=r||".";var f=this,o=f<0?"-":"",e=parseInt(f=Math.abs(+f||0).toFixed(n),10)+"",u=(u=e.length)>3?u%3:0;return t+o+(u?e.substr(0,u)+i:"")+e.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?r+Math.abs(f-e).toFixed(n).slice(2):"")};String.prototype.removeFormatting=function(){return parseFloat(this.replace(/[\$,]/g,""))};String.prototype.isEmpty=function(){return this==null||this.trim()==""||this.trim().length<1?!0:!1};$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(n){this.options.title?n.html(this.options.title):n.html("&#160;")}}));$.validator.setDefaults({ignore:[]});var actsTempStorage=null,matsTempStorage=null,actsSelectedValue=[],temp,wochanged=!1,dTable,aDtable,techTable,requiresNew=!0,additional,additionalFunc,batch=!1,deleteUrl=null,canEdit="true",isWO=!1,isMatAddedToist=!1,tempActs=[],tempLoc="",tempLocs=[],tempDate=null,actMaterialQtyArry=[],dialogOptions={dialogClass:"animated tada",width:300,resizable:!1,modal:!0,close:function(){$(this).remove()},buttons:[{text:"OK",click:function(){$(this).dialog("close")}}]},dataTableOptions={dom:'<"top"<"sub-top clearfix"fr>lp>t<"bottom clearfix"p>',pagingType:"full_numbers",autoWidth:!1,language:{lengthMenu:"_MENU_"},search:{caseInsensitive:!0},processing:!0,paging:!0,stateSave:!0,serverSide:!0,columnDefs:null,createdRow:null,order:null,langauge:{processing:""},ajax:{url:"",type:"POST",data:function(n){return n.additional=$("#status").val(),n.year=$("#year").val(),n.client=$("#clients").val(),n.zone=$("#zone").val(),n.clas=$("#clas").val(),$.toDictionary(n)}},drawCallback:function(){$("[title]:not(.ui-dialog-titlebar [title])").tooltip({placement:"top"})},preDrawCallback:function(){},footerCallback:null,initComplete:function(){requiresNew&&$(".dataTables_wrapper .sub-top").append("<button class='add-new'>New<\/button>");$(".dataTables_wrapper .top select").select2({minimumResultsForSearch:-1,width:"resolve"})}};$(window).load(function(){function i(n,t){n=$("#wOForm");n.validate();var i=new FormData(n.get(0));n.valid()&&($(".tel-form button.saver, .tel-form input, tel-form select").attr("disabled","disabled"),$.ajax({url:n.attr("action"),data:i,type:"post",cache:!1,contentType:!1,processData:!1,success:function(n){var i,u,r,f;if($(".tel-form button.saver, .tel-form input, tel-form select").removeAttr("disabled"),n.Code!="100")n.Code=="999"?setupMsgBar(3,n.Additional):setupMsgBar(3,"Create/Update failed. Please try again or contact your system administrator");else{if(setupMsgBar(2,"Create/Update was completed successfully!"),n.Additional==""||n.Additional.length<0||n.Additional==null)$(".tel-form input").val("");else if(n.Additional.toString().substr(0,1)=="#")setupMsgBar(3,n.Additional.substr(1));else if(typeof n.Additional!="string"&&isNaN(n.Additional)){for(r in n.Additional)$(".tel-form [name='"+r+"']").val(n.Additional[r]);f=dTable.page();dTable.page(f).draw(!1);setTimeout('$(".close").click()',2e3)}else $(".tel-form .tel-form-id").val(n.Additional),t?setTimeout('$(".close").click()',2e3):(i=$("#teams"),u=$(".tel-form .tel-tabs button"),u.removeClass("active"),i.addClass("active"),$(".modal-footer .update").removeClass("team-btn link-btn"),$(".tel-form table.active").removeClass("active").hide(200,function(){$(".tel-form table").eq(1).addClass("active").show(200);i.is("#teams")&&(setupTeamActions(!0),$(".modal-footer .update").toggleClass("saver team-btn"))})),isWO=!1;$(".tel-form .tel-tabs button").removeAttr("disabled")}}}))}function u(n,t,i){for(var u=!1,r=0;r<tempActs.length;r++)if(tempActs[r].actID==n&&tempActs[r].location==t&&tempActs[r].actDate==i){u=!0;break}return u}function f(n,t){for(var r=!1,i=0;i<tempLocs.length;i++)if(tempLocs[i].location==n&&tempLocs[i].actDate==t){r=!0;break}return r}function e(){var t=$("#constructor").data("id");$.post("/workorder/CheckMaxQtyExceeded",{id:t},function(t){if(t.msg!=""){var i=[{text:"Continue",click:function(){r(this)}},{text:"Cancel",click:function(){$(this).dialog("close");$("#constructor > .title .btn-group label").removeClass("active");$("#constructor > .title .btn-group label.submit").addClass("active")}}];displayConfirmationMsg("<div><p>Cannot change the status, some <b class='default-col'>Activities<\/b> or <b class='default-col'>Materials<\/b> maximum quantity <b class='default-col'>Exceeded<\/b>.<\/p><br /><div class='txt-holder'><input type='text' placeholder='Username' style='height:30px;' id='txtUsername' /><i class='fe-user'><\/i><\/div><div class='txt-holder'><input type='password' placeholder='Password' style='height:30px; margin-top:5px;' id='txtPassword' /><i class='fe-lock-open'><\/i><\/div><\/div>","Authentication Required",i)}else n("verify")})}function n(n){$.post("/workorder/changeStatus",{type:n,wid:$("#constructor").data("id")},function(t){if(t.Msg!=""){$("#constructor > .title .btn-group label").removeClass("active");n=="submit"?$("#constructor > .title .btn-group label.submit").addClass("active"):n=="verify"?$("#constructor > .title .btn-group label.verify").addClass("active"):$("#constructor > .title .btn-group label.unsubmit").addClass("active");var r=t.Msg,i="<i class='fe-comment'><\/i> Cannot Change Status!";t.Code=="1001"&&(i="<i class='fe-comment'><\/i>Penalty Warning!");displayDialogMsg(r,i)}})}function r(t){var i=$(t),u=i.find("#txtUsername").val(),f=i.find("#txtPassword").val();u!=""&&f!=""&&$.post("/workorder/CheckAuthentication",{uName:u,pWord:f},function(t){if(t.msg!=""){i.dialog("close");var u=[{text:"Continue",click:function(){r(this)}},{text:"Cancel",click:function(){$(this).dialog("close");$("#constructor > .title .btn-group label").removeClass("active");$("#constructor > .title .btn-group label.submit").addClass("active")}}];displayConfirmationMsg("<div><p>Cannot change the status, some <b class='default-col'>Activities<\/b> or <b class='default-col'>Materials<\/b> maximum quantity <b class='default-col'>Exceeded<\/b>.<\/p><br /><div class='txt-holder'><input type='text' placeholder='Username' style='height:30px;' id='txtUsername' /><i class='fe-user'><\/i><\/div><div class='txt-holder'><input type='password' placeholder='Password' style='height:30px; margin-top:5px;' id='txtPassword' /><i class='fe-lock-open'><\/i><\/div><\/div>","Authentication Required",u)}else i.dialog("close"),n("verify")})}function t(n){var i=$("#constructor .const-holder.const-dates ul li.active").data("date"),r=$($(".const-main .const-holder.const-locs ul li.active").find("span")[0]).text(),u=n.find("select").val(),f=$(n).data("id"),e=$("#constructor").data("id"),h=$("#constructor .wo-inv select").val(),c=$("#constructor").hasClass("view-wo")?"view":"",t=n.find(".act-amt").val(),l=t!=undefined&&t!=""?Number(t):t;loading(!1);$("body").append("<div class='full-overlay'><\/div>");$(".full-overlay").fadeIn(200);$.ajax({url:"/WorkOrder/GenerateMetarialConstructor",data:{wActid:f,date:i,loc:r,actId:u,invID:h,type:c,wid:e,qty:l},type:"POST",success:function(n){removeLoader(!1,500,function(){var u,t;isMatAddedToist=!1;$("body").append(n);$("#matConstructor [title]").tooltip({placement:"top"});$("#matConstructor").addClass("animated bounceInRight").show();$(".mat-const-main .const-holder ul").perfectScrollbar();$("#matConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#matConstructor .title span").dotdotdot();var i=$("#matConstructor > .mat-const-main .const-holder.const-mats"),r=i.find(".placeholder"),f=r.is(":visible")?300:10;if(r.find("button").removeClass("activated animated flash"),r.hide(200),u=!1,actMaterialQtyArry.length>0){i.find("ul").length==0&&i.append("<ul><\/ul>");var e=$("#matConstructor #actIdHidden").val(),h=$("#matConstructor #locHidden").val(),c=$("#matConstructor #dateHidden").val();for(t=0;t<actMaterialQtyArry.length;t++)actMaterialQtyArry[t].loc==h&&actMaterialQtyArry[t].date==c&&actMaterialQtyArry[t].actID==e&&(o(actMaterialQtyArry[t].matID)?$(".mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),i=n.find("select").val();actMaterialQtyArry[t].matID==i&&n.find(".act-amt").val(actMaterialQtyArry[t].matQty)}):(i.find("ul").append(s(matsTempStorage,actMaterialQtyArry[t].matID,actMaterialQtyArry[t].matQty)),$(".mat-const-main .const-mats ul").perfectScrollbar(),setDisableMetarialOptions(),i.find("select").select2({width:"resolve",placeholder:"Select an Activity"}),u=!0))}i.find("li").length!=0||u?setTimeout(function(){setDisableMetarialOptions();i.find("select").select2({width:"resolve"});i.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$(".mat-const-main .const-mats ul").perfectScrollbar()},f):(i.find("ul").remove(),$(".mat-const-main .const-mats .placeholder").show(100,function(){$(".mat-const-main .const-mats .placeholder button").addClass("activated animated flash")}))})},error:function(n){var t=n}})}function o(n){var t=!1;return $(".mat-const-main .const-holder.const-mats ul li").each(function(){var i=$(this),r=i.find("select").val();n==r&&(t=!0)}),t}function s(n,t,i){var u='<li class="clearfix new-act"><div class="act-holder"><select class="act-ddl" name="acts"><option><\/option>',r;for(x=0;x<n.length;x++)r=n[x],u+='<option value="'+r.activityID+'" '+(r.activityID==t?'selected="selected"':"")+">"+r.description+"<\/option>";return u+('<\/select><input type="text" class="act-amt" value="'+i+'" /><\/div><div class="wo-actions"><a href="#" class="del-action"><i class="fe-trash"><\/i><\/a><\/div><\/li>')}function h(n){n==!0&&t(temp)}function c(n){var t=[],r=!1,u,f;$(".tel-form .team-setup tr.team-mem").each(function(){var n=$(this),i=n.data("id").toString(),u=n.find(".portion").val(),f=n.find(".lead").val();if(i.isEmpty()||u.isEmpty())return r=!1,!1;t.push({id:i,share:u,islead:f.toLowerCase()=="false"?!1:!0});r=!0});u=t.filter(function(n){return n.islead==!0});r&&u.length>0?(f={wid:$(".tel-form-id").val(),team:t},$.post("workorder/saveteam",$.toDictionary({model:f}),function(t){if(t.Code!="100")setupMsgBar(3,"Create/Update of Team failed. Please try again or contact your system administrator");else{setupMsgBar(2,"Team was Saved/Update successfully!");var r=dTable.page();dTable.page(r).draw(!1);n||i(self,!0);setTimeout('$(".close").click()',2e3)}})):setupMsgBar(3,"Saving team failed. Please ensure that all inputs were entered and that a leader was selected.")}function l(n,t,i){var f=$("#inv-left ul li.active").data("code"),r,u;n.length>0?(loading(!0),$.post("../invoice/CheckForValidWOs",{ids:n},function(t){var u,r,f;t.any&&t.verified?(f=$("#inv .bottom select").val(),a(n,f,i)):(u="<i class='fe-comment'><\/i> Cannot Process!",r="",removeLoader(!0,500,function(){r=t.msg==""?t.any?"<p>Cannot <b class='default-col'>Process<\/b> the Merged Work Orders those have not yet been <b class='act-col'>Verified<\/b>. Please make sure that you have changed the Work Order's status.<\/p>":"<p>Cannot <b class='default-col'>Process<\/b> the Merged Work Orders those have no activities. Please make sure that at least one (1) <b class='act-col'>Activity<\/b> was created.<\/p>":"<p>Cannot <b class='default-col'>Process<\/b>. Please make sure that you have already <b class='default-col'>Processed<\/b> the Work Orders.<\/p>";displayDialogMsg(r,u)}))})):(r="<i class='fe-comment'><\/i> Cannot Process!",u="<p>Cannot <b class='default-col'>Process<\/b>. Please make sure that you have selected the Work Orders.<\/p>",displayDialogMsg(u,r))}function a(n,t,i){if($("#txtTitle").val()=="")removeLoader(!0,200,function(){displayDialogMsg("<p>No <b class='loc-col'>Invoice Title<\/b> have been inserted for <b class='date-col'>Process<\/b>. First insert your desired <b class='loc-col'>Title<\/b> then try again.<\/p>","<i class='fe-comment'><\/i>Cannot Process")});else{loading(!0);var r=$("#invIdHidden").val()!=undefined&&$("#invIdHidden").val()!=""&&$("#invIdHidden").val()!=""?!0:!1;$.ajax({url:"../invoice/ProcessWorkOrders",data:$.toDictionary({wOIds:n,isUpdate:r,id:t,title:$("#txtTitle").val()}),type:"post",success:function(n){removeLoader(!0,200,function(){var t="",i="";if(n.Code=="100"){dTable2.draw();$("#inv").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove();$(".btm-overlay").fadeOut(200,function(){$(this).remove()})})}else t=n.Msg,i="<i class='fe-comment'><\/i>Cannot Process",displayDialogMsg(t,i)});try{i.dialog("close")}catch(t){}}})}}$(document).on("click",".manage-dets.tt-details, .manage-dets.tt-print",function(n){loading(!1);var t=$(this),i=$(".tech-tbl").data("id"),r=t.parents("tr").attr("id"),u="../technician/"+(t.hasClass("tt-details")?"statementdetail":"perioddetail");$.get(u,{id:i,pdate:r},function(n){removeLoader(!1,500,function(){$(".overlay-body").append(n);$(".overlay").addClass("everything").show(200,function(){var n=$(this);setTimeout(function(){n.perfectScrollbar()},200)})})});n.preventDefault()});$(document).on("click",".manage-dets.tt-details, .manage-dets.tt-print-payslip",function(n){var t=$(this),i=$(".tech-tbl").data("id"),r=t.parents("tr").attr("id");$.post("../technician/GenerateTechPaySlipForPeriod",{id:i,pdate:r},function(){removeLoader(!1,500,function(){})});n.preventDefault()});$(document).on("click",".input-daterange .refresh",function(){techTable.draw(!1)});$(document).on("click",".input-daterange .cancel",function(){$(".input-daterange input").val("");$(".dataTables_wrapper .sub-top .input-daterange").datepicker("remove").datepicker({format:"DD M dd, yyyy"});techTable.fnDraw()});$(document).on("click",".print-holder .print-clicker",function(n){window.print();n.preventDefault()});$(document).on("click","#nav-password",function(n){$.get("../auth/changepassword",function(n){$("body").append(n);$(".modal").modal({show:!0});$.validator.unobtrusive.parse($(".tel-form form"))});n.preventDefault()});$(document).on("click",".hide-close",function(){var i=this.parentNode,n,t;i.id!=undefined&&i.id=="drillDown"?($("#drillDown").removeClass("everything report").hide(200).find(".overlay-body").html(""),$(".overlay").show(),batch==!0&&(n=[{text:"Continue",click:function(){$(this).dialog("close");batchList()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t='<p>Do you want to <b class="default-col">Batch<\/b> the currently selected <b>Invoices<\/b>?<\/p><\/div>',displayConfirmationMsg(t,"Batching",n))):($(".overlay").removeClass("everything report").hide(200).find(".overlay-body").html(""),batch==!0&&(n=[{text:"Continue",click:function(){$(this).dialog("close");batchList()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t='<p>Do you want to <b class="default-col">Batch<\/b> the currently selected <b>Invoices<\/b>?<\/p><\/div>',displayConfirmationMsg(t,"Batching",n)))});$(document).on("click",".print-holder .fk-checkbox",function(){var n=$(this);n.toggleClass("checked")});$(document).on("click",".dt-delete",function(n){var t=$(this),i=$("#liContractorName").html()!=undefined?" "+$("#liContractorName").html():"",r=t.parents("tr").find(".dt-item-title").text()+i,u=t.parents("table").data("name"),f=[{text:"Continue",click:function(){$(this).dialog("close");deleteRow(t)}},{text:"Cancel",click:function(){$(this).dialog("close")}}],e='<p>Are you sure you want to <b class="default-col">Delete<\/b> <b>'+r+"<\/b> record?<\/p><\/div>";displayConfirmationMsg(e,"Delete "+u,f);n.preventDefault()});$(document).on("click",".dt-delete-swo",function(n){var t=$(this),i=$("#liContractorName").html()!=undefined?" "+$("#liContractorName").html():"",r=t.parents("tr").find(".dt-item-title").text()+i,u=t.parents("table").data("name"),f=[{text:"Continue",click:function(){$(this).dialog("close");deleteSWORow(t)}},{text:"Cancel",click:function(){$(this).dialog("close")}}],e='<p>Are you sure you want to <b class="default-col">Delete<\/b> <b>'+r+"<\/b> record?<\/p><\/div>";displayConfirmationMsg(e,"Delete "+u,f);n.preventDefault()});$(document).on("click",".dt-edit",function(n){var s=$(this),i=s.parents("tr"),r=!0,u,f,t,e,o;isWO&&(u=i[0].cells[3].children[0]!=undefined?i[0].cells[3].children[0].className:"",u=="fe-ok yes"&&(canEdit=="False"||canEdit=="false")&&(r=!1));r?(loading(!1),f=$(".admin-tbl").data("url")+"/edit",t=$(this).parents("tr").attr("id"),t=t.indexOf("_")>-1?t.split("_")[1]:t,$.get(f,{id:t},function(n){removeLoader(!1,500,function(){$("body").append(n);$(".modal").modal({show:!0}).find("select").select2({minimumResultsForSearch:-1,width:"resolve"});$(".modal").find(".number").onlyNumbers({neagtive:!1,decimal:!0});$(".modal .date-box").datepicker({format:"mm/dd/yyyy"}).on("changeDate",function(){$(this).datepicker("hide")});$.validator.unobtrusive.parse($(".tel-form form"))})})):(e="<p>This Workorder has already been <b>Submitted<\/b>.<\/p>",o="<i class='fe-comment'><\/i>Already Submitted",displayDialogMsg(e,o));n.preventDefault()});$(document).on("click",".dt-edit-swo",function(n){loading(!1);var t=$(this).parents("tr").attr("id");t=t.indexOf("_")>-1?t.split("_")[1]:t;window.open("/workorder/EditSWO?id="+t,"_self");n.preventDefault()});$(document).on("click",".dt-condeduction",function(){var n=$(this).parents("tr").attr("id");n=n.indexOf("_")>-1?n.split("_")[1]:n;window.location.href="/contractordeduction/index?p_ConId="+n});$(document).on("click",".dt-conpayslip",function(){var n=$(this).parents("tr").attr("id");n=n.indexOf("_")>-1?n.split("_")[1]:n;window.location.href="/technician/techpayslip?p_ConId="+n});$(document).on("click",".dataTables_wrapper .sub-top .add-new, .dataTables_wrapper .sub-top .dropdown-menu>li>a",function(n){var t=$(this),i=t.is(".add-new")?$(".admin-tbl, .tech-tbl").data("url")+"/create":t.attr("href");i+=typeof t.data("type")=="undefined"?"":"?type="+t.data("type");loading(!0);$.get(i,function(n){removeLoader(!0,200,function(){$("body").append(n);$(".modal").modal({show:!0}).find("select").select2({minimumResultsForSearch:-1,width:"resolve",placeholder:"Select an option"});$(".modal").find(".number").onlyNumbers({neagtive:!1,decimal:!0});$(".modal .date-box").datepicker({format:"mm/dd/yyyy"}).on("changeDate",function(){$(this).datepicker("hide")});$.validator.unobtrusive.parse($(".tel-form form"))});setTimeout('$($(".long")[0]).focus()',1500)});n.preventDefault()});$(document).on("click",".dataTables_wrapper .sub-top .add-new-swo",function(n){loading(!1);window.open("/workorder/createNewSWO","_self");n.preventDefault()});$(document).on("submit",".tel-form form",function(n){var t=$(this),r;if(isWO){i(t,!1);n.preventDefault();return}t.validate();r=new FormData(t.get(0));t.valid()&&($(".tel-form button.saver, .tel-form input, tel-form select").attr("disabled","disabled"),$.ajax({url:t.attr("action"),data:r,type:"post",cache:!1,contentType:!1,processData:!1,success:function(n){var i,u,r,t;if($(".tel-form button.saver, .tel-form input, tel-form select").removeAttr("disabled"),n.Code!="100")n.Code=="999"?setupMsgBar(3,n.Additional):n.Code=="1436"?setupMsgBar(3,"Create/Update failed. You don't have permission to perform this action."):setupMsgBar(3,"Create/Update failed. Please try again or contact your system administrator");else{if(setupMsgBar(2,"Create/Update was completed successfully!"),n.Additional==""||n.Additional.length<0||n.Additional==null)$(".tel-form input").val(""),t=dTable.page(),dTable.page(t).draw(!1),setTimeout('$(".close").click()',2e3);else if(n.Additional.toString().substr(0,1)=="#")setupMsgBar(3,n.Additional.substr(1));else if(typeof n.Additional!="string"&&isNaN(n.Additional)){for(r in n.Additional)$(".tel-form [name='"+r+"']").val(n.Additional[r]);t=dTable.page();dTable.page(t).draw(!1);setTimeout('$(".close").click()',2e3)}else $(".tel-form .tel-form-id").val(n.Additional),isWO?(i=$("#teams"),u=$(".tel-form .tel-tabs button"),u.removeClass("active"),i.addClass("active"),$(".modal-footer .update").removeClass("team-btn link-btn"),$(".tel-form table.active").removeClass("active").hide(200,function(){$(".tel-form table").eq(1).addClass("active").show(200);i.is("#teams")&&(setupTeamActions(!0),$(".modal-footer .update").toggleClass("saver team-btn"))})):(t=dTable.page(),dTable.page(t).draw(!1),setTimeout('$(".close").click()',2e3)),isWO=!1;$(".tel-form .tel-tabs button").removeAttr("disabled")}}}));n.preventDefault()});$(document).on("click",".tel-form button.saver",function(){var n=$(".tel-form form");n.submit();setValidationMsgsForForm(n)});$(document).on("keyup, change",".tel-form form td > input, .tel-form form div > input",function(){var n=$(this);n.valid()?n.tooltip("destroy"):setValidationMsgsForElm(n)});$(document).on("click",".tel-checkbox",function(n){var t=$(this);t.toggleClass("checked");t.find(":hidden").val(t.is(".checked")?!0:!1);n.preventDefault()});$(document).on("click",".tel-radio",function(n){var t=$(this),i=t.find(":hidden").attr("name");$(".tel-radio").not(t).removeClass("checked").find(":hidden").val(!1);t.toggleClass("checked");t.find(":hidden").val(t.is(".checked")?!0:!1);n.preventDefault()});$(document).on("click",".const-main .const-holder ul li > .wo-actions .add-materials button",function(n){var t,r,i;console.log("asfasf");t=$(this);t.toggleClass("off");r=t.parents("li").find(".wo-actions");i=r.find(".mat-action");t[0].classList.length==0?(LoadMetarialUsagePopup(t),i.length<1?r.append('<a href="#" class="mat-action"><i class="mdi mdi-server" "><\/i><\/a>'):$(i[0]).show()):i.length<1||$(i[0]).hide();n.preventDefault()});$(document).on("click","#constructor .title-editor button",function(n){var t=$(this);t.parent().find("input").animate({width:t.hasClass("active")?0:300},200,"easeInOutBack",function(){t.toggleClass("active");$(this).toggleClass("active")});n.preventDefault()});$(document).on("click",".has-constructor .dt-details, #con-wo .dt-details",function(n){var i=$(this),t=i.parents("tr").attr("id"),r,u;t=t.toLowerCase().indexOf("invoiced")>-1?"invoiced":t.split("_")[1];t!="invoiced"?(loading(!1),url=i.parents("table").data("wurl"),$("body").append("<div class='full-overlay'><\/div>"),$(".full-overlay").fadeIn(200),$.ajax({url:url,data:{wid:t},type:"POST",success:function(n){removeLoader(!1,500,function(){$("body").append(n);$("#constructor [title]").tooltip({placement:"top"});$("#constructor").addClass("animated bounceInRight").show();$(".const-main .const-holder ul").perfectScrollbar();$("#constructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#constructor .title span").dotdotdot()})}})):(r="<p>This Workorder has already been <b>Invoiced<\/b>. To edit the Workorder you must first reverse the Invoice.<\/p>",u="<i class='fe-comment'><\/i>Already Processed",displayDialogMsg(r,u));n.preventDefault()});$(document).on("click","#constructor .const-holder.const-dates ul li:not(.active)",function(){var t=discardDataCheck("acts"),n;temp=$(this);tempDate!=null&&(n=tempDate,$(".const-main .const-holder.const-locs ul li").each(function(){var t=$(this),i=$(t.find("span")[0]).text();f(i,n)||tempLocs.push({location:i,actDate:n,comment:$(t.find("span")[1]).text()})}));generateLocations();tempDate=temp.data("date")});$(document).on("click","#constructor .const-holder.const-locs ul li",function(){var i=discardDataCheck("locs"),n,t;temp=$(this);tempLoc!=""&&(n=$("#constructor .const-holder.const-dates ul li.active").data("date"),t=tempLoc,$(".const-main .const-holder.const-acts ul li").each(function(){var i=$(this),e=i.data("id"),r=i.find("select").val(),f=i.find(".act-amt").val(),o=i.find(".mats-req")!=undefined?i.find(".mats-req").val():!1;r.isEmpty()||f.isEmpty()||u(r,t,n)||tempActs.push({id:e,location:t,actDate:n,actID:r,actQty:f,matsReq:o})}));generateActivities();tempLoc=$(temp.find("span")[0]).text()});$(document).on("click","#constructor .const-dates > .title > a, #constructor .const-dates .placeholder button",function(n){var t=$(this);setupActivityCalendar(null);n.preventDefault()});$(document).on("click","#constructor .const-locs > .title > a, #constructor .const-locs .placeholder button",function(n){var t,i,r;$("#constructor .const-dates ul li.active").length==0?(t="<p>Please add and/or select a <b>Date<\/b> before attempting to add any new <b>Locations<\/b>.<\/p>",i="<i class='fe-comment'><\/i> Cannot Add Location",displayDialogMsg(t,i)):(r=$(this),setupLocationDialogBox("",""));n.preventDefault()});$(document).on("click","#constructor .const-acts > .title > a, #constructor .const-acts .placeholder button",function(n){var r,u,t,e,i,f;$("#constructor .const-locs ul li.active").length==0?(r="<p>Please add and/or select a <b>Location<\/b> before attempting to add any new <b>Activities<\/b>.<\/p>",u="<i class='fe-comment'><\/i> Cannot Add Activity",displayDialogMsg(r,u)):(t=$("#constructor > .const-main .const-acts"),e=$(this),t.find("ul").length==0&&t.append("<ul><\/ul>"),actsTempStorage==null&&$.ajax({async:!1,url:"/workorder/getactivities",data:{wid:$("#constructor").data("id")},type:"post",success:function(n){actsTempStorage=n}}),i=$("#constructor .const-acts .placeholder"),f=i.is(":visible")?300:10,i.hide(200),setTimeout(function(){t.find("ul").append(applyActivityTemplate(actsTempStorage));$(".const-main .const-acts ul").perfectScrollbar("update");var n=$(".const-main .const-acts ul").height();$(".const-main .const-acts ul").animate({scrollTop:n},50);setDisableActivityOptions();t.find("select").select2({width:"resolve",placeholder:"Select an Activity"});t.find("input.act-amt").onlyNumbers({neagtive:!1,decimal:!0})},f));n.preventDefault()});$(document).on("change","#constructor .const-acts select",function(){var n=$(this),t=n.val();temp=n.parents("li");setDisableActivityOptions();$.get("/workorder/hasmaterial",{id:t},function(t){var i=n.parents("li").find(".wo-actions"),r;t.hasMats==!0?i.find(".mat-action").length<1&&(r='<div class="add-materials-contn"><div class="add-materials"><label><\/label><\/div><\/div>',i.append(r+'<input type="hidden" class="mats-req" value="'+t.matsReq+'"/><a href="#" class="mat-action" title="Materials"><i class="mdi mdi-server"><\/i><\/a>')):i.find(".mat-action").remove()})});$(document).on("click","#constructor > .title .btn-group label:not(.active)",function(){var u=$(this),t=u.attr("class"),i=t.indexOf("unsubmit")>-1?"unsubmit":t.indexOf("verify")>-1?"verify":"submit",r=!0;i=="verify"&&(r=!1,e());r&&n(i)});$(document).on("click",".const-main .const-holder ul li .edit-action",function(n){var t=$(this),i;temp=t.parents("li");i=t.parents(".const-holder").hasClass("const-dates")?"Date":"Location";switch(i){case"Date":setupActivityCalendar(t.parents("li").data("date"));break;default:setupLocationDialogBox($(t.parents("li").find("span")[0]).text(),$(t.parents("li").find("span")[1]).text())}n.stopPropagation();n.preventDefault()});$(document).on("click",".const-main .const-holder ul li .del-action",function(n){var i=$(this),f;if(temp=i.parents("li"),temp.attr("class").indexOf("new")>-1)temp.remove();else{var r=i.parents(".const-holder"),t=r.hasClass("const-dates")?"Date":r.hasClass("const-locs")?"Location":"Activity",e=[{text:"Continue",click:function(){$(this).dialog("close");deleteAction(t)}},{text:"Cancel",click:function(){$(this).dialog("close")}}],u="";u=t=="Date"?"This action will also <b class='default-col'>Delete<\/b> all <b class='loc-col'>Locations<\/b>, <b class='act-col'>Activities<\/b> and <b class='act-col'>Materials<\/b> related to this <b class='date-col'>Date<\/b>.":t=="Location"?"This action will also <b class='default-col'>Delete<\/b> all <b class='act-col'>Activities<\/b> and <b class='act-col'>Materials<\/b> related to this <b class='loc-col'>Location<\/b>.":"This action will also <b class='default-col'>Delete<\/b> all <b class='act-col'>Materials<\/b> related to this <b class='act-col'>Activity<\/b>.";f="<div><p>"+u+" Are you sure you want to Continue?<\/p><\/div>";displayConfirmationMsg(f,"Delete "+t,e)}n.stopPropagation();n.preventDefault()});$(document).on("click",".const-main .const-holder ul li .mat-action",function(n){var i=$(this);temp=i.parents("li");t(temp);n.preventDefault()});$(document).on("blur","#constructor .const-acts input.act-amt",function(){var n=$(this),i,r;temp=n.parents("li");i=$(this.parentElement);r=i.find("select").val();$.post("/workorder/GetMaxQty",{actId:r},function(i){var r="",u,f;i.MaxQty!=0&&Number(n.val())>i.MaxQty&&(r="You have exceed the <b class='default-col'>Maximum Quantity ( "+i.MaxQty+" )<\/b> level for the activity.");Number(n.val())<1&&(r="You are going to insert <b class='default-col'>Nagavite<\/b> value as activity quantity.");r!=""?(u=[{text:"Continue",click:function(){$(this).dialog("close");h(i.hasMats)}},{text:"Cancel",click:function(){$(this).dialog("close");n.val(i.MaxQty)}}],f="<div><p>"+r+" Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(f,"Quantity Warning",u)):i.hasMats==!0&&t(temp)})});$(document).on("click","#constructor .process",function(n){var t=$("#constructor").data("id");loading(!0);$.get("../workorder/workorderactivitycount",{id:t},function(n){var i,u,r;n.any&&n.verified?(u=$("#constructor .wo-inv select").val(),r=$("#constructor .title-editor input").val(),loading(!0),$.post("../workorder/processactivities",{id:t,invID:u,title:r},function(n){removeLoader(!0,500,function(){typeof n.Additional=="undefined"&&closeConstructor();i="<p>Successfully <b class='default-col'>Processed<\/b> Workorder. <\/p>";displayDialogMsg(i,"<i class='fe-comment'><\/i> Success!")})})):(r="<i class='fe-comment'><\/i> Cannot Process Work Order!",i="",removeLoader(!0,500,function(){i=n.any?"<p>Cannot <b class='default-col'>Process<\/b> a Work Order that has not yet been <b class='act-col'>Verified<\/b>. Please make sure that you have changed the Work Order's status.<\/p>":"<p>Cannot <b class='default-col'>Process<\/b> a Work Order that has no activities. Please make sure that at least one (1) <b class='act-col'>Activity<\/b> was created.<\/p>";displayDialogMsg(i,r)}))});n.preventDefault()});$(document).on("click","#constructor .cancel",function(n){var r=discardDataCheck("full"),t,i;r?(t=[{text:"Continue",click:function(){$(this).dialog("close");closeConstructor()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],i="<p>Are you sure you want to continue this action. Any unsaved changes will be <b>Discarded<\/b>!<\/p><\/div>",displayConfirmationMsg(i,"Discard Changes",t)):closeConstructor();n.preventDefault()});$(document).on("click","#constructor .update",function(n){var f=$(".const-main .const-holder.const-dates ul li.active"),e=$(".const-main .const-holder.const-locs ul li.active"),i=[],r,t,u;$(".const-main .const-holder.const-acts ul li").each(function(){var n=$(this),t=n.find("select").val(),r=n.find(".act-amt").val();t.isEmpty()||r.isEmpty()||i.push({actID:t,actQty:r})});f.length>0&&e.length>0&&i.length>0?(r=[{text:"Continue",click:function(){$(this).dialog("close");updateAction()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t="<p>Only the selected <b class='date-col'>Date<\/b>, <b class='loc-col'>Location<\/b> and valid <b class='act-col'>Activities<\/b> will be <b class='default-col'>Updated<\/b>. Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(t,"Update Confirmation",r)):(t="<p>Cannot <b class='default-col'>Update<\/b> incomplete Workorder. Please make sure that a valid <b class='date-col'>Date<\/b> and <b class='loc-col'>Location<\/b> were select and that at least one (1) <b class='act-col'>Activity<\/b> was selected with an appropriate quantity.<\/p>",u="<i class='fe-comment'><\/i> Cannot Update Work Order!",displayDialogMsg(t,u));n.preventDefault()});$(document).on("click",".dt-details-role",function(n){var t=$(this),i=t.parents("tr").attr("id");loading(!1);url=t.parents("table").data("roleurl");$("body").append("<div class='btm-overlay'><\/div>");$(".btm-overlay").fadeIn(200);$.ajax({url:url,data:{id:i},type:"POST",success:function(n){removeLoader(!1,500,function(){$("body").append(n);$("#roletask .center").perfectScrollbar()})}});n.preventDefault()});$(document).on("click","#roletask .tasks-holder td .check-box",function(n){var r=$(this),t,i;r.toggleClass("active");t=$("#roletask .tasks-holder td");i=t.find(".check-box.active");t.find(".check-box").length===i.length?$("#roletask .tasks-holder th .check-box").addClass("active"):$("#roletask .tasks-holder th .check-box").removeClass("active");n.preventDefault()});$(document).on("click","#roletask .tasks-holder th .check-box",function(){var n=$(this),t;n.toggleClass("active");t=n.is(".active");t?$("#roletask .tasks-holder td .check-box").each(function(n,t){$(t).addClass("active")}):$("#roletask .tasks-holder td .check-box").removeClass("active")});$(document).on("click","#roletask .tasks-holder td .check-box-s",function(n){var r=$(this),t,i;r.toggleClass("active");t=$("#roletask .tasks-holder td");i=t.find(".check-box-s.active");t.find(".check-box-s").length===i.length?$("#roletask .tasks-holder th .check-box-s").addClass("active"):$("#roletask .tasks-holder th .check-box-s").removeClass("active");n.preventDefault()});$(document).on("click","#roletask .tasks-holder th .check-box-s",function(){var n=$(this),t;n.toggleClass("active");t=n.is(".active");t?$("#roletask .tasks-holder td .check-box-s").each(function(n,t){$(t).addClass("active")}):$("#roletask .tasks-holder td .check-box-s").removeClass("active")});$(document).on("click","#roletask .tasks-holder td .check-box-r",function(n){var r=$(this),t,i;r.toggleClass("active");t=$("#roletask .tasks-holder td");i=t.find(".check-box-r.active");t.find(".check-box-r").length===i.length?$("#roletask .tasks-holder th .check-box-r").addClass("active"):$("#roletask .tasks-holder th .check-box-r").removeClass("active");n.preventDefault()});$(document).on("click","#roletask .tasks-holder th .check-box-r",function(){var n=$(this),t;n.toggleClass("active");t=n.is(".active");t?$("#roletask .tasks-holder td .check-box-r").each(function(n,t){$(t).addClass("active")}):$("#roletask .tasks-holder td .check-box-r").removeClass("active")});$(document).on("click","#roletask .tasks-holder td .check-box-w",function(n){var r=$(this),t,i;r.toggleClass("active");t=$("#roletask .tasks-holder td");i=t.find(".check-box-w.active");t.find(".check-box-w").length===i.length?$("#roletask .tasks-holder th .check-box-w").addClass("active"):$("#roletask .tasks-holder th .check-box-w").removeClass("active");n.preventDefault()});$(document).on("click","#roletask .tasks-holder th .check-box-w",function(){var n=$(this),t;n.toggleClass("active");t=n.is(".active");t?$("#roletask .tasks-holder td .check-box-w").each(function(n,t){$(t).addClass("active")}):$("#roletask .tasks-holder td .check-box-w").removeClass("active")});$(document).on("click","#tasks .close",function(){$("#tasks").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove();$(".btm-overlay").fadeOut(200,function(){$(this).remove()})})});$(document).on("click",".mat-const-main .const-holder ul li > .wo-actions .add-materials button",function(n){console.log("asfasf");var t=$(this);t.toggleClass("off");t.classList.length>0&&LoadMetarialUsagePopup(t);n.preventDefault()});$(document).on("click",".has-constructor .dt-details-mat",function(n){var i=$(this),t=i.parents("tr").attr("id"),r,u;t=t.toLowerCase().indexOf("invoiced")>-1?"invoiced":t.split("_")[1];t!="invoiced"?(loading(!1),url=i.parents("table").data("maturl"),$("body").append("<div class='full-overlay'><\/div>"),$(".full-overlay").fadeIn(200),$.ajax({url:url,data:{wid:t},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#matConstructor [title]").tooltip({placement:"top"});$("#matConstructor").addClass("animated bounceInRight").show();$(".mat-const-main .const-holder ul").perfectScrollbar();$("#matConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#matConstructor .title span").dotdotdot();t=$(".mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$(".mat-const-main .const-mats .placeholder").show(100,function(){$(".mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableMetarialOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$(".mat-const-main .const-mats ul").perfectScrollbar()},r))})}})):(r="<p>This Workorder has already been <b>Invoiced<\/b>. To edit the Workorder you must first reverse the Invoice.<\/p>",u="<i class='fe-comment'><\/i>Already Processed",displayDialogMsg(r,u));n.preventDefault()});$(document).on("click","#matConstructor .const-mats > .title > a, #matConstructor .const-mats .placeholder button",function(n){var t=$("#matConstructor > .mat-const-main .const-mats"),u=$(this),i,r;t.find("ul").length==0&&t.append("<ul><\/ul>");matsTempStorage==null&&$.ajax({async:!1,url:"/workorder/getmetarials",data:{actId:$("#actIdHidden").val()},type:"post",success:function(n){matsTempStorage=n}});i=$("#matConstructor .const-mats .placeholder");r=i.is(":visible")?300:10;i.hide(200);setTimeout(function(){t.find("ul").append(applyActivityMatTemplate(matsTempStorage));$(".mat-const-main .const-mats ul").perfectScrollbar("update");setDisableMetarialOptions();t.find("select").select2({width:"resolve",placeholder:"Select a Metarial"});t.find("input.act-amt").onlyNumbers({neagtive:!1,decimal:!0})},r);n.preventDefault()});$(document).on("change","#matConstructor .const-mats select",function(){var t=$(this),r=t.val(),n,i;for(setDisableActivityOptions(),n=0;n<matsTempStorage.length;n++)matsTempStorage[n].activityID==r&&(i=t.parents("li").find(".act-amt"),$(i[0]).val(matsTempStorage[n].maxQty))});$(document).on("blur","#matConstructor .const-mats input.act-amt",function(){var n=$(this),t=$(this.parentElement),i=t.find("select").val(),r=$("#actIdHidden").val();$.post("/workorder/GetMaterialMaxQty",{actId:r,matId:i},function(t){var i="",r,u;t.MaxQty!=0&&Number(n.val())>t.MaxQty&&(i="You have exceed the <b class='default-col'>Maximum Quantity ( "+t.MaxQty+" )<\/b> level for the material.");Number(n.val())<1&&(i="You are going to insert <b class='default-col'>Nagavite<\/b> value as material quantity.");i!=""&&(r=[{text:"Continue",click:function(){$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}],u="<div><p>"+i+" Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(u,"Quantity Warning",r))})});$(document).on("click","#matConstructor > .title .btn-group label:not(.active)",function(){var i=$(this),t=i.attr("class"),n=t.indexOf("unsubmit")>-1?"unsubmit":t.indexOf("verify")>-1?"verify":"submit";$.post("/workorder/changeStatus",{type:n,wid:$("#constructor").data("id")},function(t){if(t.Msg!=""){$("#constructor > .title .btn-group label").removeClass("active");n=="submit"?$("#constructor > .title .btn-group label.submit").addClass("active"):n=="verify"?$("#constructor > .title .btn-group label.verify").addClass("active"):$("#constructor > .title .btn-group label.unsubmit").addClass("active");var r=t.Msg,i="<i class='fe-comment'><\/i> Cannot Change Status!";t.Code=="1001"&&(i="<i class='fe-comment'><\/i>Penalty Warning!");displayDialogMsg(r,i)}})});$(document).on("click",".mat-const-main .const-holder ul li .del-action",function(n){var t=$(this);if(temp=t.parents("li"),temp.attr("class").indexOf("new")>-1)temp.remove();else{var u=t.parents(".const-holder"),i="Activity",r=[{text:"Continue",click:function(){$(this).dialog("close");deleteMetarial(i)}},{text:"Cancel",click:function(){$(this).dialog("close")}}];displayConfirmationMsg("<div><p>This action will <b class='default-col'>Delete<\/b> this <b class='act-col'>Metarial<\/b>. Are you sure you want to Continue?<\/p><\/div>","Delete "+i,r)}n.stopPropagation();n.preventDefault()});$(document).on("click","#matConstructor .cancel",function(n){var r=discardMetarialDataCheck("full"),t,i;r?isMatAddedToist?closeMatConstructor():(t=[{text:"Continue",click:function(){$(this).dialog("close");closeMatConstructor()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],i="<p>Are you sure you want to continue this action. Any unsaved changes will be <b>Discarded<\/b>!<\/p><\/div>",displayConfirmationMsg(i,"Discard Changes",t)):closeMatConstructor();n.preventDefault()});$(document).on("click","#matConstructor .update",function(n){var i=[],r,t,u;$(".mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),u=$("#matConstructor #actIdHidden").val(),f=$("#matConstructor #locHidden").val(),e=$("#matConstructor #dateHidden").val(),t=n.find("select").val(),r=n.find(".act-amt").val();t.isEmpty()||r.isEmpty()||i.push({actID:u,loc:f,date:e,matID:t,matQty:r})});i.length>0?(r=[{text:"Continue",click:function(){$(this).dialog("close");updateMetarial()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t="<p>Only the valid <b class='act-col'>Metarials<\/b> will be <b class='default-col'>Added to the list <\/b> metarials will be saved, when <b class='default-col'>saving the activities<\/b>. Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(t,"Update Confirmation",r)):(t="<p>Cannot <b class='default-col'>Update<\/b> incomplete Work order. Please make sure that at least one (1) <b class='act-col'>Metarial<\/b> was selected with an appropriate quantity.<\/p>",u="<i class='fe-comment'><\/i> Cannot Update Work Order!",displayDialogMsg(t,u));n.preventDefault()});$(document).on("click",".has-constructor .dt-details-quot",function(n){var t=$(this),i=t.parents("tr").attr("id");loading(!1);url=t.parents("table").data("qurl");$("body").append("<div class='full-overlay'><\/div>");$(".full-overlay").fadeIn(200);$.ajax({url:url,data:{qid:i},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#qConstructor [title]").tooltip({placement:"top"});$("#qConstructor").addClass("animated bounceInRight").show();$("#qConstructor .mat-const-main .const-holder ul").perfectScrollbar();$("#qConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#qConstructor .title span").dotdotdot();t=$("#qConstructor .mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$("#qConstructor .mat-const-main .const-mats .placeholder").show(100,function(){$("#qConstructor .mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableQuotationActivityOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$("#qConstructor .mat-const-main .const-mats ul").perfectScrollbar()},r))})}});n.preventDefault()});$(document).on("click","#qConstructor .const-mats > .title > a, #qConstructor .const-mats .placeholder button",function(n){var t=$("#qConstructor > .mat-const-main .const-mats"),u=$(this),i,r;t.find("ul").length==0&&t.append("<ul><\/ul>");actsTempStorage==null&&$.ajax({async:!1,url:"/quotation/GetActivities",type:"post",success:function(n){actsTempStorage=n}});i=$("#qConstructor .const-mats .placeholder");r=i.is(":visible")?300:10;i.hide(200);setTimeout(function(){t.find("ul").append(applyQuotActivityTemplate(actsTempStorage));$("#qConstructor .mat-const-main .const-mats ul").perfectScrollbar("update");setDisableQuotationActivityOptions();t.find("select").select2({width:"resolve",placeholder:"Select a Activity",tags:!0});t.find("input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});t.find("input.act-amt").on("blur",function(){var n=$(this),t=$(this.parentElement),i=t.find("select").val();$.post("/quotation/GetMaxQty",{act:i},function(t){var i="";t.MaxQty!=0&&Number(n.val())>t.MaxQty&&(i="Quntity cannot be greater than "+t.MaxQty+".");Number(n.val())<1&&(i="Quntity cannot be 0 or minus value.");i!=""&&(displayDialogMsg(i,"<i class='fe-comment'><\/i>Quntity Warning!"),n.val(1));n.parent("li").find("input.act-rat").val(t.Rate)})})},r);n.preventDefault()});$(document).on("change","#qConstructor .const-mats select",function(){var n=$(this),t=n.val();$.post("/quotation/GetRate",{act:t},function(t){var i=n.parent(".act-holder"),r=i.find(".act-rat");r.val(t.Rate)});setDisableQuotationActivityOptions()});$(document).on("click","#qConstructor .mat-const-main .const-holder ul li .del-action",function(n){var t=$(this);if(temp=t.parents("li"),temp.attr("class").indexOf("new")>-1)temp.remove();else{var u=t.parents(".const-holder"),i="Activity",r=[{text:"Continue",click:function(){$(this).dialog("close");deleteQuotationActivity(i)}},{text:"Cancel",click:function(){$(this).dialog("close")}}];displayConfirmationMsg("<div><p>This action will <b class='default-col'>Delete<\/b> this <b class='act-col'>Activity<\/b>. Are you sure you want to Continue?<\/p><\/div>","Delete "+i,r)}n.stopPropagation();n.preventDefault()});$(document).on("click","#qConstructor .cancel",function(n){var r=discardQuotationDataCheck("full"),t,i;r?(t=[{text:"Continue",click:function(){$(this).dialog("close");closeQuotConstructor()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],i="<p>Are you sure you want to continue this action. Any unsaved changes will be <b>Discarded<\/b>!<\/p><\/div>",displayConfirmationMsg(i,"Discard Changes",t)):closeQuotConstructor();n.preventDefault()});$(document).on("click","#qConstructor .update",function(n){var i=[],r,t,u;$("#qConstructor .mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),t=n.find("select").val(),r=n.find(".act-amt").val();t.isEmpty()||r.isEmpty()||i.push({matID:t,matQty:r})});i.length>0?(r=[{text:"Continue",click:function(){$(this).dialog("close");updateQuotationActivity()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t="<p>Only the valid <b class='act-col'>Activities<\/b> will be saved. Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(t,"Update Confirmation",r)):(t="<p>Cannot <b class='default-col'>Update<\/b> incomplete Quotation. Please make sure that at least one (1) <b class='act-col'>Activity<\/b> was selected with an appropriate quantity.<\/p>",u="<i class='fe-comment'><\/i> Cannot Update Quotation!",displayDialogMsg(t,u));n.preventDefault()});$(document).on("click",".has-constructor .dt-details-sinv",function(n){var t=$(this),i=t.parents("tr").attr("id");loading(!1);url=t.parents("table").data("qurl");$("body").append("<div class='full-overlay'><\/div>");$(".full-overlay").fadeIn(200);$.ajax({url:url,data:{sIid:i},type:"POST",success:function(n){removeLoader(!1,500,function(){var t,i,r;$("body").append(n);$("#sIConstructor [title]").tooltip({placement:"top"});$("#sIConstructor").addClass("animated bounceInRight").show();$("#sIConstructor .mat-const-main .const-holder ul").perfectScrollbar();$("#sIConstructor .wo-inv select").select2({minimumResultsForSearch:-1,width:130,placeholder:"Select One",allowClear:!0});$("#sIConstructor .title span").dotdotdot();t=$("#sIConstructor .mat-const-main .const-holder.const-mats");t.find("li").length==0?(t.find("ul").remove(),$("#sIConstructor .mat-const-main .const-mats .placeholder").show(100,function(){$("#sIConstructor .mat-const-main .const-mats .placeholder button").addClass("activated animated flash")})):(i=t.find(".placeholder"),r=i.is(":visible")?300:10,i.find("button").removeClass("activated animated flash"),i.hide(200),setTimeout(function(){setDisableSInvoiceActivityOptions();t.find("select").select2({width:"resolve"});t.find(".act-holder input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});$("#sIConstructor .mat-const-main .const-mats ul").perfectScrollbar()},r))})}});n.preventDefault()});$(document).on("click","#sIConstructor .const-mats > .title > a, #sIConstructor .const-mats .placeholder button",function(n){var t=$("#sIConstructor > .mat-const-main .const-mats"),u=$(this),i,r;t.find("ul").length==0&&t.append("<ul><\/ul>");actsTempStorage==null&&$.ajax({async:!1,url:"/StandbyInvoice/GetActivities",type:"post",success:function(n){actsTempStorage=n}});i=$("#sIConstructor .const-mats .placeholder");r=i.is(":visible")?300:10;i.hide(200);setTimeout(function(){t.find("ul").append(applySInvActivityTemplate(actsTempStorage));$("#sIConstructor .mat-const-main .const-mats ul").perfectScrollbar("update");setDisableSInvoiceActivityOptions();t.find("select").select2({width:"resolve",placeholder:"Select a Activity",tags:!0});t.find("input.act-amt").onlyNumbers({neagtive:!1,decimal:!0});t.find("input.act-amt").on("blur",function(){var n=$(this),t=$(this.parentElement),i=t.find("select").val();$.post("/StandbyInvoice/GetMaxQty",{act:i},function(t){var i="";t.MaxQty!=0&&Number(n.val())>t.MaxQty&&(i="Quntity cannot be greater than "+t.MaxQty+".");Number(n.val())<1&&(i="Quntity cannot be 0 or minus value.");i!=""&&(displayDialogMsg(i,"<i class='fe-comment'><\/i>Quntity Warning!"),n.val(1));n.parent("li").find("input.act-rat").val(t.Rate)})})},r);n.preventDefault()});$(document).on("change","#sIConstructor .const-mats select",function(){var n=$(this),t=n.val();$.post("/StandbyInvoice/GetRate",{act:t},function(t){var i=n.parent(".act-holder"),r=i.find(".act-rat");r.val(t.Rate)});setDisableSInvoiceActivityOptions()});$(document).on("click","#sIConstructor .mat-const-main .const-holder ul li .del-action",function(n){var t=$(this);if(temp=t.parents("li"),temp.attr("class").indexOf("new")>-1)temp.remove();else{var u=t.parents(".const-holder"),i="Activity",r=[{text:"Continue",click:function(){$(this).dialog("close");deleteSInvoiceActivity(i)}},{text:"Cancel",click:function(){$(this).dialog("close")}}];displayConfirmationMsg("<div><p>This action will <b class='default-col'>Delete<\/b> this <b class='act-col'>Activity<\/b>. Are you sure you want to Continue?<\/p><\/div>","Delete "+i,r)}n.stopPropagation();n.preventDefault()});$(document).on("click","#sIConstructor .cancel",function(n){var r=discardSInvoiceDataCheck("full"),t,i;r?(t=[{text:"Continue",click:function(){$(this).dialog("close");closeSInvoiceConstructor()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],i="<p>Are you sure you want to continue this action. Any unsaved changes will be <b>Discarded<\/b>!<\/p><\/div>",displayConfirmationMsg(i,"Discard Changes",t)):closeSInvoiceConstructor();n.preventDefault()});$(document).on("click","#sIConstructor .update",function(n){var i=[],r,t,u;$("#sIConstructor .mat-const-main .const-holder.const-mats ul li").each(function(){var n=$(this),t=n.find("select").val(),r=n.find(".act-amt").val();t.isEmpty()||r.isEmpty()||i.push({matID:t,matQty:r})});i.length>0?(r=[{text:"Continue",click:function(){$(this).dialog("close");updateSInvoiceActivity()}},{text:"Cancel",click:function(){$(this).dialog("close")}}],t="<p>Only the valid <b class='act-col'>Activities<\/b> will be saved. Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(t,"Update Confirmation",r)):(t="<p>Cannot <b class='default-col'>Update<\/b> incomplete Standby Invoice. Please make sure that at least one (1) <b class='act-col'>Activity<\/b> was selected with an appropriate quantity.<\/p>",u="<i class='fe-comment'><\/i> Cannot Update Standby Invoice!",displayDialogMsg(t,u));n.preventDefault()});$(document).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",".tel-form .msg-bar",function(){$(this).removeClass("animated wobble pulse")});$(document).on("click",".tel-form .proportion",function(n){$(this).toggleClass("set unset").find("i").toggleClass("fe-infinity-1 fe-waves");$(".tel-form .splits").first().trigger("keyup");n.preventDefault()});$(document).on("keyup",".tel-form .splits",function(){if($(".tel-form .proportion").is(".set")){var n=$(this),t=n.parents("tr").find(".splits").not(n),i=n.val();t.val(i>100?0:100-n.val())}});$(document).on("change",".team-setup .con-ddl",function(){var n=$(this),e=n.select2("data")[0].imgUrl,o=n.select2("data")[0].payScale,s=n.select2("data")[0].payScaleId,f=n.select2("data")[0].Portion,i=n.select2("data")[0].PlateNo,h=n.select2("data")[0].id,t=n.parents("tr"),r,u;t.find("img").attr("src",e);t.find("label").text(o);t.find("#contractorId").val(h);t.find("#memberPayScale")!=undefined&&t.find("#memberPayScale").val(s);document.getElementById("contractorPortion")!=undefined&&$("#contractorPortion").val(f!=undefined&&f!=""?f:100);i!=undefined&&i!=""&&(document.getElementById("Own1")!=undefined&&$("#Own1").prop("checked",!0),r=document.getElementById("plateNoDrop"),u=document.createElement("option"),u.text=i+" - Own Vehicale",u.value=i,r!=undefined&&r!=null&&r.add(u,0),$("#plateNoDrop").val(i),t.find("#memberPlateNo")!=undefined&&t.find("#memberPlateNo").val(i));document.getElementById("techNoLbl")!=undefined;t.data("id",n.val())});$(document).on("click",".tel-form .team-setup .add-new-mem",function(n){$(".tel-form .team-setup tr").length-1<parseInt($(".tel-form .team-setup").data("team"))&&$.get("workorder/getcontractorpartial",function(n){$(".tel-form .team-setup").append(n);setupTeamActions(!1)});n.preventDefault()});$(document).on("click",".tel-form .team-setup .remove-mem",function(n){$(this).parents("tr").remove();n.preventDefault()});$(document).on("click",".team-btn",function(n){c(!1);n.stopPropagation();n.preventDefault()});$(document).on("click",".merged-singular ",function(){var n=$(this);n.toggleClass("merged");$(".merge-adder").toggle(200);n.find("i").toggleClass("fe-shuffle fe-list");$(".slider.active").hide("slide",{direction:"right"},200,function(){var n=$(this);$(".slider").not(n).show("slide",{direction:"left"},200).addClass("active")}).removeClass("active")});$(document).on("click",".merge-adder",function(){loading(!1);$.get("workorder/Merger",function(n){$("body").append("<div class='btm-overlay'><\/div>");$(".btm-overlay").fadeIn(200);removeLoader(!1,500,function(){$("body").append(n);$("#merger-left ul, #merger-right .center").perfectScrollbar()})})});$(document).on("click",".dt-edit-merge",function(n){var i=$(this),r=i.parents("tr"),t=$(this).parents("tr").attr("id");t=t.indexOf("_")>-1?t.split("_")[1]:t;loading(!1);$.get("workorder/GetMerger",{id:t},function(n){$("body").append("<div class='btm-overlay'><\/div>");$(".btm-overlay").fadeIn(200);removeLoader(!1,500,function(){$("body").append(n);$("#merger-left ul, #merger-right .center").perfectScrollbar()})});n.preventDefault()});$(document).on("click",".dt-delete-merge",function(n){var t=$(this),i=t.parents("tr").find(".dt-item-refnum").text(),r=t.parents("table").data("name"),u=[{text:"Continue",click:function(){$(this).dialog("close");deleteMergeRow(t)}},{text:"Cancel",click:function(){$(this).dialog("close")}}],f='<p>Are you sure you want to <b class="default-col">Delete<\/b> <b>'+i+"<\/b> record?<\/p><\/div>";displayConfirmationMsg(f,"Delete "+r,u);n.preventDefault()});$(document).on("keyup","#merger-left .filter input",function(){var n=$(this).val(),t=$("#merger-left ul");$("#merger-left ul").perfectScrollbar("destroy");$.get("workorder/GetMergeReferences",{val:n},function(n){t.html(n);$("#merger-left ul").perfectScrollbar()})});$(document).on("click","#merger-left ul li:not(.empty)",function(){var n=$(this),t,i;if($("#mergerIdHidden").val()!=""&&$("#mergerIdHidden").val()!=undefined){LoadMergedGridWithMerged(n,$("#mergerIdHidden").val());return}$("#merger-left ul li:not(.empty)").removeClass("active");t=n.data("code");n.addClass("active");i=$("#merger-right .workorder-holder");$("#merger-right .center").perfectScrollbar("destroy");$.get("workorder/MergeCandiditates",{code:t},function(n){i.html(n);$("#merger-right .total.tot").data("total",0).find("span").text("$0.00");$("#merger-right .center").perfectScrollbar();CalculateTotal()})});$(document).on("click","#merger-right .workorder-holder td .check-box",function(n){var i=$(this),t=$("#merger-right .total.tot"),r,o,u,f,e;t.removeClass("pulse");i.toggleClass("active");r=parseFloat(i.parents("tr").find("td:last-child").data("total"));r*=i.is(".active")?1:-1;o=parseFloat(t.data("total"));u=r+o;t.find("span").text(u.formatMoney(2,"$"));t.data("total",u).addClass("pulse");f=$("#merger-right .workorder-holder td");e=f.find(".check-box.active");f.find(".check-box").length===e.length?$("#merger-right .workorder-holder th .check-box").addClass("active"):$("#merger-right .workorder-holder th .check-box").removeClass("active");e.length>1?$("#merger-right .merger-btn").show(200):$("#merger-right .merger-btn").hide(200);n.preventDefault()});$(document).on("click","#merger-right .workorder-holder th .check-box",function(){var r=$(this),i,n,t;r.toggleClass("active");i=r.is(".active");n=0;i?$("#merger-right .workorder-holder td .check-box").each(function(t,i){$(i).addClass("active");n+=parseFloat($(i).parents("tr").find("td:last-child").data("total"))}):$("#merger-right .workorder-holder td .check-box").removeClass("active");t=$("#merger-right .total.tot");t.removeClass("pulse");t.find("span").text(n.formatMoney(2,"$"));t.data("total",n).addClass("pulse");i?$("#merger-right .merger-btn").show(200):$("#merger-right .merger-btn").hide(200)});$(document).on("click","#merger .close",function(){$("#merger").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove();$(".btm-overlay").fadeOut(200,function(){$(this).remove()})})});$(document).on("click","#merger .merger-process",function(n){var t=$("#merger-left ul li.active").data("code"),i,r;t!=undefined&&t!=""?(loading(!0),$.get("../workorder/mergeractivitycount",{id:$("#mergerIdHidden").val()},function(n){var r,i;if(n.any&&n.verified){var u=$("#merger select").val(),f=[{text:"Continue",click:function(){$(this).dialog("close");loading(!0);$.post("../workorder/processmerger",{code:t,invID:u,id:$("#mergerIdHidden").val(),title:$("#txtTitle").val()},function(n){removeLoader(!0,500,function(){typeof n.Additional=="undefined"&&($("#merger").remove(),$("body").append(n),$("#merger").show());i="<p>Successfully <b class='default-col'>Processed<\/b> Work Orders. <\/p>";displayDialogMsg(i,"<i class='fe-comment'><\/i> Success!")})})}},{text:"Cancel",click:function(){$(this).dialog("close")}}],i='<p>Are you sure you want to <b class="default-col">Process<\/b> this Merged Work Orders?<\/p><\/div>';removeLoader(!0,500,function(){displayConfirmationMsg(i,"Process Merged Work Orders",f)})}else r="<i class='fe-comment'><\/i> Cannot Process!",i="",removeLoader(!0,500,function(){i=n.msg==""?n.any?"<p>Cannot <b class='default-col'>Process<\/b> the Merged Work Orders those have not yet been <b class='act-col'>Verified<\/b>. Please make sure that you have changed the Work Order's status.<\/p>":"<p>Cannot <b class='default-col'>Process<\/b> the Merged Work Orders those have no activities. Please make sure that at least one (1) <b class='act-col'>Activity<\/b> was created.<\/p>":"<p>Cannot <b class='default-col'>Process<\/b>. Please make sure that you have <b class='default-col'>Merged<\/b> the Work Orders.<\/p>";displayDialogMsg(i,r)})})):(i="<i class='fe-comment'><\/i> Cannot Process!",r="<p>Cannot <b class='default-col'>Process<\/b>. Please make sure that you have selected the <b class='default-col'>Merged<\/b> Work Orders.<\/p>",displayDialogMsg(r,i));n.preventDefault()});$(document).on("click",".inv-singular ",function(){var n=$(this);n.toggleClass("old-invoice");$(".inv-adder").toggle(200);n.find("i").toggleClass("fe-shuffle fe-list");$(".slider.active").hide("slide",{direction:"right"},200,function(){var n=$(this);$(".slider").not(n).show("slide",{direction:"left"},200).addClass("active")}).removeClass("active")});$(document).on("click",".inv-adder",function(){loading(!1);$.get("invoice/newinv",function(n){$("body").append("<div class='btm-overlay'><\/div>");$(".btm-overlay").fadeIn(200);removeLoader(!1,500,function(){$("body").append(n);$("#inv-left ul, #inv-right .center").perfectScrollbar()})})});$(document).on("click",".dt-edit-merge",function(n){var i=$(this),r=i.parents("tr"),t=$(this).parents("tr").attr("id");t=t.indexOf("_")>-1?t.split("_")[1]:t;loading(!1);$.get("invoice/GetNewInvoiceCreator",{id:t},function(n){$("body").append("<div class='btm-overlay'><\/div>");$(".btm-overlay").fadeIn(200);removeLoader(!1,500,function(){$("body").append(n);$("#inv-left ul, #inv-right .center").perfectScrollbar()})});n.preventDefault()});$(document).on("click",".dt-delete-inv",function(n){var t=$(this),i=t.parents("tr").find(".dt-item-refnum").text(),r=t.parents("table").data("name"),u=[{text:"Continue",click:function(){$(this).dialog("close");deleteInvRow(t)}},{text:"Cancel",click:function(){$(this).dialog("close")}}],f='<p>Are you sure you want to <b class="default-col">Delete<\/b> <b>'+i+"<\/b> record?<\/p><\/div>";displayConfirmationMsg(f,"Delete "+r,u);n.preventDefault()});$(document).on("click","#inv-left .inv-bot button",function(){var u=$("#inv-left form"),i=$("#inv-left [name='dateFrom']").val(),r=$("#inv-left [name='dateTo']").val(),n={client:$("#client").val(),po:$("#po").val(),classifi:$("#classifi").val(),region:$("#region").val(),dateFrom:i,dateTo:r},t;if($("#invIdHidden").val()!=""&&$("#invIdHidden").val()!=undefined){LoadInvGridWithInv(n,$("#invIdHidden").val());return}t=$("#inv-right .workorder-holder");$("#inv-right .center").perfectScrollbar("destroy");$.post("invoice/InvoiceCandiditates",{model:n},function(n){t.html(n);$("#inv-right .total.tot").data("total",0).find("span").text("$0.00");$("#inv-right .center").perfectScrollbar();CalculateWOTotal()})});$(document).on("click","#inv-left ul li:not(.empty)",function(){var n=$(this),t,i;if($("#invIdHidden").val()!=""&&$("#invIdHidden").val()!=undefined){LoadInvGridWithInv(n,$("#invIdHidden").val());return}$("#inv-left ul li:not(.empty)").removeClass("active");t=n.data("code");n.addClass("active");i=$("#inv-right .workorder-holder");$("#inv-right .center").perfectScrollbar("destroy");$.get("invoice/MergeCandiditates",{code:t},function(n){i.html(n);$("#inv-right .total.tot").data("total",0).find("span").text("$0.00");$("#inv-right .center").perfectScrollbar();CalculateWOTotal()})});$(document).on("click","#inv-right .workorder-holder td .check-box",function(n){var i=$(this),t=$("#inv-right .total.tot"),r,o,u,f,e;t.removeClass("pulse");i.toggleClass("active");r=parseFloat(i.parents("tr").find("td:last-child").data("total"));r*=i.is(".active")?1:-1;o=parseFloat(t.data("total"));u=r+o;t.find("span").text(u.formatMoney(2,"$"));t.data("total",u).addClass("pulse");f=$("#inv-right .workorder-holder td");e=f.find(".check-box.active");f.find(".check-box").length===e.length?$("#inv-right .workorder-holder th .check-box").addClass("active"):$("#inv-right .workorder-holder th .check-box").removeClass("active");e.length>1?$("#inv-right .inv-btn").show(200):$("#inv-right .inv-btn").hide(200);n.preventDefault()});$(document).on("click","#inv-right .workorder-holder th .check-box",function(){var r=$(this),i,n,t;r.toggleClass("active");i=r.is(".active");n=0;i?$("#inv-right .workorder-holder td .check-box").each(function(t,i){$(i).addClass("active");n+=parseFloat($(i).parents("tr").find("td:last-child").data("total"))}):$("#inv-right .workorder-holder td .check-box").removeClass("active");t=$("#inv-right .total.tot");t.removeClass("pulse");t.find("span").text(n.formatMoney(2,"$"));t.data("total",n).addClass("pulse");i?$("#inv-right .inv-btn").show(200):$("#inv-right .inv-btn").hide(200)});$(document).on("click","#inv .close",function(){$("#inv").removeClass("fadeInRight").addClass("fadeOutUp").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove();$(".btm-overlay").fadeOut(200,function(){$(this).remove()})})});$(document).on("click",".inv-process",function(n){var t=$(".workorder-holder table > tbody  > tr"),u,f,e,o,i,r;t.length<1?(i="<p>No <b class='loc-col'>Work Order(s)<\/b> have been selected for <b class='date-col'>Process<\/b>. First select your desired <b class='loc-col'>Work Order(s)<\/b> then try again.<\/p>",r="<i class='fe-comment'><\/i>Cannot Process",displayDialogMsg(i,r)):(t=$.grep(t,function(n){var t=$(n).find("button");return $(t).is(".active")}),u=$.map(t,function(n){return $(n).attr("id").replace("tr-","")}),f=$("#invIdHidden").val(),u.length>0?(e=[{text:"Continue",click:function(){$(this).dialog("close");l(u,f,$(this))}},{text:"Cancel",click:function(){$(this).dialog("close")}}],o="<p>Selected <b class='date-col'>Work Orders<\/b>, will be <b class='default-col'>Process<\/b>. Are you sure you want to Continue?<\/p><\/div>",displayConfirmationMsg(o,"Process Confirmation",e)):(i="<p>No <b class='loc-col'>Work Order(s)<\/b> have been selected for <b class='date-col'>Process<\/b>. First select your desired <b class='loc-col'>Work Order(s)<\/b> then try again.<\/p>",r="<i class='fe-comment'><\/i>Cannot Process",displayDialogMsg(i,r)));n.preventDefault()})});$(window).load(function(){$("#nav > li.has-sub > a").click(function(n){if($("body").hasClass("big")){var t=$(this);$("#nav > li.open").not(t.parents("li")).find("> a").trigger("click");t.parent().toggleClass("open");t.parent().find("ul").toggle(200);t.find("i:nth-child(2)").toggleClass("fe-right-open fe-down-open")}n.preventDefault()});$(document).on("mouseenter",".sml #nav > li.has-sub",function(){$(this).find("ul").show(200)});$(document).on("mouseleave",".sml #nav > li.has-sub",function(){$(this).find("ul").stop(!0,!0).hide(200)});$(document).mouseup(function(n){var t=$(".user-holder");t.is(n.target)||t.has(n.target).length!==0||$(".user-dropdown").is(".active")&&$(".user-dropdown").trigger("click")});$("#nav li a").each(function(){var n=$(this);n.attr("href")==window.location.pathname&&(n.addClass("active"),n.parents("li.has-sub").length>0&&n.parents("li.has-sub").addClass("active").find("> a").trigger("click"))});$(".menu-toggler a").tooltip({placement:"right"});$(document).on("click",".menu-toggler a, button.navicon-button",function(n){var t,r,i;$(this).toggleClass("open");t=$("#sidebar");r=$(".sub-holder");$("body").toggleClass("sml big");$("body").hasClass("sml")?($("#logo h1").hide(),t.find("li > a > span, li > a > .nav-arrow").hide(),t.find(".has-sub.open > a").trigger("click").addClass("active"),i=window.innerWidth,i<=768?($("#nav").show(),t[0].style.height="100%"):($("#logo h1").hide(),t.find("li > a > span, li > a > .nav-arrow").hide(),t.animate({width:75},200),r.animate({left:75},200),$(".listing-selected, #header").animate({left:75},200))):(t.find("a.active").parents(".has-sub").find("> a").trigger("click"),i=window.innerWidth,i<=768?($("#nav").hide(),t[0].style.height="60px"):(t.animate({width:240},200,function(){t.find("li > a > span, li > a > .nav-arrow").show();$("#logo h1").show()}),r.animate({left:240},200),$("#header").animate({left:240},200),$(".listing-selected").animate({left:240},200)));n.preventDefault()});$(document).on("click","#nav-settings",function(n){n.preventDefault();var t=$(this).data("url");$.post(t,function(n){$("body").append(n);$(".modal").modal({show:!0}).find("select").select2({minimumResultsForSearch:-1,width:"resolve"});$.validator.unobtrusive.parse($("#settings-box form"))})});$("#subnav li a").tooltip({placement:"bottom"});$(document).on("click",".user-dropdown",function(n){var t=$(this);t.toggleClass("active");t.parent().find("ul").toggle();n.preventDefault()});$(document).on("hidden.bs.modal",".modal",function(){$(this).remove()});$(document).on("change","#status",function(){dTable.draw()});$(document).on("click",".admin-tbl tbody td.more-details",function(){var t=$(this),i=t.parent(),n=dTable.row(i);t.toggleClass("expanded");t.find("span i").toggleClass("fe-plus fe-minus");n.child.isShown()?n.child.hide():n.child(n.data().Additional,"sub-row animated fadeIn").show()});$(document).on("click",function(n){$(n.target).hasClass("dt-change")||$(n.target).parents("a").hasClass("dt-change")||$(".dt-change").popover("hide");$(n.target).hasClass("dt-print")||$(n.target).parents("a").hasClass("dt-print")||$(".dt-print").popover("hide");$(n.target).hasClass("dt-print-new")||$(n.target).parents("a").hasClass("dt-print-new")||$(".dt-print-new").popover("hide");return});$("#body").mutate("height",function(){$(".sub-holder").perfectScrollbar("update")});$(".sub-list-holder").mutate("height",function(){$(".sub-list-holder").perfectScrollbar("update")});$(window).resize(function(){$(".ps-container").perfectScrollbar("update")});$(".sub-holder").perfectScrollbar();$(document).on("click",".tel-form .tel-tabs button:not(:disabled)",function(n){var t=$(this),i,r;t.is(":not(.active)")&&(i=$(".tel-form .tel-tabs button"),i.removeClass("active"),t.addClass("active"),$(".modal-footer .update").removeClass("team-btn link-btn"),r=i.index(t),$(".tel-form table.active").removeClass("active").hide(200,function(){$(".tel-form table").eq(r).addClass("active").show(200);t.is("#teams")&&(setupTeamActions(!0),$(".modal-footer .update").toggleClass("saver team-btn"))}));n.preventDefault()});$(document).on("change",".tel-form #banksddl",function(){var n=$(this).val(),t=$(".admin-tbl").data("url")+"/getbranchesforbank";$.get(t,{id:n},function(n){var i,t;for($("#Branch").select2("destroy"),i="<option><\/option>",t=0;t<n.length;t++)i+="<option value='"+n[t].Value+"'>"+n[t].Text+"<\/option>";$("#Branch").html(i).select2({minimumResultsForSearch:-1,width:"resolve",placeholder:"Select an option"})})});$(document).on("click",".tel-form .tel-date > button",function(n){$(".tel-form .tel-date .date-box").datepicker("show");$(".tel-form .tel-date .date-box").datepicker().on("changeDate",function(){$(this).datepicker("hide")});n.preventDefault()});$(document).on("click",".tel-form .tel-img-uploader",function(n){$(this).parent().find("input[type='file']").trigger("click");n.preventDefault()});$(document).on("change",".tel-form input[type='file']",function(){if(this.files&&this.files[0]){var n=new FileReader;n.onload=function(n){$(".tel-form .pic-box img").attr("src",n.target.result)};n.readAsDataURL(this.files[0])}})});